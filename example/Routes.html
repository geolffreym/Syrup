<!DOCTYPE html>
<html lang="en" sp-app="Hey">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<script src="/syrup/dist/init.js"></script>


<div sp-recipe="Hey.You">

</div>


<div sp-recipe="Hey.Do">
    <!-- The method "method" in module Hey.Do-->
    <a href="#" sp-click="method">
        Change You
    </a>


</div>


<script>

    //The controller
    _$ (function () {

        //The Module with Http dependencie
        var my_Lib = App.blend ('Hey', ['Http', 'Model', 'Router']);

        //Providing features to App
        my_Lib.service ('HeyConsole', function () {
            //A global service
            console.log ('hi')

        }).beforeInit (['Hey.You'], function (moduleId, $) {

            //Before execution of recipes, what to do?
            $.Router.setRoutes ({
                'myLocalRoute': '/Routes.html'
            });

            // console.log(my_Lib.getRecipe(moduleId));

        }).afterInit (['Hey.You', 'Hey.Do'], function (moduleId, $) {

            //After execution of recipes, what to do?
            console.log ('I\m served: ' + moduleId)
        });


        //A new recipe for Hey
        my_Lib.recipe ('Hey.You', function (_, _$, scope) {
            return {
                init   : function ($) {

                    $.Router.when ('myLocalRoute').then (function (r) {
                        console.log (r)
                    }).catch (function () {
                        console.log ('noohh!!')
                    });

                },
                destroy: function ($) {
                    alert ('destroyed?')
                }
            }
        });

        //A new recipe for Hey
        my_Lib.recipe ('Hey.Do', function (_, _$, scope) {
            return {
                init   : function (tools) {

                },
                method : function (e, $) {
                    my_Lib.setScope ('Hey.You', {
                        'beatles': [
                            { "firstName": "John", "lastName": "Pasa" }
                        ]
                    });

                    my_Lib.drop ('Hey.You')
                },
                destroy: function () {
                    alert('Me too?')
                }
            }
        });

        //my_Lib.dropAll()


    })

</script>
</body>
</html>
