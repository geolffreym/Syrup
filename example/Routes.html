<!DOCTYPE html>
<html lang="en" sp-app="Hey">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<script src="/syrup/dist/init.js"></script>


<div sp-recipe="Hey.You"></div>

<div sp-recipe="Hey.Do">
    <button sp-click="redirect">Redirect</button>
</div>

<script>

    //The controller
    _$ (function () {

        //The App with dependencies
        var my_Lib = App.blend ('Hey', ['Http', 'Model', 'Router']);

        //Providing features to App
        my_Lib.service ('HeyConsole', function () {
            //A global service
            console.log ('hi')

        }).spice (['Hey.You','Hey.Do'], function (moduleId, $) {

            //Before execution of recipes list, what to do?
            $.Router.setRoutes ({
                'myLocalRoute': '/Routes.html',
                'theNewRoute' : '/route/:page/'
            });

        });


        //RECIPES
        //A new recipe for Hey
        my_Lib.recipe ('Hey.You', function (_, _$, scope) {
            return {
                init   : function ($) {
                    $.Router.when ('theNewRoute').then (function (e) {
                        console.log (e);
                    })

                },
                destroy: function ($) {
                    //Dropped? What to do?
                    alert ('destroyed?')
                }
            }
        });

        //A new recipe for Hey
        my_Lib.recipe ('Hey.Do', function (_, _$, scope) {
            return {
                init    : function ($) {},
                redirect: function (e, $) {
                    $.Router.redirect ('theNewRoute', { ':page': '3' })
                            .then (function () { });
                }
            }
        });

    });

</script>
</body>
</html>
