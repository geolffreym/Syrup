<!DOCTYPE html>
<html lang="en" sp-app="Hey">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<script src="/syrup/dist/init.js"></script>


<div sp-recipe="Hey.You">
    <!-- Hey.You recipe -->
</div>


<div sp-recipe="Hey.Do">
    <!-- Hey.Do recipe -->
    <!-- Event callback in recipe Hey.Do -->a

    <button sp-click="redirect">Redirect</button>
</div>

<script>

    //The App with dependencies
    var my_App = App.blend ('Hey', ['Http', 'Router']);

    //Before execution
    my_App.spice ({
        //Provide constant
        MAX: 3
    }).cook (function ($) {



        //The request
        $.Http.post('/',{a:3}).then (function () {

        }).catch(function(e){
            console.log(e)
        });

        //Before execution what to do?
        //Initialize the routes
        $.Router.set ({
            'myLocalRoute': '/Routes.html',
            'theNewRoute' : '/route/:page/:user/'
        });

    });


    //RECIPES
    //A new recipe for Hey
    my_App.recipe ('Hey.You', function (_, scope) {
        return {
            init   : function ($) {

                //When the "theNewRoute" match. What to do?
                $.Router.when ('theNewRoute').then (function (params, event) {
                    //console.log (params.getIndex (':page'));
                    //console.log (params.getIndex (':user'));
                })

            },
            destroy: function ($) {

                //Dropped? What to do?
                alert ('destroyed?')
            }
        }
    }).recipe ('Hey.Do', function (_, scope) {
        return {
            init    : function ($) {},
            redirect: function ($) {

                //Redirect to "theNewRoute" with params { ':page': '3', ':user':'2' }
                $.Router.redirect ('theNewRoute', { ':page': '3', ':user': '2' })
                        .then (function () { });
            }
        }
    });


</script>
</body>
</html>
