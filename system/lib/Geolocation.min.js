"use strict";var WARNING_GEOLOCATION={ERROR:{UNACTIVE:"Your browser has disabled please select the location for the proper operation of the site.",NOLOCATE:"It is not currently possible to track its location. Please try again.",NOWATCH:"No watching location, can't stop it"}};function Geolocation(){this.location=null;this.watch=false;this.geolocation=window.navigator.geolocation;this.conf={enableHighAccuracy:true,timeout:1e3,maximumAge:6e4}}Geolocation.add("set",function(config){this.conf=_.extend(this.conf,config,true)});Geolocation.add("get",function(watch){var _self=this,_whatToDo=watch&&_self.geolocation.watchPosition||_self.geolocation.getCurrentPosition;_self.watch=watch;return new Promise(function(resolve,reject){_whatToDo(function(u){_self.location={latitude:u.coords.latitude,longitude:u.coords.longitude,altitude:u.coords.altitude};resolve(_self.location)},function(e){var _error={1:WARNING_GEOLOCATION.ERROR.UNACTIVE,2:WARNING_GEOLOCATION.ERROR.NOLOCATE,3:this[2]};reject(_error[e.code])},_self.conf)})});Geolocation.add("watchStop",function(){var self=this;if(!self.watch){_.error(WARNING_GEOLOCATION.ERROR.NOWATCH,"(Geolocation .watchStop)")}self.geolocation.clearWatch(self.watch)});