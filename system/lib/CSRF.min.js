"use strict";function CSRF(){this.storage=new Repository;this.name="csrf";this.tokenAt=null}CSRF.add("get",function(key){var _db=this.storage.get(this.name);if(!!_db){if(_.isSet(key)&&_.isSet(_db[key])){return _db[key]}else{return _db}}return null});CSRF.add("save",function(key){var _db=this.get(this.name),_tokens=!!_db?_db:{};_tokens[key]=this.tokenAt;this.storage.set(this.name,_tokens,false);return this});CSRF.add("token",function(name){this.tokenAt=_.getCookie(name);return this.tokenAt});CSRF.add("clear",function(key){var _db=this.get(false);if(_db&&_db[key]){_db[key]=null;this.storage.set(this.name,_db,false)}});CSRF.add("destroy",function(){this.storage.clear(this.name)});CSRF.add("isSafeMethod",function(method){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(method)});