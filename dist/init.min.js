var setting={app_path:"/syrup/app",system_path:"/syrup/system",env:"development"};"undefined"!=typeof exports&&(exports.setting=setting),function(e){function t(){}function n(){this.collection=null,this.exist=null}var i=Function.prototype,r=Object.prototype,o=/(([^function])([a-zA-z])+(?=\())/g,a=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,s=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,c={ERROR:{NOPARAM:"Param needed",NONETWORK:"Network Error",NOOBJECT:"A object is needed.",NOARRAY:"A array is needed.",NOSTRING:"A string is needed",NOFUNCTION:"A function is needed.",NODATE:"Invalid Date",NOURL:"URL is needed."}};r.clone=function(){return _.extend({},this)},r.getIndex=function(e){return e in this?this[e]:null},i.blend=function(e){var t=e.__proto__.constructor.name||e.prototype.constructor.name||e.toString().match(o)[0].trim();this.prototype[t]=e},i.factory=function(e){return new Function("return function "+e+"(){}")()},i.add=function(e,t){this.prototype[e.trim()]=t},n.add("$",function(e){var t,i=e,r=new n;return _.isFunction(e)?void _$(document).ready(e):(_.isHtml(e)?(t=document.createElement("div"),t.innerHTML=e,r.collection=t.children.length>1?t.children:t.firstChild):r.collection=!_.isObject(e)&&_.isString(e)?e.indexOf("+")>-1?document.querySelectorAll(_.replace(e,"+",_.emptyStr)):document.querySelector(e):e,r.exist=_.isSet(r.collection),r.name=i.nodeName&&i.nodeName.toLowerCase()||i,r)}),n.add("ready",function(e){return _.isGlobal(this.collection)&&this.collection.addEventListener("DOMContentLoaded",e.bind(this)),this}),n.add("load",function(e){_.isGlobal(this.collection)&&(this.collection.onload=e.bind(this))}),n.add("listen",function(t,n,i){_.isFunction(n)&&(i=n);var r=this,o=null,a=function(r){r=r||e.event,o=t.srcElement||r.target,_.isString(n)&&!_.isFunction(n)?_$(o).is(n)&&_.callbackAudit(i.bind(o),r):_.callbackAudit(i.bind(o),r)};return r.each(function(e){e.addEventListener?e.addEventListener(t,a,!0):e.attachEvent&&e.attachEvent("on"+t,a),_.isSet(e.listListener)||(e.listListener={}),e.listListener[t]=a}),this}),n.add("listenOff",function(e){return this.each(function(t){_.isSet(t.listListener)&&e in t.listListener&&(t.removeEventListener?t.removeEventListener(e,t.listListener[e],!0):t.detachEvent&&t.detachEvent("on"+e,t.listListener[e]),delete t.listListener[e])})}),n.add("filter",function(e,t,n){if(!_.isString(e))return this;var i=[];return this.each(function(r){r=_$(r),r.is(e)?(_.isFunction(t)||i.push(r),_.callbackAudit(t,r)):_.isFunction(n)&&_.callbackAudit(n,r)}),_.isFunction(t)&&this||_.specArray(i)}),n.add("empty",function(){return this.each(function(e){e.value&&(e.value=_.emptyStr),e.innerHTML&&(e.innerHTML=_.emptyStr)})}),n.add("clone",function(e){var t=[];return this.each(function(n){t.push(_$(n.cloneNode(e||!1)))}),_.specArray(t)}),n.add("data",function(e,t){var n=this,i=null,r=[];return n.each(function(n,o){i=n.dataset,_.isString(t)||_.isNumber(t)?i[e]=t:_.isSet(i[e])&&r.push(i[e])}),_.isString(t)&&_.isNumber(t)&&this||_.specArray(r)}),n.add("prop",function(e){var t=[];return this.each(function(n){_.isString(e)?t.push(n[e]):_.isObject(e)&&_.each(e,function(e,t){n[t]=e})}),_.isString(e)&&_.specArray(t)||this}),n.add("attr",function(e){var t=[];return this.each(function(n){_.isString(e)?t.push(n.getAttribute(e)):_.isObject(e)&&_.each(e,function(e,t){n.setAttribute(t,e)})}),_.isString(e)&&_.specArray(t)||this}),n.add("removeAttr",function(e){return this.each(function(t){t[e]?t[e]=!1:t.removeAttr(e)})}),n.add("css",function(t){var n=[],i=this;return i.each(function(i){_.isString(t)?n.push(e.getComputedStyle(i,null).getPropertyValue(t)):_.isObject(i)&&_.each(t,function(e,t){i.style[t]=e})}),_.isString(t)&&_.specArray(n)||this}),n.add("after",function(e){return(_.isHtml(e)||!_.is$(e))&&(e=_$(e)),this.each(function(t){e.each(function(e){t.parentNode.insertBefore(e,t.nextSibling)})})}),n.add("before",function(e){return(_.isHtml(e)||!_.is$(e))&&(e=_$(e)),this.each(function(t){e.each(function(e){t.parentNode.insertBefore(e,t)})})}),n.add("append",function(e){return(_.isHtml(e)||!_.is$(e))&&(e=_$(e)),this.each(function(t){e.each(function(e){t.appendChild(e)})})}),n.add("prepend",function(e){return(_.isHtml(e)||!_.is$(e))&&(e=_$(e)),this.each(function(t){e.each(function(e){t.insertBefore(e,t.firstChild)})})}),n.add("html",function(e){return(_.isHtml(e)||_.isString(e))&&this.prop({innerHTML:e})&&this||this.prop("innerHTML")}),n.add("text",function(e){return _.isString(e)&&this.prop({textContent:e})&&this||this.prop("textContent")}),n.add("val",function(e){return _.isString(e)&&this.prop({value:e})&&this||this.prop("value")}),n.add("hide",function(){return this.each(function(e){e.style.display="none"})}),n.add("show",function(){return this.each(function(e){e.style.display="block"})}),n.add("parent",function(e){var t=[],n=null;return this.each(function(i){i.parentNode&&!_.isGlobal(i.parentNode)&&(n=_$(i.parentNode),_.isFunction(e)||t.push(n),_.isFunction(e)&&_.callbackAudit(e,n))}),_.isFunction(e)&&this||_.specArray(t)}),n.add("children",function(e){var t=[],n=null;return this.each(function(i){i.children.length>0&&_.each(i.children,function(i,r){_.isNumber(r)&&(n=_$(i),_.isFunction(e)||t.push(n),_.callbackAudit(e,n))})}),_.isFunction(e)&&this||_.specArray(t)}),n.add("next",function(e){var t=[],n=null;return this.each(function(i){i.nextElementSibling&&(n=_$(i.nextElementSibling),_.isFunction(e)||t.push(n),_.callbackAudit(e,n))}),_.isFunction(e)&&this||_.specArray(t)}),n.add("nexts",function(e,t){var n=null,i=[];return t=_.isFunction(e)&&e||t,this.next(function(r){n=r;do _.isString(e)&&!_.isFunction(e)?n.is(e)&&(_.isFunction(t)||i.push(n),_.callbackAudit(t,n)):(_.isFunction(t)||i.push(n),_.callbackAudit(t,n));while(n.get(0).nextElementSibling&&(n=_$(n.get(0).nextElementSibling)).exist)}),_.isFunction(t)&&this||_.specArray(i)}),n.add("trigger",function(e,t){var n=new CustomEvent(e,{bubbles:!0,cancelable:!0});return document.createEvent&&(n=document.createEvent("Event"),n.initEvent(e,!0,!1)),this.each(function(e){e.dispatchEvent(n)}),_.callbackAudit(t,n),this}),n.add("find",function(e,t,n){if(!_.isString(e))return this;var i=n||[];return this.children(function(n){n.is(e)?(_.isFunction(t)||i.push(n),_.isFunction(t)&&_.callbackAudit(t,n,e)):n.find(e,t,i)}),_.isFunction(t)&&this||_.specArray(i)}),n.add("parents",function(e,t,n){if(!_.isString(e))return this;var i=n||[];return this.each(function(n){_$(n).parent(function(n){n.is(e)?(_.isFunction(t)||i.push(n),_.isFunction(t)&&_.callbackAudit(t,n)):n.parents(e,t,i)})}),_.isFunction(t)&&this||_.specArray(i)}),n.add("hasClass",function(e){_.assert(e,c.ERROR.NOPARAM,"($ .hasClass)");var t=this.get(0);return t.classList&&Array.prototype.indexOf.call(t.classList,e||_.emptyStr)>-1}),n.add("addClass",function(e){return this.each(function(t){_$(t).hasClass(e)||(t.classList?t.classList.add(e):t.className+=" "+e)})}),n.add("toggleClass",function(e){return this.each(function(t){t.classList.toggle(e)})}),n.add("removeClass",function(e){return this.each(function(t){_$(t).hasClass(e)&&(t.classList?t.classList.remove(e):t.className=_.replace(t.className,_.toRegExp(e,"g"),_.emptyStr))})}),n.add("fadeOut",function(e,t){return this.animate([{opacity:"1"},{opacity:"0"}],{delay:0,duration:_.isNumber(e)?e:50},_.isFunction(e)?e.bind(this):t&&t.bind(this)),this}),n.add("fadeIn",function(e,t){return this.animate([{opacity:"0"},{opacity:"1"}],{delay:0,duration:_.isNumber(e)?e:50},_.isFunction(e)?e.bind(this):t&&t.bind(this)),this}),n.add("height",function(e){if(_.isSet(e))return this.css({height:_.isNumber(e)?e+"px":e});var t=[];return this.each(function(e){t.push(_.cartesianPlane(e).height)}),_.specArray(t)}),n.add("width",function(e){if(_.isSet(e))return this.css({width:_.isNumber(e)?e+"px":e});var t=[];return this.each(function(e){t.push(_.cartesianPlane(e).width)}),_.specArray(t)}),n.add("is",function(e){_.assert(e,c.ERROR.NOPARAM,"($ .is)");var t=this.get(0),n=t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.msMatchesSelector;return e in t||t.type===e||n.call(t,e)}),n.add("get",function(e){return"[object NodeList]"==_.objectAsString(this.collection)&&e in this.collection&&this.collection[e]||this.collection}),n.add("remove",function(){return this.each(function(e){e.remove?e.remove():e.parentNode.removeChild(e)})}),n.add("each",function(e){var t=this.collection;return"childNodes"in t||_.isGlobal(t)?_.callbackAudit(e,t,0):_.each(t,function(t,n){_.isObject(t)&&_.isSet(t)&&_.callbackAudit(e.bind(this),t,n)}),this}),n.add("offset",function(e){var t=[],n=null;return this.each(function(i){_.isObject(e)?(_.isSet(e.top)&&(i.style.top=_.isNumber(e.top)?e.top+"px":e.top),_.isSet(e.left)&&(i.style.left=_.isNumber(e.left)?e.left+"px":e.left),_.isSet(e.bottom)&&(i.style.bottom=_.isNumber(e.bottom)?e.bottom+"px":e.bottom),_.isSet(e.right)&&(i.style.right=_.isNumber(e.right)?e.right+"px":e.right)):(n=_.cartesianPlane(i),t.push({top:n.top,left:n.left,bottom:n.bottom,right:n.right}))}),_.isObject(e)&&this||_.specArray(t)}),n.add("sort",function(e,t){return _.isBoolean(e)&&(t=arguments[0],e=!1),t=t?-1:1,e=e?e:"innerHTML",_.toArray(this.collection).sort(function(n,i){var r=_$(n).attr(e)||_$(n).prop(e),o=_$(i).attr(e)||_$(i).prop(e);return _.isSet(r)&&_.isSet(o)&&(n=isNaN(+r)?r.toLowerCase():+r,i=isNaN(+o)?o.toLowerCase():+o),n>i?t:-1*t})}),n.add("animate",function(e,t,n){return this.each(function(i){if(_.isSet(i.animate)){_.isFunction(t)&&(n=t),t=_.isObject(t)||_.isNumber(t)?t:{},t.iterations=_.isSet(t.iterations)?t.iterations:1,t.duration=_.isSet(t.duration)?t.duration:1e3,t.delay=_.isSet(t.delay)?t.delay:300;var r=i.animate(e,t);r.addEventListener("finish",function(){_.callbackAudit(n,_$(i))})}})}),n.add("object",function(){return this.collection}),t.add("noConflict",function(){return _$}),t.add("assert",function(e,t,n){return _.isSet(e)||_.error(_.isSet(t)?t:"Param needed",n),this}),t.add("isArray",function(e){return"[object Array]"===_.objectAsString(e)}),t.add("isObject",function(e){return"[object Object]"===_.objectAsString(e)||"object"==typeof e&&"[object Null]"!==_.objectAsString(e)}),t.add("isGlobal",function(e){return"[object global]"===_.objectAsString(e)||"[object Window]"===_.objectAsString(e)||"[object HTMLDocument]"===_.objectAsString(e)||"[object Document]"===_.objectAsString(e)}),t.add("is$",function(e){return e instanceof n}),t.add("isFormData",function(e){return"[object FormData]"===_.objectAsString(e)}),t.add("isString",function(e){return"[object String]"===_.objectAsString(e)}),t.add("isFunction",function(e){return"[object Function]"===_.objectAsString(e)}),t.add("isHtml",function(e){return/(<([^>]+)>)/gi.test(e)}),t.add("isBoolean",function(e){return"[object Boolean]"===this.objectAsString(e)}),t.add("isRegExp",function(e){return"[object RegExp]"===this.objectAsString(e)}),t.add("isSet",function(e){return"undefined"!=typeof e&&null!==e&&!!e}),t.add("isEmpty",function(e){return _.is$(e)?!0:_.isObject(e)?0==_.getObjectSize(e):_.isArray(e)?0===e.length:!e||e===_.emptyStr||/^\s+$/.test(e)}),t.add("isUrl",function(e){return a.test(e)}),t.add("isMail",function(e){return s.test(e)}),t.add("isJson",function(e){try{JSON.parse(e)}catch(t){return!1}return!0}),t.add("isNumber",function(e){return!isNaN(e)}),t.add("warning",function(e,t){console.log(e+(t?" | Method: "+t:_.emptyStr))}),t.add("error",function(e,t){throw e+(t?" | Method: "+t:_.emptyStr)}),t.add("htmlEntities",function(e){var t={"<":"&lt",">":"&gt;",'"':"&quot;","'":"&#39;","&":"&amp;"};return _.replace(e,/<|>|&|"|'/g,t)}),t.add("truncateString",function(e,t){return _.toObject(e).slice(0,t)}),t.add("replace",function(e,t,n){return _.isRegExp(t)&&_.isObject(n)?e.replace(t,function(e){return e in n?n[e]:e}):e.replace(t,n)}),t.add("getDate",function(e){var t,n=new Date,i=["January","February","March","April","May","June","July","August","September","October","November","December"],r=n.getMinutes(),o=n.getHours(),a=n.getSeconds(),s=n.getDate();return n=_.isSet(e)?new Date(e):n,"Invalid Date"===n&&_.error(n),s=10>s?"0"+s:s,t=o>12?"PM":"AM",o=o>12?o-12===0?12:o-12:10>o?"0"+o:o,r=10>r?"0"+r:r,a=10>a?"0"+a:a,{day:s,month:i[n.getMonth()],year:n.getFullYear(),hour:o,minutes:r,seconds:a,meridian:t}}),t.add("getNav",function(){var t=/(?:trident\/(?=\w.+rv:)|(?:chrome\/|firefox\/|opera\/|msie\s|safari\/))[\w.]{1,4}/,n=_.nav.local.match(t),i=_.isSet(n)?n[0].split("/"):!1;return i?{nav:i[0]?_.replace(i[0],"trident","msie"):!1,version:i[1]?i[1]:!1,platform:e.navigator.platform.toLocaleLowerCase()}:!1}),t.add("getEncodedId",function(e){for(var t=_.emptyStr,n=e?e:5,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789=_",r=0;n>r;r++)t+=i.charAt(Math.floor(Math.random()*i.length));return t}),t.add("getObjectKeys",function(e){return _.isObject(e)?Object.keys(e):[]}),t.add("getObjectSize",function(e){return _.isObject(e)?_.getObjectKeys(e).length:0}),t.add("getObjectValues",function(e){return _.isObject(e)?_.getObjectKeys(e).map(function(t){return e[t]}):[]}),t.add("objectAsString",function(e){return r.toString.call(e)}),t.add("objectImmutable",function(e){return _.isObject(e)?Object.freeze(e):e}),t.add("objectWatch",function(e,t,n){return _.isObject(e)&&_.isSet(t)&&Object.observe(e,t,n?n:[]),e}),t.add("interval",function(e,t){var n=new Workers;return n.intercept({message:function(t){_.callbackAudit(e,t.data)}}).run("/workers/setting/Interval").then(function(e){e.toWork(t)}),n}),t.add("requestAnimationFrame",function(t){return(e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)})(t)}),t.add("getCookie",function(e){var t=document.cookie,n=null;if(t&&t!==_.emptyStr){var i=t.split(";");_.each(i,function(t){t=t.split("=");var i=t[0].trim(),r=t[1].trim();return i===e?(n=r,!1):void 0})}return n}),t.add("getRegExpGroup",function(e,t,n){if(_.isString(e)&&_.isRegExp(t)){var i=t.exec(e);return i&&i.reduce(function(e,t,i){return i>0&&(e[n[i-1]]=t),e},{})||null}}),t.add("oChars",function(e,t){return _.isString(e)?e.split(t).length-1:0}),t.add("simplifyDirectory",function(e){return _.isString(e)?e.split("/").join("."):e}),t.add("dotDirectory",function(e){return _.isString(e)?e.split(".").join("/"):e}),t.add("jsonToQueryString",function(e){var t=_.emptyStr,n=_.isObject(e)?_.getObjectSize(e):0;return _.each(e,function(e,i){t+=encodeURI(i+"="+e),n>1&&(t+="&")}),t.lastIndexOf("&")>-1?t.slice(0,-1):t}),t.add("queryStringToJson",function(e){var t={};return _.isString(e)&&(e=_.replace(e,"?",_.emptyStr).split("&"),_.each(e,function(e){e=e.split("="),_.isEmpty(e[0])||(t[e[0]]=e[1]||_.emptyStr)})),t}),t.add("getScript",function(e,t){var n=document.createElement("script"),i=document.body,r=function(){_$(n).remove(),_.callbackAudit(t)};_.isSet(n.readyState)?n.addEventListener("readystatechange",function(){("loaded"==n.readyState||"complete"==n.readyState)&&r()},!1):n.addEventListener("load",r,!1),n.src=e,n.async=!0,i.appendChild(n)}),t.add("each",function(e,t){var n={first:!1,last:!1,"break":!1},i=0,r=null,o=e.length||_.getObjectSize(e);for(_.isObject(e)&&(r=_.getObjectKeys(e));i++<o&&(n.first=i-1==0,n.last=i==o,_.callbackAudit(t.bind(n),r&&e[r[i-1]]||e[i-1],r&&r[i-1]||i-1),!n["break"]););return this}),t.add("cartesianPlane",function(e){return e=!_.is$(e)&&_$(e).get(0)||e,_.isGlobal(e)?{top:e.pageYOffset,left:e.pageXOffset,width:e.outerWidth,height:e.outerHeight}:e.getBoundingClientRect()}),t.add("callbackAudit",function(e){try{if(!_.isSet(e)||!_.isFunction(e))return!1;e.apply(null,_.toArray(arguments).splice(1))}catch(t){_.error(t)}return!0}),t.add("compactArray",function(e){return _.filterArray(e,function(e){return e?e:!1})}),t.add("specArray",function(e){return _.isArray(e)||_.error(c.ERROR.NOARRAY,"(Syrup .specArray)"),e.length>1?e:0 in e?e[0]:null}),t.add("repeatString",function(e,t){return Array(t+1).join(e)}),t.add("filterArray",function(e,t){return e.filter(t)}),t.add("inObject",function(e,t){var n=!1;return _.each(t,function(t,i){if(_.isObject(t)){if(n=_.inObject(e,t))return!1}else if(t===e)return n=i,!1}),0===n?!0:n}),t.add("matchInArray",function(e,t){if(_.isArray(t)){var n=new RegExp(t.join("|"),"g");return n.test(e)}return!1}),t.add("replaceInArray",function(e,t,n){return this.matchInArray(n,[e])&&_.each(n,function(i,r){_.isString(i)&&(n[r]=_.replace(i,e,t))}),n}),t.add("uniqueArray",function(e){var t=[];return e.filter(function(e){return-1==t.indexOf(e)?(t.push(e),e):void 0})}),t.add("toArray",function(e){return _.isObject(e)?[].slice.apply(e):_.toObject(e)}),t.add("toString",function(e){return JSON.stringify(e)}),t.add("toRegExp",function(e,t){return _.isString(e)?new RegExp(e,t||"g"):void 0}),t.add("toObject",function(e,t){return _.isJson(e)?JSON.parse(e):_.isString(e)||_.isNumber(e)?r.valueOf.call(e):(_.isArray(e)||_.error(c.ERROR.NOARRAY,"(Syrup .toObject)"),e.reduce(function(e,n,i){return e[t&&n||i]=t&&t[i]||n,e},{}))}),t.add("objectDistribute",function(e,t){var n={};return _.isObject(e[t])?_.each(e[t],function(i,r){n[i]={},_.each(e,function(e,o){o!==t&&n[i][o].push(e[r])})}):n[e[t]]=e,n}),t.add("getElementIndex",function(e){e=_.is$(e)&&e.get(0)||e;for(var t=1,n=document.body.previousElementSibling?"previousElementSibling":"previousSibling";e=e[n];)++t;return t}),t.add("extend",function(e,t,n){return _.isObject(e)&&t?(_.isFunction(t)&&(t=new t,e=e.__proto__),_.each(t,function(t,i){(!e.hasOwnProperty(i)||_.isSet(n))&&(e[i]=t)}),e):e}),e._=function(){return new t}(),e._$=function(){return(new n).$}(),_.VERSION="1.1.6",_.$fn=n,_.emptyStr="",_.Syrup=t,_.WARNING_SYRUP=c,_.nav={},_.nav.unsupported=!(e.localStorage&&e.File&&e.FileReader&&e.FileList&&e.Blob&&e.Worker&&e.WebSocket),_.nav.cookies=e.navigator.cookieEnabled,_.nav.javascript=e.navigator.javaEnabled(),_.nav.online=e.navigator.onLine,_.nav.local=e.navigator.userAgent.toLowerCase()}(window),function(e){function t(){this.breadcrumb={},this.object=null,this.name=null}t.add("blend",function(e,t){return e in this.breadcrumb||(this.name=e,this.object=Function.factory(e),this._dependencies(t),_.Syrup.blend(new this.object),this.breadcrumb[e]=_[e]),this}),t.add("get",function(e){return e in this.breadcrumb&&this.breadcrumb[e]}),t.add("_dependencies",function(t){var n=this;_.isArray(t)&&_.isSet(n.object)&&_.each(t,function(t){n.object.prototype[t]=t in n.object?n.object.prototype[t]:_[t]||_.isFunction(e[t])&&new e[t]||_.isFunction(e[t+"Class"])&&new e[t+"Class"]})}),t.add("make",function(e){var t=this;return _.each(e,function(e,n){_.isFunction(e)||_.isObject(e)||(_[t.name][n]=e)}),this}),t.add("provider",function(e,t){return _.isFunction(t)&&(_[this.name][e]=t.call(_[this.name],_[this.name])),this}),t.add("supply",function(e){var t=this;return _.each(e,function(e,n){_.isFunction(e)&&t.cook(n,e)}),this}),t.add("cook",function(e,t){return _.isFunction(t)&&(this.object.prototype[e]=t),this}),e.Lib=new t,e.LibClass=t}(window),function(e){"use strict";function t(){}t.add("intercept",function(e,t){return new Promise(function(n,i){"interceptors"in e||(e.interceptors={}),_.isObject(t)&&(_.each(t,function(t,n){n in e.interceptors||(e.interceptors[n]=[]),_.isFunction(t)&&e.interceptors[n].push(t)}),n(e))})}),t.add("extend",function(e,t,n){"interceptors"in e[t]||(e[t].interceptors={}),_.each(n,function(n){n!==t&&n in e&&"interceptors"in e[n]&&_.each(e[n].interceptors,function(n,i){i in e[t].interceptors||(e[t].interceptors[i]=[]),e[t].interceptors[i]=_.extend(e[t].interceptors[i],n)})})}),t.add("getInterceptors",function(e,t){return e&&"interceptors"in e&&t in e.interceptors&&_.isArray(e.interceptors[t])&&e.interceptors[t].length>0?e.interceptors[t]:[]}),t.add("cleanInterceptor",function(e,t){e&&"interceptors"in e&&t in e.interceptors&&delete e.interceptors[t]}),t.add("trigger",function(e,t){_.isArray(e)&&e.length>0&&_.each(e,function(e){_.isFunction(e)&&e.apply(null,t||[])})}),e.MiddleWare=new t,e.MiddleWareClass=t}(window),function(e){"use strict";function t(){l(m),m=d(u)}function n(e,t){var n=Object.getNotifier(e),i=S.get(n),r=S.get(n)[t];i[t]="undefined"==typeof r?1:r+1}function i(e,t){var n=Object.getNotifier(e),i=S.get(n),r=S.get(n)[t];i[t]=r>0?r-1:0}function r(e,t,n){var i=!1;if(t)for(var r=0,o=t.length;o>r;r++){var a=t[r];if(e[a]>0)return!1;a===n&&(i=!0)}return i}function o(e){if(!y.has(e)){var t=Object.create(v);Object.defineProperty(t,"__target",{value:e}),w.set(t,[]),S.set(t,{}),y.set(e,t)}return y.get(e)}function a(e,n){for(var i=Object.getNotifier(e),o=n.type,a=S.get(i),s=w.get(i),c=0,u=s.length;u>c;c++){var d=s[c],l=d.accept;if(r(a,l,o)){var p=d.callback,h=[];O.has(p)?h=O.get(p):O.set(p,h),h.push(n)}}t()}function s(e){if(!j.get(e)&&!O.has(e)){j["delete"](e);var t=b.indexOf(e);-1!==t&&b.splice(t,1)}}function c(e){var t=O.get(e);if(O["delete"](e),!t||0===t.length)return!1;try{e.call(void 0,t)}catch(n){}return s(e),!0}function u(){for(var e=b.slice(),t=!1,n=0,i=e.length;i>n;n++){var r=e[n];c(r)&&(t=!0)}return t}if("function"!=typeof Object.observe){var d=e.setImmediate||e.msSetImmediate,l=e.clearImmediate||e.msClearImmediate;d||(d=function(e,t){return setTimeout(e,0,t)},l=function(e){clearTimeout(e)});var p;if("undefined"!=typeof WeakMap)p=WeakMap;else{var h="__weakmap:"+(1e9*Math.random()>>>0),f=(new Date).getTime()%1e9,_={};p=function(){this.name=h+(1e9*Math.random()>>>0)+(f++ +"__")},p.prototype={has:function(e){return e&&e.hasOwnProperty(this.name)},get:function(e){var t=e&&e[this.name];return t===_?void 0:t},set:function(e,t){Object.defineProperty(e,this.name,{value:"undefined"==typeof t?_:t,enumerable:!1,writable:!0,configurable:!0})},"delete":function(e){return delete e[this.name]}};var g=Object.getOwnPropertyNames;Object.defineProperty(Object,"getOwnPropertyNames",{value:function(e){return g(e).filter(function(e){return e.substr(0,h.length)!==h})},writable:!0,enumerable:!1,configurable:!0})}var m,b=[],v=Object.create(Object.prototype);Object.defineProperty(v,"notify",{value:function(e){var t=this;if(Object(t)!==t)throw new TypeError("this must be an Object, given "+t);if(t.__target){if(Object(e)!==e)throw new TypeError("changeRecord must be an Object, given "+e);var n=e.type;if("string"!=typeof n)throw new TypeError("changeRecord.type must be a string, given "+n);var i=w.get(t);if(i&&0!==i.length){var r=t.__target,o=Object.create(Object.prototype,{object:{value:r,writable:!1,enumerable:!0,configurable:!1}});for(var s in e)if("object"!==s){var c=e[s];Object.defineProperty(o,s,{value:c,writable:!1,enumerable:!0,configurable:!1})}Object.preventExtensions(o),a(t.__target,o)}}},writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(v,"performChange",{value:function(e,t){var r=this;if(Object(r)!==r)throw new TypeError("this must be an Object, given "+r);if(r.__target){if("string"!=typeof e)throw new TypeError("changeType must be a string given "+r);if("function"!=typeof t)throw new TypeError("changeFn must be a function, given "+t);n(r.__target,e);var o,s;try{s=t.call(void 0)}catch(c){o=c}if(i(r.__target,e),"undefined"!=typeof o)throw o;var u=w.get(r);if(0!==u.length){var d=r.__target,l=Object.create(Object.prototype,{object:{value:d,writable:!1,enumerable:!0,configurable:!1},type:{value:e,writable:!1,enumerable:!0,configurable:!1}});if("undefined"!=typeof s)for(var p in s)if("object"!==p&&"type"!==p){var h=s[p];Object.defineProperty(l,p,{value:h,writable:!1,enumerable:!0,configurable:!1})}Object.preventExtensions(l),a(r.__target,l)}}},writable:!0,enumerable:!1,configurable:!0});var y=new p,w=new p,S=new p,O=new p,j=new p;Object.defineProperties(Object,{observe:{value:function(e,t,n){if(Object(e)!==e)throw new TypeError("target must be an Object, given "+e);if("function"!=typeof t)throw new TypeError("observer must be a function, given "+t);if(Object.isFrozen(t))throw new TypeError("observer cannot be frozen");var i;if("undefined"==typeof n)i=["add","update","delete","reconfigure","setPrototype","preventExtensions"];else{if(Object(n)!==n)throw new TypeError("accept must be an object, given "+n);var r=n.length;if("number"!=typeof r||r>>>0!==r||1>r)throw new TypeError("the 'length' property of accept must be a positive integer, given "+r);var a=0;for(i=[];r>a;){var s=n[a];if("string"!=typeof s)throw new TypeError("accept must contains only string, given"+s);i.push(s),a++}}for(var c=o(e),u=w.get(c),d=0,l=u.length;l>d;d++)if(u[d].callback===t)return u[d].accept=i,e;return u.push({callback:t,accept:i}),-1===b.indexOf(t)&&b.push(t),j.has(t)?j.set(t,j.get(t)+1):j.set(t,1),e},writable:!0,configurable:!0},unobserve:{value:function(e,t){if(Object(e)!==e)throw new TypeError("target must be an Object, given "+e);if("function"!=typeof t)throw new TypeError("observer must be a function, given "+t);for(var n=o(e),i=w.get(n),r=0,a=i.length;a>r;r++)if(i[r].callback===t){i.splice(r,1),j.set(t,j.get(t)-1),s(t);break}return e},writable:!0,configurable:!0},deliverChangeRecords:{value:function(e){if("function"!=typeof e)throw new TypeError("callback must be a function, given "+e);for(;c(e););},writable:!0,configurable:!0},getNotifier:{value:function(e){if(Object(e)!==e)throw new TypeError("target must be an Object, given "+e);return Object.isFrozen(e)?null:o(e)},writable:!0,configurable:!0}})}}("undefined"!=typeof global?global:this),function(window){"use strict";function Required(){var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,i){return t&&eachProp(t,function(t,r){(n||!hasProp(e,r))&&(!i||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[r]=t:(e[r]||(e[r]={}),mixin(e[r],t,n,i)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,i){var r=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return r.requireType=e,r.requireModules=i,n&&(r.originalError=n),r}function newContext(e){function t(e){var t,n;for(t=0;t<e.length;t++)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,i){var r,o,a,s,c,u,d,l,p,h,f,_,g=n&&n.split("/"),m=O.map,b=m&&m["*"];if(e&&(e=e.split("/"),d=e.length-1,O.nodeIdCompat&&jsSuffixRegExp.test(e[d])&&(e[d]=e[d].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&g&&(_=g.slice(0,g.length-1),e=_.concat(e)),t(e),e=e.join("/")),i&&m&&(g||b)){a=e.split("/");e:for(s=a.length;s>0;s-=1){if(u=a.slice(0,s).join("/"),g)for(c=g.length;c>0;c-=1)if(o=getOwn(m,g.slice(0,c).join("/")),o&&(o=getOwn(o,u))){l=o,p=s;break e}!h&&b&&getOwn(b,u)&&(h=getOwn(b,u),f=s)}!l&&h&&(l=h,p=f),l&&(a.splice(0,p,l),e=a.join("/"))}return r=getOwn(O.pkgs,e),r?r:e}function i(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===y.contextName?(t.parentNode.removeChild(t),!0):void 0})}function r(e){var t=getOwn(O.paths,e);return t&&isArray(t)&&t.length>1?(t.shift(),y.require.undef(e),y.makeRequire(null,{skipMap:!0})([e]),!0):void 0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e,t,i,r){var a,s,c,u,d=null,l=t?t.name:null,p=e,h=!0,f="";return e||(h=!1,e="_@r"+(k+=1)),u=o(e),d=u[0],e=u[1],d&&(d=n(d,l,r),s=getOwn(A,d)),e&&(d?f=s&&s.normalize?s.normalize(e,function(e){return n(e,l,r)}):-1===e.indexOf("!")?n(e,l,r):e:(f=n(e,l,r),u=o(f),d=u[0],f=u[1],i=!0,a=y.nameToUrl(f))),c=!d||s||i?"":"_unnormalized"+(q+=1),{prefix:d,name:f,parentMap:t,unnormalized:!!c,url:a,originalName:p,isDefine:h,id:(d?d+"!"+f:f)+c}}function s(e){var t=e.id,n=getOwn(j,t);return n||(n=j[t]=new y.Module(e)),n}function c(e,t,n){var i=e.id,r=getOwn(j,i);!hasProp(A,i)||r&&!r.defineEmitComplete?(r=s(e),r.error&&"error"===t?n(r.error):r.on(t,n)):"defined"===t&&n(A[i])}function u(e,t){var n=e.requireModules,i=!1;t?t(e):(each(n,function(t){var n=getOwn(j,t);n&&(n.error=e,n.events.error&&(i=!0,n.emit("error",e)))}),i||req.onError(e))}function d(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(y.defQueueMap[t]=!0),x.push(e)}),globalDefQueue=[])}function l(e){delete j[e],delete F[e]}function p(e,t,n){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,each(e.depMaps,function(i,r){var o=i.id,a=getOwn(j,o);!a||e.depMatched[r]||n[o]||(getOwn(t,o)?(e.defineDep(r,A[o]),e.check()):p(a,t,n))}),n[i]=!0)}function h(){var e,t,n=1e3*O.waitSeconds,o=n&&y.startTime+n<(new Date).getTime(),a=[],s=[],c=!1,d=!0;if(!b){if(b=!0,eachProp(F,function(e){var n=e.map,u=n.id;if(e.enabled&&(n.isDefine||s.push(e),!e.error))if(!e.inited&&o)r(u)?(t=!0,c=!0):(a.push(u),i(u));else if(!e.inited&&e.fetched&&n.isDefine&&(c=!0,!n.prefix))return d=!1}),o&&a.length)return e=makeError("timeout","Load timeout for modules: "+a,null,a),e.contextName=y.contextName,u(e);d&&each(s,function(e){p(e,{},{})}),o&&!t||!c||!isBrowser&&!isWebWorker||S||(S=setTimeout(function(){S=0,h()},50)),b=!1}}function f(e){hasProp(A,e[0])||s(a(e[0],null,!0)).init(e[1],e[2])}function _(e,t,n,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,t):e.removeEventListener(n,t,!1)}function g(e){var t=e.currentTarget||e.srcElement;return _(t,y.onScriptLoad,"load","onreadystatechange"),_(t,y.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function m(){var e;for(d();x.length;){if(e=x.shift(),null===e[0])return u(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));f(e)}y.defQueueMap={}}var b,v,y,w,S,O={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},j={},F={},E={},x=[],A={},R={},C={},k=1,q=1;return w={require:function(e){return e.require?e.require:e.require=y.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?A[e.map.id]=e.exports:e.exports=A[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(O.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},v=function(e){this.events=getOwn(E,e.id)||{},this.map=e,this.shim=getOwn(O.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},v.prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){
this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,y.startTime=(new Date).getTime();var e=this.map;return this.shim?void y.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;R[e]||(R[e]=!0,y.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,i=this.depExports,r=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{r=y.execCb(n,o,i,r)}catch(a){e=a}else r=y.execCb(n,o,i,r);if(this.map.isDefine&&void 0===r&&(t=this.module,t?r=t.exports:this.usingExports&&(r=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",u(this.error=e)}else r=o;this.exports=r,this.map.isDefine&&!this.ignore&&(A[n]=r,req.onResourceLoad&&req.onResourceLoad(y,this.map,this.depMaps)),l(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(y.defQueueMap,n)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,i=a(e.prefix);this.depMaps.push(i),c(i,"defined",bind(this,function(i){var r,o,d,p=getOwn(C,this.map.id),h=this.map.name,f=this.map.parentMap?this.map.parentMap.name:null,_=y.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(h=i.normalize(h,function(e){return n(e,f,!0)})||""),o=a(e.prefix+"!"+h,this.map.parentMap),c(o,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),d=getOwn(j,o.id),void(d&&(this.depMaps.push(o),this.events.error&&d.on("error",bind(this,function(e){this.emit("error",e)})),d.enable()))):p?(this.map.url=y.nameToUrl(p),void this.load()):(r=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),r.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(j,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&l(e.map.id)}),u(e)}),r.fromText=bind(this,function(n,i){var o=e.name,c=a(o),d=useInteractive;i&&(n=i),d&&(useInteractive=!1),s(c),hasProp(O.config,t)&&(O.config[o]=O.config[t]);try{req.exec(n)}catch(l){return u(makeError("fromtexteval","fromText eval for "+t+" failed: "+l,l,[t]))}d&&(useInteractive=!0),this.depMaps.push(c),y.completeLoad(o),_([o],r)}),void i.load(e.name,_,r,O))})),y.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){F[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,i,r;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,r=getOwn(w,e.id))return void(this.depExports[t]=r(this));this.depCount+=1,c(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?c(e,"error",bind(this,this.errback)):this.events.error&&c(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,i=j[n],hasProp(w,n)||!i||i.enabled||y.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(j,e.id);t&&!t.enabled&&y.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},y={config:O,contextName:e,registry:j,defined:A,urlFetched:R,defQueue:x,defQueueMap:{},Module:v,makeModuleMap:a,nextTick:req.nextTick,onError:u,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=O.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(O[t]||(O[t]={}),mixin(O[t],e,!0,!0)):O[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(C[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=y.makeShimExports(e)),t[n]=e}),O.shim=t),e.packages&&each(e.packages,function(e){var t,n;e="string"==typeof e?{name:e}:e,n=e.name,t=e.location,t&&(O.paths[n]=e.location),O.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(j,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t,null,!0))}),(e.deps||e.callback)&&y.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,r){function o(n,i,c){var d,l,p;return r.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof n?isFunction(i)?u(makeError("requireargs","Invalid require call"),c):t&&hasProp(w,n)?w[n](j[t.id]):req.get?req.get(y,n,t,o):(l=a(n,t,!1,!0),d=l.id,hasProp(A,d)?A[d]:u(makeError("notloaded",'Module name "'+d+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(m(),y.nextTick(function(){m(),p=s(a(null,t)),p.skipMap=r.skipMap,p.init(n,i,c,{enabled:!0}),h()}),o)}return r=r||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var i,r=e.lastIndexOf("."),o=e.split("/")[0],a="."===o||".."===o;return-1!==r&&(!a||r>1)&&(i=e.substring(r,e.length),e=e.substring(0,r)),y.nameToUrl(n(e,t&&t.id,!0),i,!0)},defined:function(e){return hasProp(A,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(A,e)||hasProp(j,e)}}),t||(o.undef=function(e){d();var n=a(e,t,!0),r=getOwn(j,e);r.undefed=!0,i(e),delete A[e],delete R[n.url],delete E[e],eachReverse(x,function(t,n){t[0]===e&&x.splice(n,1)}),delete y.defQueueMap[e],r&&(r.events.defined&&(E[e]=r.events),l(e))}),o},enable:function(e){var t=getOwn(j,e.id);t&&s(e).enable()},completeLoad:function(e){var t,n,i,o=getOwn(O.shim,e)||{},a=o.exports;for(d();x.length;){if(n=x.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);f(n)}if(y.defQueueMap={},i=getOwn(j,e),!t&&!hasProp(A,e)&&i&&!i.inited){if(!(!O.enforceDefine||a&&getGlobal(a)))return r(e)?void 0:u(makeError("nodefine","No define call for "+e,null,[e]));f([e,o.deps||[],o.exportsFn])}h()},nameToUrl:function(e,t,n){var i,r,o,a,s,c,u,d=getOwn(O.pkgs,e);if(d&&(e=d),u=getOwn(C,e))return y.nameToUrl(u,t,n);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(i=O.paths,r=e.split("/"),o=r.length;o>0;o-=1)if(a=r.slice(0,o).join("/"),c=getOwn(i,a)){isArray(c)&&(c=c[0]),r.splice(0,o,c);break}s=r.join("/"),s+=t||(/^data\:|\?/.test(s)||n?"":".js"),s=("/"===s.charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":O.baseUrl)+s}return O.urlArgs?s+((-1===s.indexOf("?")?"?":"&")+O.urlArgs):s},load:function(e,t){req.load(y,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=g(e);y.completeLoad(t.id)}},onScriptError:function(e){var t=g(e);return r(t.id)?void 0:u(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},y.require=y.makeRequire(),y}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.20",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,i){var r,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=i):e=[]),o&&o.context&&(a=o.context),r=getOwn(contexts,a),r||(r=contexts[a]=req.s.newContext(a)),o&&r.configure(o),r.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var i=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return i.type=e.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i},req.load=function(e,t,n){var i,r=e&&e.config||{};if(isBrowser)return i=req.createNode(r,t,n),r.onNodeCreated&&r.onNodeCreated(i,r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(o){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,o,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,n){var i,r;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript(),i&&(e||(e=i.getAttribute("data-requiremodule")),r=contexts[i.getAttribute("data-requirecontext")])),r?(r.defQueue.push([e,t,n]),r.defQueueMap[e]=!0):globalDefQueue.push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(window),this.require=require,this.define=define,this.dependencies=[]}Required.add("setConf",function(e){this.require.config(_.extend({baseUrl:setting.app_path,paths:{system:setting.system_path}},e||{},!0))}),Required.add("getRequire",function(){return this.require}),Required.add("getDefine",function(){return this.define}),Required.add("lookup",function(e){var t=this;return t.dependencies=e,new Promise(function(n,i){t.require(t,e,function(){n(t)})})}),Required.add("getDependencies",function(){return this.dependencies}),Required.add("getCleanDependencies",function(){var e=this.dependencies;return _.each(e,function(t,n){e[n]=_.replace(t.split("/").pop(),/\.(.*)/,_.emptyStr)}),e}),window.Require=new Required,window.RequireClass=Required,Require.setConf()}(window),function(e){function t(){this.upload=null,this.config={},this.interceptors={"default":{}}}t.add("request",function(t,n,i){var r=this,o=_.emptyStr,a=n||null,s=new e.XMLHttpRequest||new e.ActiveXObject("Microsoft.XMLHTTP");return r.config=_.extend({method:"GET",timeout:4e3,upload:!1,cors:!1,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}},r.config,!0),r._handleInterceptor("request",r.config,i),s.method=r.config.method,new Promise(function(e,n){_.isSet(t)||_.error(_.WARNING_SYRUP.ERROR.NOURL,"(Http .request)"),!_.isFormData(a)&&_.isObject(a)&&_.getObjectSize(a)>0&&(a=_.jsonToQueryString(a)),"GET"===r.config.method&&_.isString(a)&&(o+="?"+a),o=t+o,s.open(r.config.method,o,!0),s.timeout=r.config.timeout,_.each(r.config.headers,function(e,t){s.setRequestHeader(t,e)}),s.withCredentials=!!r.config.cors,_.isSet(r.config.upload)&&_.isBoolean(r.config.upload)&&(r.upload=s.upload,s=r.upload),s.addEventListener("load",function(t){200!=this.status&&0!=this.status||4!=this.readyState||(this.responseClean=r._response(this),r._handleInterceptor("success",s,i),e(this.responseClean))}),s.addEventListener("progress",function(e){r._handleInterceptor("progress",e,i)}),s.addEventListener("readystatechange",function(e){this.readyState&&r._handleInterceptor("state",s,i)}),s.addEventListener("abort",function(e){r._handleInterceptor("abort",s,i)}),s.addEventListener("loadend",function(e){this.responseClean=r._response(this),r._handleInterceptor("complete",s,i)}),s.addEventListener("loadstart",function(e){r._handleInterceptor("before",s,i)}),s.addEventListener("error",function(e){r._handleInterceptor("error",s,i),n(e)}),s.send("GET"!==r.config.method?a:null)})}),t.add("intercept",function(e,t,n){var i=this;return n=_.isArray(t)&&t||_.isArray(n)&&n||null,t=_.isObject(e)&&e||_.isObject(t)&&t||{},e=!_.isObject(e)&&_.isString(e)&&e||"default",e in i.interceptors||(i.interceptors[e]={}),n&&MiddleWare.extend(i.interceptors,e,n),_.isObject(t)&&MiddleWare.intercept(i.interceptors[e],t),this}),t.add("interceptClean",function(e,t){return e=e||"default",t?MiddleWare.cleanInterceptor(this.interceptors[e],t):e in this.interceptors&&delete this.interceptors[e],this}),t.add("_handleInterceptor",function(e,t,n){n in this.interceptors&&MiddleWare.trigger(MiddleWare.getInterceptors(this.interceptors[n],e),[t,this])}),t.add("get",function(e,t,n){return this._rest(e,"GET",t,n)}),t.add("post",function(e,t,n){return this._rest(e,"POST",t,n)}),t.add("put",function(e,t,n){return this._rest(e,"PUT",t,n)}),t.add("delete",function(e,t,n){return this._rest(e,"DELETE",t,n)}),t.add("_rest",function(e,t,n,i){return this.config.method=t,this.request(e,_.isObject(n)&&n||{},_.isString(n)&&n||i||"default")}),t.add("_response",function(e){var t=e.response||e.responseText||e.responseXML;return _.isJson(t)&&_.toObject(t)||t}),e.Http=t}(window),function(e){function t(){}t.add("set",function(e,t){return localStorage.setItem(e,JSON.stringify(t)),this}),t.add("get",function(e){return _.isJson(localStorage.getItem(e))?JSON.parse(localStorage.getItem(e)):null}),t.add("append",function(e,t){var n=this.get(e),i=_.extend(_.isSet(n)?n:{},t);return this.set(e,i,!1),this}),t.add("destroy",function(){localStorage.clear()}),t.add("clear",function(e){return localStorage.removeItem(e),this}),t.add("count",function(){return localStorage.length}),e.Repo=t}(window),function(e){function t(){this.Worker=null,this.interceptors={}}t.add("run",function(e){var t=this;return new Promise(function(n,i){t.Worker=new Worker(setting.system_path+e+".js"),t.Worker.addEventListener("message",function(e){t._handleInterceptor("message",e)},!1),n(t)})}),t.add("get",function(){return this.Worker}),t.add("intercept",function(e){return _.isObject(e)&&MiddleWare.intercept(this,e),this}),t.add("interceptClean",function(e){return MiddleWare.cleanInterceptor(this,e),this}),t.add("_handleInterceptor",function(e,t){MiddleWare.trigger(MiddleWare.getInterceptors(this,e),[t,this])}),t.add("toWork",function(e){return this.Worker.postMessage(e||null),this}),t.add("kill",function(){return _.isSet(this.Worker)&&(this.Worker.terminate(),this.Worker=null),this}),e.Workers=t}(window),function(e){"use strict";function t(){this.Repo=new Repo,this.key="___templates",this.tpl=null}t.add("lookup",function(e){var t=new Http;return t.intercept({request:function(e){e.headers["Content-Type"]="text/plain"}}),t.request(setting.app_path+"/templates/"+e)}),t.add("seekTpl",function(e){var t=this,n=t.Repo,i=null,r={};return _.isSet(n.get(t.key))||n.set(t.key,{}),i=n.get(t.key),new Promise(function(o,a){e in i?(t.tpl=i[e],o(t)):t.lookup(e).then(function(i){t.tpl=r[e]=i,n.append(t.key,r),o(t)})["catch"](function(){a(e),_.error(_.WARNING_SYRUP.ERROR.NONETWORK,"(View .seekTpl)")})})}),t.add("getTpl",function(){return this.tpl}),t.add("clear",function(){return this.Repo.clear(this.key),this}),t.add("cleanCache",function(e){var t=this.Repo.get(this.key);return t&&e in t&&delete t[e],this.Repo.set(this.key,t),this}),t.add("render",function(e,t){var n=this,i=new Workers;return new Promise(function(r){t=_.isObject(e)&&e||t,e=!_.isObject(e)&&_.isString(e)&&e||n.tpl,i.intercept({message:function(e){r(e.data)}}).run("/workers/setting/Parser.min").then(function(n){n.toWork({template:e||_.emptyStr,fields:t||{}})})})}),e.View=t}(window),function(e){function t(){this.data=null,this.blob=null,this.scope={},this.model=null,this.failed=null}var n={ERROR:{NOPACK:"Error packing model",OBJECTNEEDED:"Object need to set in model"}};t.add("attach",function(e,t){var i=this;return _.assert(i.data,n.ERROR.NOPACK,"(Model .attach)"),i.data.append(e,t),this}),t.add("multiple",function(e){var t=[],n=this,i=this.model.get(0);return e in i.elements&&_.each(i.elements[e],function(e,i){e&&e.value&&(n._check(e)?e.checked&&t.push(e.value):t.push(e.value))}),t.length>0?t:!1}),t.add("fail",function(e,t){return this.failed=!0,{field:e,code:t.code,error:t.error,coords:_.cartesianPlane(e)}}),t.add("_check",function(e){return"checkbox"===e.type||"radio"===e.type}),t.add("getScope",function(){return this.scope}),t.add("getData",function(){return this.data}),t.add("getBinaries",function(){return this.blob}),t.add("file",function(e){var t=this,n=new FormData,i=[],r=!_.is$(e)&&_$(e).get(0)||e;if(r.exist)return new Promise(function(e,o){if("file"===r.type&&_.isSet(r.name))for(var a=r.files,s=a.length;s--;)i[s]=a[s],n.append(r.name,a[s]);t.scope._files=i,t.blob=n,e(t)})}),t.add("binary",function(e){var t=this;return t.model=!_.is$(e)&&_$(e)||e,t.model.exist?new Promise(function(e,n){t.model.find('input[type="file"]',function(n){t.file(n).then(e)})}):void 0}),t.add("set",function(e,t){_.isObject(t)||_.error(n.ERROR.OBJECTNEEDED,"(Model .set)");var i=this;i.model=!_.is$(e)&&_$(e)||e,i.model.exist&&i.model.find("input, select, textarea",function(e){var n=e.attr("name"),r=null,o=_.emptyStr;n&&n in t&&(i.scope[n]=t[n],"select"===e.name?_.isArray(i.scope[n])&&(_.each(i.scope[n],function(e){r=_$("<option/>"),r.text("content"in e&&e.content||_.emptyStr),r.val("value"in e&&e.value||_.emptyStr),o+=r.object().outerHTML}),e.html(o)):e.val(i.scope[n]))})}),t.add("get",function(e){if(this.model=!_.is$(e)&&_$(e)||e,this.model.exist){var t=this,n=new FormData,i=t.model.get(0),r=i.querySelectorAll("input, textarea, select"),o=r.length,a=null;return t.failed=!1,t.scope={},new Promise(function(e,i){for(;o--;)if(r[o])if("file"!==r[o].type){var s=r[o],c=s.value;if(!s.checkValidity())return a={valueMissing:"001",typeMismatch:"002",tooLong:"003",stepMismatch:"004",rangeUnderFlow:"005",rangeOverFlow:"006",patternMismatch:"007"},void _.each(a,function(e,n){s.validity[n]&&(this["break"]=!0,i(t.fail(s,{code:e,error:s.validationMessage})))});if(_.isSet(s.name)){if(t._check(s)&&!s.checked)continue;n.append(s.name,c),t.scope[s.name]=c}}else t.file(r[o]);t.data=n,e(t)})}}),e.Model=t}(window),function(e){function t(){this.root=null,this.lib=null,this.scope=null,this.lazy=!1,this.interceptors={},this.moduleCollection={},this.appCollection={},this.recipeCollection={},this.onchange={}}t.add("module",function(e,n){return e in this.moduleCollection||(this.moduleCollection[e]=new t,this.moduleCollection[e].root=e,this.moduleCollection[e].moduled=!0,this.moduleCollection[e].lib=new LibClass,this.moduleCollection[e].lib.blend(e,n),this.moduleCollection[e].lib.provider("$",function(){return _$})),this.moduleCollection[e]}),t.add("blend",function(e,n){var i=new t;return i.lib=new LibClass,i.root=e,i.parent=this.moduled&&this||null,i.lazy=this.lazy,i.scope={},i.blended=!0,this.moduled&&(n=n||[],n.push(this.root),this.appCollection[e]=i),i.lib.blend(e,n),i.lib.provider(e,function(){return i.$=_$,i}),i}),t.add("recipe",function(e,t){if(this.root&&this.blended&&_.isSet(t)){var n=this;n.recipeCollection[e]={creator:t,instance:null},this.lazy||_$(function(){n._taste(e)})}return this}),t.add("_watch",function(e){var t=this;Object.observe(t.scope,function(n){_.each(n,function(n,i){n.name in t.onchange&&_.getObjectSize(n.object)>0&&e===n.name&&(this["break"]=!0,t.onchange[n.name].call(t.recipeCollection[e].instance,{name:n.name,old:n.oldValue,type:n.type,object:n.object[n.name]}))})})}),t.add("_add",function(e){_.isObject(this.scope[e])||(this.scope[e]={})}),t.add("_trigger",function(e){return e in this.recipeCollection?this.recipeCollection[e].creator(_,this.scope):void 0}),t.add("cook",function(e){return _.isFunction(e)&&e.call(this,this.lib.get(this.root),_),this}),t.add("spice",function(e){return _.isObject(e)&&this.lib.make(e),this}),t.add("provider",function(e,t){var n=this;return _.isObject(e)&&_.each(e,function(e,t){n.lib.provider(t,e)}),_.isString(e)&&_.isFunction(t)&&n.lib.provider(e,t),n}),t.add("service",function(e,t){return _.isObject(e)&&this.lib.supply(e),_.isString(e)&&_.isFunction(t)&&this.lib.cook(e,t),this}),t.add("getRecipe",function(e){return e in this.recipeCollection&&_.isSet(this.root)?this.recipeCollection[e].instance:null}),t.add("setScope",function(e,t){return e in this.scope&&(this.scope[e]=t),this}),t.add("getScope",function(e){return e in this.scope?this.scope[e]:{}}),t.add("when",function(e,t){var n=this;return e&&({change:{then:function(e){n.onchange[t]=e}}}[e]||{then:function(){}})}),t.add("_bindListener",function(e){var t=["click","submit","change","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","keydown","keypress","keyup","blur","focus","input","select","reset"],n=this,i=this.recipeCollection[e].instance,r=_$('[sp-recipe="'+e+'"]');r.exist&&_.each(t,function(t){r.listen(t,function(t){var r="sp-"+t.type,o=null,a=t.target.getAttribute(r);a&&a in i&&_.isFunction(i[a])&&(/key/.test(t.type)||t.preventDefault(),o=_$(this),o.event=t,i[a].call(n.recipeCollection[e].instance,n.lib.get(i.parent.root),o))})})}),t.add("_models",function(e){var t=this,n=new Model;t.recipeCollection[e].instance.model={object:n,resource:function(t){return _$('[sp-recipe="'+e+'"] '+(t&&'[sp-model="'+t+'"]'||"[sp-model]"))},set:function(i,r){var o=_.is$(r)&&r||this.resource(r);return o.exist&&n.set(o,i),t.recipeCollection[e].instance},get:function(i,r){var o=_.is$(r)&&r||this.resource(r);return o.exist?{then:function(r){return n.get(o).then(function(n){if(_.isSet(i)&&_.isArray(i)&&!_.isEmpty(i)){var o={};_.each(i,function(e,t){e in n.scope&&(o[e]=n.scope[e])}),n.scope=o}r.call(t.recipeCollection[e].instance,n)})}}:{then:function(){}}}}}),t.add("_views",function(e){var t=this;t.recipeCollection[e].instance.view={object:new View,render:function(n,i){var r=t._serve(e,n||null,i||!1);return{then:function(n){return r.then(function(i){n.call(t.recipeCollection[e].instance,i)})}}}}}),t.add("_scopes",function(e){var t=this;t.recipeCollection[e].instance.scope={global:t.scope,object:t.scope[e],set:function(n,i){var r=!_.isObject(n)&&_.isString(n)&&n||e,o=_.isObject(n)&&n||i;return _.isObject(o)?(t.setScope(r,o),t.recipeCollection[e].instance):void 0},get:function(n){var i=_.isString(n)?n:e;return t.getScope(i)}}}),t.add("_app",function(t){var n=this;n.recipeCollection[t].instance.app={window:e,$:_$,object:_$("[sp-app]"),title:function(e){var i=_$("title");return i.exist&&i.text(e),n.recipeCollection[t].instance}}}),t.add("_recipes",function(e){var t=this;t.recipeCollection[e].instance.recipe={$:_$('[sp-recipe="'+e+'"]'),node:function(t){return _$('[sp-recipe="'+e+'"] [sp-node='+t+"]")},get:function(n){var i=_.isString(n)?n:e;return t.getRecipe(i)},drop:function(n,i){var r=_.isString(n)?n:e;return t.drop(r,i),t.recipeCollection[e].instance}}}),t.add("_serve",function(e,t,n){var i=null,r=this.scope[e],o=_$('[sp-recipe="'+e+'"] [sp-view]'),a=_$('[sp-recipe="'+e+'"] [sp-tpl]');return new Promise(function(e){if(o.exist)if(i=new View,_.isSet(t)&&_.isString(t)){var s=t.split("/").pop(),c=_.replace(t,"/"+s,_.emptyStr),u="layout/"+c+"/"+s;/\.html$/.test(s)?(n&&i.cleanCache(u),i.seekTpl(u).then(function(t){t.render(r).then(function(t){o.html(t),e(t)})})):Require.lookup(["view/"+c]).then(function(){s in i.__proto__&&i[s](_,r,function(t){o.html(t),e(t)})})}else a.exist&&i.render(a.html(),r).then(function(t){o.html(t),e(t)})})}),t.add("_taste",function(e){var t=this;if(t._handleInterceptor("taste",t),e in t.recipeCollection&&_.isSet(t.root)){if(t._add(e),t.recipeCollection[e].instance=t._trigger(e),!_.isObject(t.recipeCollection[e].instance))return;t.recipeCollection[e].instance.name=e,t.recipeCollection[e].instance.parent=t,t.recipeCollection[e].instance.when=function(n){return t.when(n,e)},t._recipes(e),t._scopes(e),t._models(e),t._app(e),t._views(e),"init"in t.recipeCollection[e].instance&&_.isFunction(t.recipeCollection[e].instance.init)&&(t._handleInterceptor("init",t.recipeCollection[e].instance),"require"in t.recipeCollection[e].instance&&_.isArray(t.recipeCollection[e].instance.require)?Require.lookup(t.recipeCollection[e].instance.require).then(function(n){t.lib._dependencies(n.getCleanDependencies()),t.recipeCollection[e].instance.init(t.lib.get(t.root))}):t.recipeCollection[e].instance.init(t.lib.get(t.root)),t._handleInterceptor("after",t.recipeCollection[e].instance)),t._bindListener(e),t._watch(e)}return this}),t.add("taste",function(e){var t=this,n=e&&[e]||_.getObjectKeys(t.recipeCollection);return t.lazy=!1,_.each(n,function(e){t._taste(e)}),MiddleWare.cleanInterceptor(t,"init"),this}),t.add("intercept",function(e){return _.isObject(e)&&MiddleWare.intercept(this,e),this}),t.add("interceptClean",function(e){return MiddleWare.cleanInterceptor(this,e),this}),t.add("_handleInterceptor",function(e,t){MiddleWare.trigger(MiddleWare.getInterceptors(this,e),[t,this])}),t.add("drop",function(e,t){return e in this.recipeCollection&&this.recipeCollection[e].instance&&("destroy"in this.recipeCollection[e].instance&&this.recipeCollection[e].instance.destroy(this.lib.get(this.root)),t||(this.recipeCollection[e]=null)),this}),t.add("dropAll",function(){var e=this;return _.each(this.recipeCollection,function(t,n){e.drop(n)}),this}),e.App=new t,e.AppClass=t}(window),function(e){function t(){this.routes={},this.history=e.history,this.cleanParam=/([\w]+:)/g,this.findParams=/([\w]+:[\w\[\]\-\+\(\)]+)/g,this.onpopstate={},this.interceptors={},this.breadcrumbs=[],this.module=null,this["default"]=!0;var t=this;e.addEventListener("popstate",function(e){_.isSet(e.state)&&"route_name"in e.state&&e.state.route_name in t.onpopstate&&_.each(t.onpopstate[e.state.route_name],function(n,i){n(e.state,e),t._handleInterceptor("redirect",e)},!0)})}var n={ERROR:{BADINSTANCE:"App instance needed"}};t.add("connect",function(e){return e instanceof AppClass||_.error(n.ERROR.BADINSTANCE,"(Router .route)"),this.module=e,e.lazy=!0,this}),t.add("set",function(e){var t=this;return new Promise(function(n,i){t.routes=_.extend(t.routes,e),n(t)})}),t.add("when",function(e,t){_.assert(e,_.WARNING_SYRUP.ERROR.NOPARAM,"(Router .when)");var n,i=this;return t&&"app"in t&&e in i.routes?(e in i.onpopstate||(i.onpopstate[e]=[]),i.onpopstate[e].push(function(n,r){i._handleSkull(t,function(){t.app in i.module.appCollection&&(i.module.appCollection[t.app].intercept({init:function(t){t.uri={params:n,breadcrumbs:i.breadcrumbs,route:i.routes[e]}}}),i.module.appCollection[t.app].taste())},[n,r])}),i["default"]&&(n=i._route(e))&&(i["default"]=!1,i.redirect(e,n.query,n)),i):i}),t.add("liveRedirect",function(e){return location.href=e,this}),t.add("redirect",function(e,t,n){_.assert(e,_.WARNING_SYRUP.ERROR.NOPARAM,"(Router .redirect)");var i=this,r=null,o=null,a=null,s={trigger:!0};return new Promise(function(c,u){return e in i.routes?(a=_.isObject(t)&&t||{},s=_.extend(s,n||{},!0),o=r=i.routes[e],o="uri"in s&&s.uri||i._rewriteRules(o,a)||o,a=_.getObjectSize(a)>0&&a||i._reverseUriParams(s.uri||o,r,"route"in s&&s.route)||{},i._triggerPopState(_.extend(a,{route_name:e}),e,o,s),void c(o)):void u(e)})}),t.add("otherwise",function(e,t){return _.isString(e)&&e in this.routes&&this["default"]&&(this.when(e,t),this.redirect(e,{})),this}),t.add("reverse",function(e,t){return e in this.routes?this._rewriteRules(this.routes[e],t||{})||this.routes[e]:_.emptyStr}),t.add("intercept",function(e){return _.isObject(e)&&MiddleWare.intercept(this,e),this}),t.add("interceptClean",function(e){return MiddleWare.cleanInterceptor(this,e),this}),t.add("_route",function(e){var t=this.routes[e],n=_.queryStringToJson(location.search),i=this._rewriteRules(t,n)||location.pathname,r=_.oChars(i,"/"),o=_.oChars(t,"/");return t=this._cleanedUriParams(t),r>o?i=_.truncateString(i,-1):o>r&&(i+="/"),this._matchUri(t,i)?{uri:i,route:t,query:n,match:!0}:!1}),t.add("_handleSkull",function(e,t,n){var i=new View;e.cache||i.cleanCache(e.tpl),i.seekTpl(e.tpl).then(function(i){var r=_$("[sp-app]");r.exist&&r.html(i.getTpl()),t.apply(e.app,n)})}),t.add("_handleInterceptor",function(e,t){MiddleWare.trigger(MiddleWare.getInterceptors(this,e),[t,this])}),t.add("_matchUri",function(e,t){return _.toRegExp("^"+e+"$").test(t)}),t.add("_cleanedUriParams",function(e){return _.replace(e,this.cleanParam,_.emptyStr)}),t.add("_reverseUriParams",function(e,t,n){var i=_.replaceInArray(":",_.emptyStr,t.match(this.cleanParam)),r=n||this._cleanedUriParams(t);return i&&_.toObject(i,_.compactArray(e.split(_.toRegExp(r))))||{}}),t.add("_rewriteRules",function(e,t){var n=this.findParams,i=_.getObjectSize(t)>0&&_.getRegExpGroup(e,n,_.getObjectKeys(t));return i&&_.replace(e,n,_.toObject(_.getObjectValues(i),_.getObjectValues(t)))||!1}),t.add("goBack",function(){this.breadcrumbs.pop();var e=this.breadcrumbs.pop();this._triggerPopState(e.params,e.route,e.new_route,{trigger:!0})}),t.add("_triggerPopState",function(e,t,n,i){i.trigger&&(this.breadcrumbs.push({params:e,route:t,new_route:n}),this.history.pushState(e,t,n),this.history.pushState(e,t,n),this.history.back())}),e.Router=t}(window),function(e){"use strict";function t(){this.interceptors={},this.onhashchange={};var t=this;e.addEventListener("hashchange",function(e){var n=t.cleanHash(location.hash),i=t.getParams(location.hash);t._handleInterceptor("change",i),n in t.onhashchange&&_.each(t.onhashchange[n],function(e){e.call(t,i)})})}t.add("reset",function(e){return location.hash=e||"#",this}),t.add("when",function(e){_.assert(e,_.WARNING_SYRUP.ERROR.NOPARAM,"(Router .when)");var t=this;return e in t.onhashchange||(t.onhashchange[e]=[]),{then:function(n){return t.onhashchange[e].push(n),t}}}),t.add("cleanHash",function(e){var t=_.replace(e,"#",_.emptyStr),n=t.split("/");return(n.length>1&&n||t.split("?"))[0]}),t.add("getParams",function(e){var t=e.split("/");return t=(t.length>1&&t||e.split("?")).splice(1),t.length>0&&_.queryStringToJson(t[0])||{}}),t.add("intercept",function(e){return _.isObject(e)&&MiddleWare.intercept(this,e),this;
}),t.add("interceptClean",function(e){return MiddleWare.cleanInterceptor(this,e),this}),t.add("_handleInterceptor",function(e,t){MiddleWare.trigger(MiddleWare.getInterceptors(this,e),[t,this])}),e.Hash=t}(window);