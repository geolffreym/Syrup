function Required(){var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,i){return t&&eachProp(t,function(t,r){(n||!hasProp(e,r))&&(!i||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[r]=t:(e[r]||(e[r]={}),mixin(e[r],t,n,i)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,i){var r=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return r.requireType=e,r.requireModules=i,n&&(r.originalError=n),r}function newContext(e){function t(e){var t,n;for(t=0;t<e.length;t++)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,i){var r,o,a,s,c,u,d,l,f,p,h,m,g=n&&n.split("/"),_=A.map,b=_&&_["*"];if(e&&(e=e.split("/"),d=e.length-1,A.nodeIdCompat&&jsSuffixRegExp.test(e[d])&&(e[d]=e[d].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&g&&(m=g.slice(0,g.length-1),e=m.concat(e)),t(e),e=e.join("/")),i&&_&&(g||b)){a=e.split("/");e:for(s=a.length;s>0;s-=1){if(u=a.slice(0,s).join("/"),g)for(c=g.length;c>0;c-=1)if(o=getOwn(_,g.slice(0,c).join("/")),o&&(o=getOwn(o,u))){l=o,f=s;break e}!p&&b&&getOwn(b,u)&&(p=getOwn(b,u),h=s)}!l&&p&&(l=p,f=h),l&&(a.splice(0,f,l),e=a.join("/"))}return r=getOwn(A.pkgs,e),r?r:e}function i(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===O.contextName?(t.parentNode.removeChild(t),!0):void 0})}function r(e){var t=getOwn(A.paths,e);return t&&isArray(t)&&t.length>1?(t.shift(),O.require.undef(e),O.makeRequire(null,{skipMap:!0})([e]),!0):void 0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e,t,i,r){var a,s,c,u,d=null,l=t?t.name:null,f=e,p=!0,h="";return e||(p=!1,e="_@r"+(k+=1)),u=o(e),d=u[0],e=u[1],d&&(d=n(d,l,r),s=getOwn(w,d)),e&&(d?h=s&&s.normalize?s.normalize(e,function(e){return n(e,l,r)}):-1===e.indexOf("!")?n(e,l,r):e:(h=n(e,l,r),u=o(h),d=u[0],h=u[1],i=!0,a=O.nameToUrl(h))),c=!d||s||i?"":"_unnormalized"+(M+=1),{prefix:d,name:h,parentMap:t,unnormalized:!!c,url:a,originalName:f,isDefine:p,id:(d?d+"!"+h:h)+c}}function s(e){var t=e.id,n=getOwn(E,t);return n||(n=E[t]=new O.Module(e)),n}function c(e,t,n){var i=e.id,r=getOwn(E,i);!hasProp(w,i)||r&&!r.defineEmitComplete?(r=s(e),r.error&&"error"===t?n(r.error):r.on(t,n)):"defined"===t&&n(w[i])}function u(e,t){var n=e.requireModules,i=!1;t?t(e):(each(n,function(t){var n=getOwn(E,t);n&&(n.error=e,n.events.error&&(i=!0,n.emit("error",e)))}),i||req.onError(e))}function d(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(O.defQueueMap[t]=!0),j.push(e)}),globalDefQueue=[])}function l(e){delete E[e],delete R[e]}function f(e,t,n){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,each(e.depMaps,function(i,r){var o=i.id,a=getOwn(E,o);!a||e.depMatched[r]||n[o]||(getOwn(t,o)?(e.defineDep(r,w[o]),e.check()):f(a,t,n))}),n[i]=!0)}function p(){var e,t,n=1e3*A.waitSeconds,o=n&&O.startTime+n<(new Date).getTime(),a=[],s=[],c=!1,d=!0;if(!b){if(b=!0,eachProp(R,function(e){var n=e.map,u=n.id;if(e.enabled&&(n.isDefine||s.push(e),!e.error))if(!e.inited&&o)r(u)?(t=!0,c=!0):(a.push(u),i(u));else if(!e.inited&&e.fetched&&n.isDefine&&(c=!0,!n.prefix))return d=!1}),o&&a.length)return e=makeError("timeout","Load timeout for modules: "+a,null,a),e.contextName=O.contextName,u(e);d&&each(s,function(e){f(e,{},{})}),o&&!t||!c||!isBrowser&&!isWebWorker||S||(S=setTimeout(function(){S=0,p()},50)),b=!1}}function h(e){hasProp(w,e[0])||s(a(e[0],null,!0)).init(e[1],e[2])}function m(e,t,n,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,t):e.removeEventListener(n,t,!1)}function g(e){var t=e.currentTarget||e.srcElement;return m(t,O.onScriptLoad,"load","onreadystatechange"),m(t,O.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function _(){var e;for(d();j.length;){if(e=j.shift(),null===e[0])return u(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));h(e)}O.defQueueMap={}}var b,v,O,y,S,A={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},E={},R={},x={},j=[],w={},F={},N={},k=1,M=1;return y={require:function(e){return e.require?e.require:e.require=O.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?w[e.map.id]=e.exports:e.exports=w[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(A.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},v=function(e){this.events=getOwn(x,e.id)||{},this.map=e,this.shim=getOwn(A.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},v.prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,O.startTime=(new Date).getTime();var e=this.map;return this.shim?void O.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;F[e]||(F[e]=!0,O.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,i=this.depExports,r=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{r=O.execCb(n,o,i,r)}catch(a){e=a}else r=O.execCb(n,o,i,r);if(this.map.isDefine&&void 0===r&&(t=this.module,t?r=t.exports:this.usingExports&&(r=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",u(this.error=e)}else r=o;this.exports=r,this.map.isDefine&&!this.ignore&&(w[n]=r,req.onResourceLoad&&req.onResourceLoad(O,this.map,this.depMaps)),l(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(O.defQueueMap,n)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,i=a(e.prefix);this.depMaps.push(i),c(i,"defined",bind(this,function(i){var r,o,d,f=getOwn(N,this.map.id),p=this.map.name,h=this.map.parentMap?this.map.parentMap.name:null,m=O.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(p=i.normalize(p,function(e){return n(e,h,!0)})||""),o=a(e.prefix+"!"+p,this.map.parentMap),c(o,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),d=getOwn(E,o.id),void(d&&(this.depMaps.push(o),this.events.error&&d.on("error",bind(this,function(e){this.emit("error",e)})),d.enable()))):f?(this.map.url=O.nameToUrl(f),void this.load()):(r=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),r.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(E,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&l(e.map.id)}),u(e)}),r.fromText=bind(this,function(n,i){var o=e.name,c=a(o),d=useInteractive;i&&(n=i),d&&(useInteractive=!1),s(c),hasProp(A.config,t)&&(A.config[o]=A.config[t]);try{req.exec(n)}catch(l){return u(makeError("fromtexteval","fromText eval for "+t+" failed: "+l,l,[t]))}d&&(useInteractive=!0),this.depMaps.push(c),O.completeLoad(o),m([o],r)}),void i.load(e.name,m,r,A))})),O.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){R[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,i,r;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,r=getOwn(y,e.id))return void(this.depExports[t]=r(this));this.depCount+=1,c(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?c(e,"error",bind(this,this.errback)):this.events.error&&c(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,i=E[n],hasProp(y,n)||!i||i.enabled||O.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(E,e.id);t&&!t.enabled&&O.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},O={config:A,contextName:e,registry:E,defined:w,urlFetched:F,defQueue:j,defQueueMap:{},Module:v,makeModuleMap:a,nextTick:req.nextTick,onError:u,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=A.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(A[t]||(A[t]={}),mixin(A[t],e,!0,!0)):A[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(N[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=O.makeShimExports(e)),t[n]=e}),A.shim=t),e.packages&&each(e.packages,function(e){var t,n;e="string"==typeof e?{name:e}:e,n=e.name,t=e.location,t&&(A.paths[n]=e.location),A.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(E,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t,null,!0))}),(e.deps||e.callback)&&O.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,r){function o(n,i,c){var d,l,f;return r.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof n?isFunction(i)?u(makeError("requireargs","Invalid require call"),c):t&&hasProp(y,n)?y[n](E[t.id]):req.get?req.get(O,n,t,o):(l=a(n,t,!1,!0),d=l.id,hasProp(w,d)?w[d]:u(makeError("notloaded",'Module name "'+d+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(_(),O.nextTick(function(){_(),f=s(a(null,t)),f.skipMap=r.skipMap,f.init(n,i,c,{enabled:!0}),p()}),o)}return r=r||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var i,r=e.lastIndexOf("."),o=e.split("/")[0],a="."===o||".."===o;return-1!==r&&(!a||r>1)&&(i=e.substring(r,e.length),e=e.substring(0,r)),O.nameToUrl(n(e,t&&t.id,!0),i,!0)},defined:function(e){return hasProp(w,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(w,e)||hasProp(E,e)}}),t||(o.undef=function(e){d();var n=a(e,t,!0),r=getOwn(E,e);r.undefed=!0,i(e),delete w[e],delete F[n.url],delete x[e],eachReverse(j,function(t,n){t[0]===e&&j.splice(n,1)}),delete O.defQueueMap[e],r&&(r.events.defined&&(x[e]=r.events),l(e))}),o},enable:function(e){var t=getOwn(E,e.id);t&&s(e).enable()},completeLoad:function(e){var t,n,i,o=getOwn(A.shim,e)||{},a=o.exports;for(d();j.length;){if(n=j.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);h(n)}if(O.defQueueMap={},i=getOwn(E,e),!t&&!hasProp(w,e)&&i&&!i.inited){if(!(!A.enforceDefine||a&&getGlobal(a)))return r(e)?void 0:u(makeError("nodefine","No define call for "+e,null,[e]));h([e,o.deps||[],o.exportsFn])}p()},nameToUrl:function(e,t,n){var i,r,o,a,s,c,u,d=getOwn(A.pkgs,e);if(d&&(e=d),u=getOwn(N,e))return O.nameToUrl(u,t,n);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(i=A.paths,r=e.split("/"),o=r.length;o>0;o-=1)if(a=r.slice(0,o).join("/"),c=getOwn(i,a)){isArray(c)&&(c=c[0]),r.splice(0,o,c);break}s=r.join("/"),s+=t||(/^data\:|\?/.test(s)||n?"":".js"),s=("/"===s.charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":A.baseUrl)+s}return A.urlArgs?s+((-1===s.indexOf("?")?"?":"&")+A.urlArgs):s},load:function(e,t){req.load(O,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=g(e);O.completeLoad(t.id)}},onScriptError:function(e){var t=g(e);return r(t.id)?void 0:u(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},O.require=O.makeRequire(),O}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.20",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,i){var r,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=i):e=[]),o&&o.context&&(a=o.context),r=getOwn(contexts,a),r||(r=contexts[a]=req.s.newContext(a)),o&&r.configure(o),r.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var i=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return i.type=e.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i},req.load=function(e,t,n){var i,r=e&&e.config||{};if(isBrowser)return i=req.createNode(r,t,n),r.onNodeCreated&&r.onNodeCreated(i,r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(o){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,o,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,n){var i,r;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript(),i&&(e||(e=i.getAttribute("data-requiremodule")),r=contexts[i.getAttribute("data-requirecontext")])),r?(r.defQueue.push([e,t,n]),r.defQueueMap[e]=!0):globalDefQueue.push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(window),this.require=require,this.define=define}function Libs(){this.breadcrumb={},this.object={},this.name=null}function Apps(){this.root=null,this.lib=null,this.app=null,this.triggerAfter={},this.triggerBefore={},this.scope={},this.modules={},this.onchange={},this.ondrop={}}function Http(){this.xhr=new window.XMLHttpRequest||new window.ActiveXObject("Microsoft.XMLHTTP"),this.xhr_list=[],this.upload=null,this.before=null,this.complete=null,this.progress=null,this.state=null,this.abort=null,this.error=null,this.time_out=null}function Router(){this.routes={}}function Storage(){}function Workers(){this.Worker=null,this.onsuccess=null}function View(){this.Http=new Http,this.Storage=new Storage,this.dir=null,this.tpl=null}function Model(){this.Http=new Http,this.modelData=null,this.object={},this.type="POST",this.model=null,this.failed=null}var setting={processor:"",app_path:"/syrup/app",system_path:"/syrup/system",env:"development"};"undefined"!=typeof exports&&(exports.setting=setting),function(e){function t(){this.recursiveStr=!1}function n(){this.collection=null,this.exist=null,this.state=null}var i=Function.prototype,r=Object.prototype,o=/(([^function])([a-zA-z])+(?=\())/g,a=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,s=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,c={ERROR:{NOPARAM:"Param needed",NONETWORK:"Network Error",NOOBJECT:"An object param is needed.",NOARRAY:"An array necessary.",NOFUNCTION:"An function needed.",NODATE:"Invalid Date",NOSTRING:"String is required",NOPACK:"Error packing model",NOCALLBACK:"Callback error on execution time.",NOURL:"URL is required for the request.",NOHTML:"Html string is required",NOOBJECTREPLACEREGEXP:"A object replace param is needed to replace a regexp ex: {match:replace}"}};r.clone=function(){return _.extend({},this)},i.blend=function(e){var t=e.prototype.constructor.name||e.toString().match(o)[0].trim();this.prototype[t]=e},i.factory=function(e){return new Function("return function "+e+"(){}")},i.drop=function(e){var t=e.prototype.constructor.name||e.toString().match(o)[0].trim();return _[t]?(_[t]=null,!0):!1},i.add=function(e,t){this.prototype[e.trim()]=t},n.add("$",function(e){var t,i=new n;return _.isFunction(e)?void _$(document).ready(e):(_.isHtml(e)?(t=document.createElement("div"),t.innerHTML=e,i.collection=t.children.length>1?t.children:t.firstChild):i.collection=!_.isObject(e)&&_.isString(e)?e.indexOf("+")>-1?document.querySelectorAll(_.replace(e,"+",_.emptyStr)):document.querySelector(e):e,i.exist=_.isSet(i.collection),i.name=e,i)}),n.add("fn",function(e,t){return this.__proto__[e]=t}),n.add("ready",function(e){var t=this;return _.isGlobal(t.collection)&&t.collection.addEventListener("DOMContentLoaded",e),this}),n.add("load",function(e){var t=this;_.isGlobal(t.collection)&&(t.collection.onload=e)}),n.add("listen",function(t,n,i){_.isFunction(n)&&(i=n);var r=this,o=null,a=function(r){r=r||e.event,o=t.srcElement||r.target,_.isSet(n)&&!_.isFunction(n)?_$(o).filter(n,function(){_.callbackAudit(i,r)}):_.callbackAudit(i,r)};return r.each(function(e){e.addEventListener?e.addEventListener(t,a,!0):e.attachEvent&&e.attachEvent("on"+t,a),_.isSet(e.listListener)||(e.listListener={}),e.listListener[t]=a}),this}),n.add("unlisten",function(e){return this.each(function(t){_.isSet(t.listListener)&&e in t.listListener&&(t.removeEventListener?t.removeEventListener(e,t.listListener[e],!0):t.detachEvent&&t.detachEvent("on"+e,t.listListener[e]),delete t.listListener[e])})}),n.add("filter",function(e,t,n){return this.each(function(i){var r=i.matchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector||i.oMatchesSelector||i.msMatchesSelector;r.call(i,e)?_.callbackAudit(t,_$(i)):_.isFunction(n)&&_.callbackAudit(n,_$(i))})}),n.add("empty",function(){return this.each(function(e){e.innerHTML=_.emptyStr})}),n.add("clone",function(e){e=_.isSet(e);var t=[];return this.each(function(n){t.push(_$(n.cloneNode(e)))}),_.specArray(t)}),n.add("data",function(e,t){var n,i=this,r=[];return i.each(function(i,o){n=i.dataset,_.isSet(t)||_.isNumber(t)?n[e]=_.isArray(t)?t[o]:t:_.isSet(n[e])&&r.push(n[e])}),_.specArray(r)}),n.add("prop",function(e){var t=[];return this.each(function(n){_.isString(e)?t.push(n[e]):_.each(e,function(e,t){n[t]=e})}),_.isString(e)?_.specArray(t):this}),n.add("attr",function(e){var t=[];return this.each(function(n){_.isString(e)?t.push(n.getAttribute(e)):_.each(e,function(e,t){n.setAttribute(t,e)})}),_.isString(e)?_.specArray(t):this}),n.add("removeAttr",function(e){return this.each(function(t){t[e]?t[e]=!1:t.removeAttr(e)})}),n.add("css",function(t){var n=[],i=this;return i.each(function(i){if(_.isString(t)){var r=e.getComputedStyle(i,null);n.push(r.getPropertyValue(t))}else _.each(t,function(e,t){i.style[t]=e})}),_.isString(t)?_.specArray(n):this}),n.add("after",function(e){return(_.isHtml(e)||!_.is$(e))&&(e=_$(e)),this.each(function(t){e.each(function(e){t.parentNode.insertBefore(e,t.nextSibling)})})}),n.add("before",function(e){return(_.isHtml(e)||!_.is$(e))&&(e=_$(e)),this.each(function(t){e.each(function(e){t.parentNode.insertBefore(e,t)})})}),n.add("append",function(e){return(_.isHtml(e)||!_.is$(e))&&(e=_$(e)),this.each(function(t){e.each(function(e){t.appendChild(e)})})}),n.add("prepend",function(e){return(_.isHtml(e)||!_.is$(e))&&(e=_$(e)),this.each(function(t){e.each(function(e){t.insertBefore(e,t.firstChild)})})}),n.add("html",function(e){return _.isHtml(e)||_.isString(e)?(this.prop({innerHTML:e}),this):this.prop("innerHTML")}),n.add("text",function(e){return _.isString(e)?(this.prop({textContent:e}),this):this.prop("textContent")}),n.add("val",function(e){return _.isString(e)?(this.prop({value:e}),this):this.prop("value")}),n.add("hide",function(){return this.each(function(e){e.style.display="none"})}),n.add("show",function(){return this.each(function(e){e.style.display="block"})}),n.add("parent",function(e){return this.each(function(t){t.parentNode&&_.callbackAudit(e,_$(t.parentNode))})}),n.add("children",function(e){return this.each(function(t){t.children.length>0&&_.each(t.children,function(t,n){_.isNumber(n)&&_.callbackAudit(e,_$(t))})})}),n.add("next",function(e){return this.each(function(t){_.callbackAudit(e,_$(t.nextElementSibling))})}),n.add("nexts",function(e,t){var n=null;return t=_.isFunction(e)?e:t,this.next(function(i){n=i;do _.isSet(e)&&!_.isFunction(e)?n.filter(e,function(e){_.callbackAudit(t,e)}):_.callbackAudit(t,n);while((n=_$(n.get(0).nextElementSibling)).exist)})}),n.add("trigger",function(e,t){var n=new CustomEvent(e,{bubbles:!0,cancelable:!0});return document.createEvent&&(n=document.createEvent("Event"),n.initEvent(e,!0,!1)),this.each(function(e){e.dispatchEvent(n)}),_.callbackAudit(t,n),this}),n.add("find",function(e,t){return this.children(function(n){n.filter(e,function(n){_.callbackAudit(t,n,e)},function(){n.find(e,t)})})}),n.add("parents",function(e,t){return this.each(function(n){_$(n).parent(function(n){n.filter(e,function(e){_.callbackAudit(t,e)},function(){n.parents(e,t)})})})}),n.add("hasClass",function(e){_.assert(e,c.ERROR.NOPARAM);var t=this.get(0);return _.isSet(t.classList)&&Array.prototype.indexOf.call(t.classList,e)>-1?!0:!1}),n.add("addClass",function(e){return this.each(function(t){_$(t).hasClass(e)||(t.classList?t.classList.add(e):t.className+=" "+e)})}),n.add("toggleClass",function(e){return this.each(function(t){t.classList.toggle(e)})}),n.add("removeClass",function(e){return this.each(function(t){_$(t).hasClass(e)&&(t.classList?t.classList.remove(e):t.className=_.replace(t.className,new RegExp(e,"g"),_.emptyStr))})}),n.add("fadeOut",function(e,t){return this.animate([{opacity:"1"},{opacity:"0"}],{delay:0,duration:_.isNumber(e)?e:50},_.isFunction(e)?e:t),this}),n.add("fadeIn",function(e,t){return this.animate([{opacity:"0"},{opacity:"1"}],{delay:0,duration:_.isNumber(e)?e:50},_.isFunction(e)?e:t),this}),n.add("height",function(e){if(_.isSet(e))return this.css({height:_.isNumber(e)?e+"px":e});var t=[];return this.each(function(e){t.push(_.cartesianPlane(e).height)}),_.specArray(t)}),n.add("width",function(e){if(_.isSet(e))return this.css({width:_.isNumber(e)?e+"px":e});var t=[];return this.each(function(e){t.push(_.cartesianPlane(e).width)}),_.specArray(t)}),n.add("is",function(e){_.assert(e,c.ERROR.NOPARAM);var t=this.get(0),n=!1;return _$(t).filter(e,function(){n=!0},function(){n=t[e]||t.type===e}),n}),n.add("get",function(e){return"[object NodeList]"==_.objectAsString(this.collection)&&_.isNumber(e)&&_.isSet(this.collection[e])?this.collection[e]:this.collection}),n.add("remove",function(){return this.each(function(e){e.remove?e.remove():e.parentNode.removeChild(e)})}),n.add("each",function(e){var t=this.collection;return _.isSet(t.childNodes)||_.isGlobal(t)?_.callbackAudit(e,t,0):_.each(t,function(t,n,i){_.isObject(t)&&_.isSet(t)&&_.callbackAudit(e,t,n,i)}),this}),n.add("offset",function(e){var t=[];return this.each(function(n){var i=_.cartesianPlane(n);_.isObject(e)&&(_.isSet(e.top)&&(n.style.top=_.isNumber(e.top)?e.top+"px":e.top),_.isSet(e.left)&&(n.style.left=_.isNumber(e.left)?e.left+"px":e.left),_.isSet(e.bottom)&&(n.style.bottom=_.isNumber(e.bottom)?e.bottom+"px":e.bottom),_.isSet(e.right)&&(n.style.right=_.isNumber(e.right)?e.right+"px":e.right)),t.push({top:i.top,left:i.left,bottom:i.bottom,right:i.right})}),_.specArray(t)}),n.add("sort",function(e,t){return _.isBoolean(e)&&(t=arguments[0],e=!1),t=t?-1:1,e=e?e:"innerHTML",_.toArray(this.collection).sort(function(n,i){var r=_$(n).attr(e)||_$(n).prop(e),o=_$(i).attr(e)||_$(i).prop(e);return _.isSet(r)&&_.isSet(o)&&(n=isNaN(+r)?r.toLowerCase():+r,i=isNaN(+o)?o.toLowerCase():+o),n>i?t:-1*t})}),n.add("animate",function(e,t,n){return this.each(function(i){if(_.isSet(i.animate)){_.isFunction(t)&&(n=t),t=_.isObject(t)||_.isNumber(t)?t:{},t.iterations=_.isSet(t.iterations)?t.iterations:1,t.duration=_.isSet(t.duration)?t.duration:1e3,t.delay=_.isSet(t.delay)?t.delay:300;var r=i.animate(e,t);r.addEventListener("finish",function(){_.callbackAudit(n,_$(i))})}})}),n.add("object",function(){return this.collection}),t.add("noConflict",function(){return _$}),t.add("assert",function(e,t){return _.isSet(e)||_.error(_.isSet(t)?t:"Param needed"),this}),t.add("isArray",function(e){return"[object Array]"===_.objectAsString(e)}),t.add("isObject",function(e){return"[object Object]"===_.objectAsString(e)||"object"==typeof e&&"[object Null]"!==_.objectAsString(e)}),t.add("isGlobal",function(e){return"[object global]"===_.objectAsString(e)||"[object Window]"===_.objectAsString(e)||"[object HTMLDocument]"===_.objectAsString(e)||"[object Document]"===_.objectAsString(e)}),t.add("is$",function(e){return e instanceof n}),t.add("isFormData",function(e){return"[object FormData]"===_.objectAsString(e)}),t.add("isString",function(e){return"[object String]"===_.objectAsString(e)}),t.add("isFunction",function(e){return"[object Function]"===_.objectAsString(e)}),t.add("isHtml",function(e){return/(<([^>]+)>)/gi.test(e)}),t.add("isBoolean",function(e){return"[object Boolean]"===this.objectAsString(e)}),t.add("isRegexp",function(e){return"[object RegExp]"===this.objectAsString(e)}),t.add("isSet",function(e){return"undefined"!=typeof e&&null!==e&&!!e}),t.add("isEmpty",function(e){return _.isArray(e)?0===e.length:!e||e===_.emptyStr||/^\s+$/.test(e)}),t.add("isUrl",function(e){return a.test(e)}),t.add("isMail",function(e){return s.test(e)}),t.add("isJson",function(e){try{JSON.parse(e)}catch(t){return!1}return!0}),t.add("isNumber",function(e){return!isNaN(e)}),t.add("warning",function(e){var t=_.getDate(!1);console.log(t.hour+":"+t.minutes+":"+t.seconds+" "+t.meridian+" -> "+e)}),t.add("error",function(e){var t=_.getDate(!1);throw t.hour+":"+t.minutes+":"+t.seconds+" "+t.meridian+" -> "+e}),t.add("htmlEntities",function(e){var t={"<":"&lt",">":"&gt;",'"':"&quot;","'":"&#39;","&":"&amp;"};return _.replace(e,/<|>|&|"|'/g,t)}),t.add("splitString",function(e,t){return e.indexOf(t)>-1?e.split(t):e}),t.add("truncateString",function(e,t){return _.toObject(e).slice(0,t)}),t.add("replace",function(e,t,n){var i,r=e.toString(),o=r.toLowerCase(),a=_.emptyStr,s=0,u=1;if(_.isRegexp(t)?(t=r.match(t),this.recursiveStr=o):t=t.toLowerCase(),_.isArray(t))_.isObject(n)?t.length>0&&(i=t.pop(),this.recursiveStr=_.replace(this.recursiveStr,i,n[i])):_.error(c.ERROR.NOOBJECTREPLACEREGEXP);else{for(;(u=o.indexOf(t))>-1;)a+=r.substring(s,s+u)+n,o=o.substring(u+t.length,o.length),s+=u+t.length;!_.isEmpty(o)>0&&(a+=r.substring(r.length-o.length,r.length)),_.isEmpty(a)||(this.recursiveStr=a)}return this.recursiveStr}),t.add("getDate",function(e){var t,n=new Date,i=["January","February","March","April","May","June","July","August","September","October","November","December"],r=n.getMinutes(),o=n.getHours(),a=n.getSeconds(),s=n.getDate();return n=_.isSet(e)?new Date(e):n,"Invalid Date"===n&&_.error(n),s=10>s?"0"+s:s,t=o>12?"PM":"AM",o=o>12?o-12===0?12:o-12:10>o?"0"+o:o,r=10>r?"0"+r:r,a=10>a?"0"+a:a,{day:s,month:i[n.getMonth()],year:n.getFullYear(),hour:o,minutes:r,seconds:a,meridian:t}}),t.add("getNav",function(){var t=/(?:trident\/(?=\w.+rv:)|(?:chrome\/|firefox\/|opera\/|msie\s|safari\/))[\w.]{1,4}/,n=_.nav.local.match(t),i=_.isSet(n)?n[0].split("/"):!1;return i?{nav:i[0]?_.replace(i[0],"trident","msie"):!1,version:i[1]?i[1]:!1,platform:e.navigator.platform.toLocaleLowerCase()}:!1}),t.add("getEncodedId",function(e){for(var t=_.emptyStr,n=e?e:5,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789=_",r=0;n>r;r++)t+=i.charAt(Math.floor(Math.random()*i.length));return t}),t.add("getObjectKeys",function(e){return _.isObject(e)?Object.keys(e):[]}),t.add("getObjectSize",function(e){return _.isObject(e)?_.getObjectKeys(e).length:0;
}),t.add("getObjectValues",function(e){return _.isObject(e)?_.getObjectKeys(e).map(function(t){return e[t]}):[]}),t.add("objectAsString",function(e){return r.toString.call(e)}),t.add("objectImmutable",function(e){return _.isObject(e)?Object.freeze(e):e}),t.add("objectWatch",function(e,t,n){return _.isObject(e)&&_.isSet(t)&&Object.observe(e,t,n?n:[]),e}),t.add("interval",function(e,t){var n=new Workers;return n.set("/workers/setting/Interval").then(function(n){n.send(t),n.on("message",function(t){_.callbackAudit(e,t.data)})}),n}),t.add("requestAnimationFrame",function(t){return(e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)})(t)}),t.add("getCookie",function(e){var t=document.cookie,n=null;if(t&&t!==_.emptyStr){var i=t.split(";");_.each(i,function(t){t=t.split("=");var i=t[0].trim(),r=t[1].trim();return i===e?(n=r,!1):void 0})}return n}),t.add("simplifyDirectory",function(e){return _.isString(e)?e.split("/").join("."):e}),t.add("dotDirectory",function(e){return _.isString(e)?e.split(".").join("/"):e}),t.add("jsonToQueryString",function(e){var t=_.emptyStr,n=_.isObject(e)?_.getObjectSize(e):0;return _.each(e,function(e,i){t+=encodeURI(i+"="+e),n>1&&(t+="&")}),t.lastIndexOf("&")>-1?t.slice(0,-1):t}),t.add("jsonToString",function(e){return _.isObject(e)?JSON.stringify(e):null}),t.add("getScript",function(e,t){var n=document.createElement("script"),i=document.body,r=function(){_$(n).remove(),_.callbackAudit(t)};_.isSet(n.readyState)?n.addEventListener("readystatechange",function(){("loaded"==n.readyState||"complete"==n.readyState)&&r()},!1):n.addEventListener("load",r,!1),n.src=e,n.async=!0,i.appendChild(n)}),t.add("each",function(e,t){var n={first:!1,last:!1};if(_.isArray(e))for(var i=0,r=e.length;r>i;i++)n.first=0===i,n.last=i+1===r,_.callbackAudit(t,e[i],i,n);else if(_.isObject(e))for(var o,a=Object.keys(e),s=o=a.length;s--;)n.first=s+1===o,n.last=0===s,_.callbackAudit(t,e[a[s]],a[s],n);return this}),t.add("cartesianPlane",function(e,t){return e=_.is$(e)?_$(e).object():e,_.isGlobal(e)?{top:e.pageYOffset,left:e.pageXOffset,width:e.outerWidth,height:e.outerHeight}:t?e.getClientRects():e.getBoundingClientRect()}),t.add("callbackAudit",function(e){try{if(!_.isSet(e))return!1;var t=_.toArray(arguments);t=_.filterArray(t,function(e,t){return!_.isFunction(e)}),e.apply(null,t.length>0?t:null)}catch(n){_.error(n)}return!0}),t.add("compactArray",function(e){return _.filterArray(e,function(e){return e?e:!1})}),t.add("specArray",function(e){return _.isArray(e)||_.error(c.ERROR.NOARRAY),e.length>1?e:_.isSet(e[0])?e[0]:null}),t.add("repeatString",function(e,t){return Array(t+1).join(e)}),t.add("filterArray",function(e,t){return e.filter(t)}),t.add("inObject",function(e,t){var n=!1;return _.each(t,function(t,i){if(_.isObject(t)){if(n=_.inObject(e,t))return!1}else if(t===e)return n=i,!1}),0===n?!0:n}),t.add("matchInArray",function(e,t){var n=new RegExp(t.join("|"),"g");return n.test(e)}),t.add("uniqueArray",function(e){var t=[];return e.filter(function(e){return-1==t.indexOf(e)?(t.push(e),e):void 0})}),t.add("toArray",function(e){return _.isObject(e)?[].slice.apply(e):_.isString(e)?_.toObject(e):void 0}),t.add("toString",function(e){return _.isObject(e)?JSON.stringify(e):void 0}),t.add("toObject",function(e){return _.isJson(e)?JSON.parse(e):_.isString(e)?r.valueOf.call(e):(_.isArray(e)||_.error(c.ERROR.NOARRAY),e.reduce(function(e,t,n){return e[n]=t,e},{}))}),t.add("objectDistribute",function(e,t){var n={};return _.isObject(e[t])?_.each(e[t],function(i,r){n[i]={},_.each(e,function(e,o){o!==t&&n[i][o].push(e[r])})}):n[e[t]]=e,n}),t.add("getElementIndex",function(e){for(var t=1,n=document.body.previousElementSibling?"previousElementSibling":"previousSibling";e=e[n];)++t;return t}),t.add("extend",function(e,t,n){return _.isObject(e)&&t?(_.isFunction(t)&&(t=new t,e=e.__proto__),_.each(t,function(t,i){(!e.hasOwnProperty(i)||_.isSet(n))&&(e[i]=t)}),e):e}),e._=function(){return new t}(),_.VERSION="1.1",_.$fn=n,_.emptyStr="",_.Syrup=t,_.WARNING_SYRUP=c,_.nav={},_.nav.unsupported=!(e.localStorage&&e.File&&e.FileReader&&e.FileList&&e.Blob&&e.Worker&&e.WebSocket),_.nav.cookies=e.navigator.cookieEnabled,_.nav.javascript=e.navigator.javaEnabled(),_.nav.online=e.navigator.onLine,_.nav.local=e.navigator.userAgent.toLowerCase(),e._$=function(){return(new n).$}()}(window),Object.observe||!function(e,t){"use strict";var n=function(e){var n=e.call(e),i=typeof i;return"object"==typeof t.alert?function(t){return n===e.call(t)||!!t&&typeof t.toString==i&&typeof t.valueOf==i&&/^\s*\bfunction\b/.test(""+t)}:function(t){return n===e.call(t)}}(e.prototype.toString),i=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},r=function(){return!!t.setImmediate}(),o=function(){return r?function(e){return setImmediate(e)}:function(e){return setTimeout(e,10)}}(),a=function(){return r?function(e){clearImmediate(e)}:function(e){clearTimeout(e)}}(),s=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},c=function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t},u=function(e){return"undefined"==typeof e?!1:"get"in e||"set"in e},d=function(e,t,i){if("object"!=typeof e)throw new TypeError("Object.observeObject called on non-object");if(n(t)===!1)throw new TypeError("Object.observeObject: Expecting function");if(Object.isFrozen(t)===!0)throw new TypeError("Object.observeObject: Expecting unfrozen function");if(void 0!==i&&!Array.isArray(i))throw new TypeError("Object.observeObject: Expecting acceptList in the form of an array")},l=function m(){var e=[],m=function(t,n,i){d(t,n,i),i||(i=["add","update","delete","reconfigure","setPrototype","preventExtensions"]),Object.getNotifier(t).addListener(n,i),-1===e.indexOf(t)?e.push(t):Object.getNotifier(t)._checkPropertyListing()};m.prototype.deliverChangeRecords=function(e){Object.getNotifier(e).deliverChangeRecords()},e.lastScanned=0;var t=function(e){return function t(){var n=0,i=e.length,r=new Date,a=!1;for(n=e.lastScanned;i>n&&!a;n++)h.indexOf(e[n])>-1?(Object.getNotifier(e[n])._checkPropertyListing(),a=new Date-r>100):(e.splice(n,1),n--,i--);e.lastScanned=i>n?n:0,o(t)}}(e);return o(t),m}(),f=function(e){var t=[],n=[],i=[],r=!1,d=[],l=[],f=this;Object.defineProperty(f,"_watching",{enumerable:!0,get:function(e){return function(){return e}}(e)});var p=function(e,t){var n=(typeof e[t],Object.getOwnPropertyDescriptor(e,t));if("getNotifier"===t||u(n)||!n.enumerable)return!1;if(e instanceof Array&&s(t)){var i=d.length;return d[i]=t,l[i]=e[t],!0}return function(t,n){function i(){return l[i.info.idx]}function r(t){c(l[r.info.idx],t)||(Object.getNotifier(e).queueUpdate(e,n,"update",l[r.info.idx]),l[r.info.idx]=t)}d[t]=n,l[t]=e[n],i.info=r.info={idx:t},Object.defineProperty(e,n,{get:i,set:r})}(d.length,t),!0};f._checkPropertyListing=function(e){var t,n,i,r,o,a=f._watching,c=Object.keys(a),u=0,h=c.length,m=d.slice(0),g=!e;for(a instanceof Array&&(o=f._oldLength),u=0;h>u;u++)t=c[u],i=a[t],n=typeof i,-1===(r=d.indexOf(t))?p(a,t)&&g&&f.queueUpdate(a,t,"add",null,a[t]):(a instanceof Array&&!s(t)||l[r]!==i&&(g&&f.queueUpdate(a,t,"update",l[r],i),l[r]=i),m.splice(m.indexOf(t),1));if(a instanceof Array&&a.length!==o&&(g&&f.queueUpdate(a,"length","update",o,a),f._oldLength=a.length),g)for(h=m.length,u=0;h>u;u++){r=d.indexOf(m[u]),f.queueUpdate(a,m[u],"delete",l[r]),d.splice(r,1),l.splice(r,1);for(var u=r;u<d.length;u++)if(d[u]in a){var _=Object.getOwnPropertyDescriptor(a,d[u]).get;if(_){var b=_.info;b.idx=u}}}},f.addListener=function(e,i){var r=t.indexOf(e);-1===r?(t.push(e),n.push(i)):n[r]=i},f.removeListener=function(e){var i=t.indexOf(e);i>-1&&(t.splice(i,1),n.splice(i,1))},f.listeners=function(){return t},f.queueUpdate=function(e,t,n,i){this.queueUpdates([{type:n,object:e,name:t,oldValue:i}])},f.queueUpdates=function(e){var t,n=this,s=0,c=e.length||0;for(s=0;c>s;s++)t=e[s],i.push(t);r&&a(r),r=o(function(){r=!1,n.deliverChangeRecords()})},f.deliverChangeRecords=function(){var e=0,r=t.length;for(e=0;r>e;e++)if(t[e]){var o;if(n[e]){o=[];for(var a=0,s=i.length;s>a;a++)-1!==n[e].indexOf(i[a].type)&&o.push(i[a])}else o=i;o.length&&(t[e]===console.log?console.log(o):t[e](o))}i=[]},f.notify=function(t){if("object"!=typeof t||"string"!=typeof t.type)throw new TypeError("Invalid changeRecord with non-string 'type' property");t.object=e,f.queueUpdates([t])},f._checkPropertyListing(!0)},p=[],h=[];e.getNotifier=function(e){var t=h.indexOf(e),n=t>-1?p[t]:!1;return n||(t=h.length,h[t]=e,n=p[t]=new f(e)),n},e.observe=function(e,t,n){return i(e)?void 0:new l(e,t,n)},e.unobserve=function(e,t){d(e,t);var n=h.indexOf(e),i=n>-1?p[n]:!1;i&&(i.removeListener(t),0===i.listeners().length&&(h.splice(n,1),p.splice(n,1)))}}(Object,this),Required.add("setConf",function(e){"use strict";this.require.config(_.extend({baseUrl:setting.app_path,paths:{system:setting.system_path}},e||{},!0))}),Required.add("getRequire",function(){"use strict";return this.require}),Required.add("getDefine",function(){"use strict";return this.define}),Required.add("lookup",function(e){"use strict";var t=this;return new Promise(function(n,i){t.require(e,function(){n()})})}),window.Require=new Required,Require.setConf(),Libs.add("blend",function(e,t){var n=_.splitString(e,".");_.isArray(n)&&(e=n[0]);var i=Function.factory(e)();return e in this.breadcrumb||(_.Syrup.blend(i),this.name=e,this.object=_[e],this.breadcrumb[e]=this.object,this._dependencies(t)),this}),Libs.add("get",function(e){return e in this.breadcrumb&&this.breadcrumb[e]}),Libs.add("_dependencies",function(e){var t=this;_.isArray(e)&&_.isSet(t.object)&&_.each(e,function(e){t.object.__proto__[e]=e in t.object?t.object[e]:_[e]||new window[e]})}),Libs.add("make",function(e){var t=this;return _.each(e,function(e,n){t.object[n]=e}),this}),Libs.add("supply",function(e){for(var t=this,n=_.getObjectKeys(e),i=n.length;i--;)_.isFunction(e[n[i]])&&t.cook(n[i],e[n[i]]);return this}),Libs.add("cook",function(e,t){return this.object.__proto__[e]=t,this}),window.Lib=new Libs,Apps.add("blend",function(e,t){var n=new Apps;return n.lib=new Libs,n.root=e,n.scope={},n.app=_$('[sp-app="'+e+'"]'),n.lib.blend(e,t),n}),Apps.add("recipe",function(e,t){return _.isSet(this.root)&&_.isSet(t)&&(this.temp=e,this.modules[e]={creator:t,instance:null},this._taste(e)),this}),Apps.add("_watch",function(e){var t=this;Object.observe(t.scope,function(n){_.each(n,function(n){n.name in t.onchange&&_.getObjectSize(n.object)>0&&e===n.name&&t.onchange[n.name]({name:n.name,old:n.oldValue,type:n.type,object:n.object[n.name]})})})}),Apps.add("_add",function(e){_.isObject(this.scope[e])||(this.scope[e]={})}),Apps.add("_trigger",function(e){return e in this.modules?this.modules[e].creator(_,_$,this.scope):{}}),Apps.add("_triggerOn",function(e,t,n){return _.isArray(e)&&_.each(e,function(e){e in n||(n[e]=t)}),this}),Apps.add("beforeServe",function(e,t){return this._triggerOn(e,t,this.triggerBefore)}),Apps.add("afterServe",function(e,t){return this._triggerOn(e,t,this.triggerAfter)}),Apps.add("service",function(e,t){return this.lib.cook(e,t),this}),Apps.add("services",function(e){return this.lib.supply(e),this}),Apps.add("getRecipe",function(e){return e in this.modules&&_.isSet(this.root)?this.modules[e].instance:null}),Apps.add("setScope",function(e,t){return e in this.scope&&(this.scope[e]=t),this}),Apps.add("getScope",function(e){return e in this.scope?this.scope[e]:{}}),Apps.add("when",function(e,t,n){var i=this;return[{change:function(){i.onchange[t]=n},drop:function(){i.ondrop[t]=n}}[e]()]}),Apps.add("_bindListener",function(e){var t=["[sp-click], ","submit], ","change], ","dblclick], ","mousedown], ","mouseenter], ","mouseleave], ","mousemove], ","mouseover], ","mouseout], ","mouseup], ","keydown], ","keypress], ","keyup], ","blur], ","focus], ","input], ","select], ","reset]"];if(this.app.exist){var n=this,i=this.modules[e].instance,r=t.join(" [sp-"),o=_$('[sp-recipe="'+e+'"]');o.find(r,function(e){e.each(function(e){_.each(e.attributes,function(t){if(/sp-[a-z]+/.test(t.localName)){var r=_.replace(t.localName,"sp-",_.emptyStr),a=e.getAttribute(t.localName);a in i&&_.isFunction(i[a])&&o.listen(r,"["+t.localName+'="'+a+'"]',function(e){i[a](e,n.lib.get(i.parent))})}})})})}}),Apps.add("_serve",function(e,t){var n=null,i=this.scope[e];if(this.app.exist){var r=_$('[sp-recipe="'+e+'"] [sp-view]'),o=_$('[sp-recipe="'+e+'"] [sp-tpl]');if(r.exist&&_.getObjectSize(i)>0)if(n=new View,_.isSet(t)&&_.isString(t)){var a=t.split("/").pop(),s=_.replace(t,"/"+a,_.emptyStr);Require.lookup(["view/"+s]).then(function(){a in n.__proto__&&n[a](i,function(e){r.html(e)})})}else if(o.exist){var c=o.html();_.isSet(c)&&n.render(c,i).then(function(e){r.html(e)})}}return this}),Apps.add("_taste",function(e){var t=this;return e in t.modules&&_.isSet(t.root)&&(t._add(e),t.modules[e].instance=t._trigger(e),t.modules[e].instance.name=e,t.modules[e].instance.parent=t.root,t.modules[e].instance.setScope=function(n){return _.isObject(n)?(t.setScope(e,n),this):void 0},t.modules[e].instance.getScope=function(){return t.getScope(e)},t.modules[e].instance.when=function(n,i){return t.when(n,e,i),this},t.modules[e].instance.getRecipe=function(){return t.getRecipe(e)},t.modules[e].instance.serve=function(n){return t._serve(e,n||null),this},t.modules[e].instance.listen=function(t,n){return _$('[sp-recipe="'+e+'"]').listen(t,"[sp-"+t+"]",n),this},"init"in t.modules[e].instance&&(e in this.triggerBefore&&t.triggerBefore[e](e,this.lib.get(t.root)),t.modules[e].instance.init(this.lib.get(t.root)),t._bindListener(e),e in t.triggerAfter&&t.triggerAfter[e](e,this.lib.get(t.root))),t._watch(e)),this}),Apps.add("drop",function(e){return e in this.modules&&this.modules[e].instance&&("destroy"in this.modules[e].instance&&this.modules[e].instance.destroy(this.lib.get(this.root)),this.ondrop[e]&&this.ondrop[e](e),this.modules[e]=null),this}),Apps.add("dropAll",function(){var e=this;return _.each(this.modules,function(t,n){e.drop(n)}),this}),window.App=new Apps,Http.add("on",function(e,t){var n=this;return[{before:function(){n.before=t},complete:function(){n.complete=t},abort:function(){n.abort=t},state:function(){n.state=t},timeout:function(){n.time_out=t},progress:function(){n.progress=t}}[e]()]}),Http.add("request",function(e){if(!_.isObject(e))throw _.WARNING_SYRUP.ERROR.NOOBJECT;var t=this,n=t.xhr,i=e.async||!0,r=(e.method||"GET").toUpperCase(),o=e.timeout||4e3,a=e.cors||!1,s=e.processor||setting.processor,c=e.token||null,u=e.contentType||"application/x-www-form-urlencoded;charset=utf-8",d=e.data||null,l={header:"Content-Type",value:u};return new Promise(function(f,p){_.isSet(e.url)||p(_.WARNING_SYRUP.ERROR.NOURL),!_.isFormData(d)&&_.isSet(d)&&"auto"!==u&&(d=_.jsonToQueryString(d)),"GET"===r&&_.isSet(d)&&(s+="?"+d),s=e.url+(s||""),n.open(r,s,i),n.timeout=o,_.isFormData(d)||"auto"===u||t.requestHeader(l.header,l.value),_.isSet(a)&&(n.withCredentials=!0),_.isSet(c)&&t.requestHeader("X-CSRFToken",c),_.isSet(e.upload)&&_.isBoolean(e.upload)&&(t.upload=t.xhr.upload,n=t.upload),n.addEventListener("load",function(e){if(this.status>=200&&this.status<400){var t=this.response||this.responseText;_.isJson(t)&&(t=JSON.parse(t)),f(t)}}),n.addEventListener("progress",function(e){t.progress&&t.progress(e)},!1),n.addEventListener("readystatechange",function(e){this.readyState&&t.state&&t.state(this.readyState,e)}),n.addEventListener("abort",function(e){t.abort&&t.abort(e)}),n.addEventListener("timeout",function(e){t.time_out&&t.time_out(e)}),n.addEventListener("loadend",function(e){t.complete&&t.complete(e)}),n.addEventListener("loadstart",function(e){t.before&&t.before(e)}),n.addEventListener("error",function(e){p(e)}),t.xhr_list.push(t.xhr),n.send("GET"!==r?d:null)})}),Http.add("get",function(e,t){var n={url:e||location.href,data:t||{}};return this.kill(),this.request(n)}),Http.add("post",function(e,t){var n={method:"POST",url:e||location.href,data:t||{}};return this.kill(),this.request(n)}),Http.add("put",function(e,t){var n={method:"PUT",url:e||location.href,data:t||{}};return this.kill(),this.request(n)}),Http.add("delete",function(e,t){var n={method:"DELETE",url:e||location.href,data:t||{}};return this.kill(),this.request(n)}),Http.add("requestHeader",function(e,t){return this.xhr.setRequestHeader(e,t),this}),Http.add("kill",function(){return _.each(this.xhr_list,function(e){e.abort()}),this.xhr_list.length=0,this}),Router.add("setRoutes",function(e){var t=this;return new Promise(function(n,i){t.routes=_.extend(t.routes,e),n(t.routes)})}),Router.add("when",function(e){_.assert(e,_.WARNING_SYRUP.ERROR.NOPARAM);var t=this;return new Promise(function(n,i){e in t.routes||i(e);var r=t.routes[e],o=window.location.pathname,a=o.match(new RegExp(r,"g"));a&&n(a)})}),Router.add("parseQueryString",function(){}),Storage.add("set",function(e,t){localStorage.setItem(e,JSON.stringify(t))}),Storage.add("get",function(e){return _.isJson(localStorage.getItem(e))?JSON.parse(localStorage.getItem(e)):null}),Storage.add("append",function(e,t){var n=this.get(e),i=_.extend(_.isSet(n)?n:{},t);return this.set(e,i,!1),this}),Storage.add("destroy",function(){localStorage.clear()}),Storage.add("clear",function(e){return localStorage.removeItem(e),this}),Storage.add("count",function(){return localStorage.length}),Workers.add("on",function(e,t){var n=this;return[{message:function(){n.onsuccess=t}}[e]()]}),Workers.add("set",function(e){var t=this;return new Promise(function(n,i){t.Worker=new Worker(setting.system_path+e+".min.js"),t.Worker.addEventListener("message",function(e){_.callbackAudit(t.onsuccess,e)},!1),n(t)})}),Workers.add("get",function(){return this.Worker}),Workers.add("send",function(e){return this.Worker.postMessage(e?e:""),this}),Workers.add("kill",function(){return _.isSet(this.Worker)&&(this.Worker.terminate(),this.Worker=null),this}),View.add("lookup",function(e){var t={url:setting.app_path+"/templates/"+e,contentType:"text/plain",processor:".html"};return this.Http.request(t)}),View.add("seekTpl",function(e){var t=this,n=t.Storage,i=null,r={};return _.isSet(n.get("templates"))||n.set("templates",{}),i=n.get("templates"),t.dir=e,new Promise(function(o,a){e in i?(t.tpl=i[e],o(t)):t.lookup(e).then(function(i){r[e]=i,n.append("templates",r),t.tpl=i,o(t)})["catch"](function(){a(_.WARNING_SYRUP.ERROR.NONETWORK)})})}),View.add("getTpl",function(){return this.tpl}),View.add("clear",function(){return this.Storage.clear("templates"),this}),View.add("remove",function(){if(this.dir){var e=this.Storage.get("templates");e&&delete e[this.dir],this.Storage.set("templates",e),this.dir=null}return this}),View.add("render",function(e,t){return new Promise(function(n,i){(new Workers).set("/workers/setting/Parser").then(function(i){i.send({template:e,fields:t}),i.on("message",function(e){n(e.data)})})})}),Model.add("method",function(e){return this.type=e.toUpperCase(),this}),Model.add("attach",function(e,t){var n=this;_.assert(n.modelData,_.WARNING_SYRUP.ERROR.NOPACK),n.modelData.append(e,t)}),Model.add("multiple",function(e){var t=[],n=this.model.object();return e in n.elements&&_.each(n.elements[e],function(e,n){t.push(e.value)}),t.length>0?t:!1}),Model.add("fail",function(e,t){return this.failed=!0,{field:e,error:t,coords:_.cartesianPlane(e)}}),Model.add("send",function(e,t){var n=this;_.assert(t,_.WARNING_SYRUP.ERROR.NOPACK);var i={url:e,data:t,method:n.type};return new Promise(function(e,r){n.failed&&r(t),n.Http.kill(),n.Http.request(i).then(function(t){e(t)})["catch"](r)})}),Model.add("getObject",function(){return this.object}),Model.add("getData",function(){return this.modelData}),Model.add("pack",function(e){var t=this;t.model=_$(e);var n,i=new FormData,r=t.model.object(),o=r.querySelectorAll("input, textarea, select"),a=o.length;return t.failed=!1,new Promise(function(e,r){for(;a--;)if("file"!==o[a].type&&o[a]&&("checkbox"!==o[a].type&&"radio"!==o[a].type||o[a].checked)){var s=o[a],c=s.value;if(!_$(s).data("skip")&&_.isEmpty(c)){r(t.fail(s,"empty"));break}if(_$(s).data("mail")&&!_.isMail(c)){r(t.fail(s,"invalid_mail"));break}if(_$(s).data("min")&&+_$(s).data("min")>c.length){r(t.fail(s,"minim_chars"));break}if(_$(s).data("max")&&+_$(s).data("max")<c.length){r(t.fail(s,"overflow_chars"));break}if(_$(s).data("custom")){var u=new RegExp(_$(s).data("custom"),"g");if(!u.test(c)){r(t.fail(s,"invalid_custom"));break}}_.isSet(s.name)&&((n=t.multiple(s.name))&&(c=n),i.append(s.name,c),t.object[s.name]=c)}t.modelData=i,e(t)})});var GoogleMap,WARNING_GOOGLE_MAP={ERROR:{NOLOCATION:"No coordinates seted.",NOMAP:"No map seted.",NOCONTAINER:"No map container seted.",NOCONFIG:"The configuration object is necessary.",NOROUTES:"No mapped routes",NODISTANCE:"You need the source and target to measure the distance."}};GoogleMap=function(){var e=this.__proto__||GoogleMap.prototype,t=this||e;t.markersCollection=[],t.coordsCollection=[],t.routesCollection=[],t.infoLabels=[],t.distanceCollection={},t.container=null,t.mapa=null,t.position=null,t.mapType="roadmap",t.travelType="DRIVING",t.marker=null,t.ruta=null,t.mapObject=google.maps,t.infoWindow=null,t.animationType=t.mapObject.Animation.DROP,t.geocoder=new t.mapObject.Geocoder,t.distance=new t.mapObject.DistanceMatrixService,e.setMapType=function(e){var t=this;t.mapType=[{road:t.mapObject.MapTypeId.ROADMAP,satellite:t.mapObject.MapTypeId.SATELLITE,hybrid:t.mapObject.MapTypeId.HYBRID,terrain:t.mapObject.MapTypeId.TERRAIN}[e]].toString()||t.mapType},e.setMapContainer=function(e){_.is$(e)&&(e=e.object()),this.container=e},e.getMapPosition=function(){return this.position},e.parseLatLngEvent=function(e){return e.latLng?{latitude:e.latLng.lat(),longitude:e.latLng.lng()}:null},e.getMap=function(){return this.mapa},e.getCoords=function(){return this.coordsCollection},e.cleanCoords=function(){this.coordsCollection=[]},e.getCoordsCenterPoint=function(){var e=this.coordsCollection,t=0,n=0,i=0,r=0,o=0;return _.each(e,function(e){r=e.lat()*Math.PI/180,o=e.lng()*Math.PI/180,t+=Math.cos(r)*Math.cos(o),n+=Math.cos(r)*Math.sin(o),i+=Math.sin(r)}),t/=e.length,n/=e.length,i/=e.length,o=Math.atan2(n,t),r=Math.atan2(i,Math.sqrt(t*t+n*n)),{latitude:180*r/Math.PI,longitude:180*o/Math.PI}},e.appendCoord=function(e){this.coordsCollection.push(e)},e.on=function(e,n,i){_.isString(e)&&(i=n,n=e,_.isSet(this.mapa)&&(e=this.mapa)),_.isFunction(i)||_.error(_.WARNING_SYRUP.ERROR.NOFUNCTION),_.isObject(e)||_.error(WARNING_GOOGLE_MAP.ERROR.NOMAP),t.mapObject.event.addListener(e,n,i)},e.makePosition=function(e){return _.isObject(e)||_.error(WARNING_GOOGLE_MAP.ERROR.NOCONFIG),new this.mapObject.LatLng(e.latitude,e.longitude)},e.setMapPosition=function(e){_.isObject(e)||_.error(WARNING_GOOGLE_MAP.ERROR.NOCONFIG),this.position=this.makePosition(e)},e.changeMapPosition=function(e){var t=this;_.isObject(e)||_.error(WARNING_GOOGLE_MAP.ERROR.NOCONFIG),t.mapa||_.error(WARNING_GOOGLE_MAP.ERROR.NOMAP),t.setMapPosition(e),t.mapa.setCenter(t.position)},e.createMap=function(e,t){var n=this;n.position||_.error(WARNING_GOOGLE_MAP.ERROR.NOLOCATION),n.container||_.error(WARNING_GOOGLE_MAP.ERROR.NOCONTAINER);var i,r={zoom:10,center:n.position,mapTypeId:n.mapType};_.isFunction(e)?(i=r,t=arguments[0]):i=_.extend(e,r),n.mapa=new n.mapObject.Map(n.container,i),_.callbackAudit(t,n.mapa)},e.setMarker=function(e,t){this.mapa||_.error(WARNING_GOOGLE_MAP.ERROR.NOMAP),_.isObject(t)||(t={}),e&&_.isObject(e)?this.setMapPosition(e):this.position||_.error(WARNING_GOOGLE_MAP.ERROR.NOLOCATION);var n=_.extend({position:this.position,map:this.mapa},t);return this.marker=new this.mapObject.Marker(n),this.marker.setAnimation(this.animationType),this.markersCollection.push(this.marker),this.coordsCollection.push(this.position),this.marker},e.setMarkerAnimationType=function(e){var t=this;t.animationType=[{fall:t.mapObject.Animation.DROP,infinitejump:t.mapObject.Animation.BOUNCE}[e]].toString()||t.animationType},e.stopMarkerAnimation=function(){this.marker.setAnimation(null)},e.showAllMarkers=function(e){_.each(this.markersCollection,function(t){t.setMap(e)})},e.clearMarkers=function(){this.showAllMarkers(null)},e.deleteMarkers=function(){this.markersCollection=[]},e.getMarkers=function(){return this.markersCollection},e.setMarkerInfo=function(e,t,n){var i=this;n=_.extend({content:e},n);var r=this.createInfoLabel(e,n);return r.open(i.mapa,t),r},e.createInfoLabel=function(e,t){var n=this;return t=_.extend({content:e},t),n.infoWindow=new n.mapObject.InfoWindow(t),n.infoLabels.push(n.infoWindow),n.infoWindow},e.clearInfoLabels=function(){_.each(this.infoLabels,function(e){e.close()})},e.clearInfoLabel=function(){self.infoWindow.close()},e.geoCodeRequest=function(e,t){this.geocoder.geocode(e,t)},e.getLocationInfo=function(e,t){var n=this;_.isSet(e)&&_.isObject(e)?n.setMapPosition(e):(_.isSet(n.position)||n.error(WARNING_GOOGLE_MAP.ERROR.NOLOCATION),_.isFunction(e)&&(t=arguments[0])),this.geoCodeRequest({latLng:n.position},function(e,i){i===n.mapObject.GeocoderStatus.OK&&_.callbackAudit(t,{street:_.isSet(e[0].address_components[0])?e[0].address_components[0].long_name:null,city:_.isSet(e[0].address_components[1])?e[0].address_components[1].long_name:null,state:_.isSet(e[0].address_components[2])?e[0].address_components[2].long_name:null,country:_.isSet(e[0].address_components[3])?e[0].address_components[3].long_name:null})})},e.getLocationBySearch=function(e,t){this.geoCodeRequest({address:e},function(e,n){if(n==google.maps.GeocoderStatus.OK){var i=e[0].geometry.location;_.callbackAudit(t,{latitude:i.lat(),longitude:i.lng(),altitude:0})}})},e.drawRoute=function(e,t){var n=this;0==n.coordsCollection.length&&n.error(WARNING_GOOGLE_MAP.ERROR.NOROUTES),_.isFunction(e)&&(t=arguments[0]);var i=_.extend({path:n.coordsCollection,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2},e,!0);n.ruta=new n.mapObject.Polyline(i),n.ruta.setMap(n.mapa),n.appendRoute(n.ruta),_.callbackAudit(t,n.ruta)},e.appendRoute=function(e){this.routesCollection.push(e)},e.getRoutes=function(){return this.routesCollection},e.clearRoutes=function(){_.each(this.routesCollection,function(e){e.setMap(null)})},e.deleteRoutes=function(){this.routesCollection=[]},e.setTravelMode=function(e){var t=this;t.travelType=[{drive:t.mapObject.TravelMode.DRIVING,walk:t.mapObject.TravelMode.WALKING,bike:t.mapObject.TravelMode.BICYCLING,bus:t.mapObject.TravelMode.TRANSIT}[e]]||t.travelType},e.packDistances=function(e){var t=this,n=e.destinationAddresses,i=e.originAddresses,r=e.rows;for(var o in n){t.distanceCollection[o]={};for(var a in i)n[o]!=i[a]&&("OK"==r[o].elements[a].status?(t.distanceCollection[o][a]={},t.distanceCollection[o][a].from=n[o],t.distanceCollection[o][a].destiny=i[a],t.distanceCollection[o][a].distance=r[o].elements[a].distance.text,t.distanceCollection[o][a].time=r[o].elements[a].duration.text):t.distanceCollection[o]=!1)}return t.distanceCollection},e.getDistance=function(e,t,n){var i=this;(!e||_.isObject(e))&&i.error(WARNING_GOOGLE_MAP.ERROR.NODISTANCE),_.isFunction(t)&&(n=arguments[1]);var r=_.extend({origins:e,destinations:e,travelMode:i.travelType},t),o=!1;i.distance.getDistanceMatrix(r,function(e,t){"OK"==t&&(o=i.packDistances(e)),n&&n(o)})}};