var setting={processor:"",app_path:"/syrup/app",system_path:"/syrup/system",env:"development"};if(typeof exports!=="undefined")exports.setting=setting;"use strict";(function(windowGlobal){var nativeFunction=Function.prototype,nativeObject=Object.prototype,regexConstructor=/(([^function])([a-zA-z])+(?=\())/g,regexUrl=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,regexMail=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,WARNING_SYRUP={ERROR:{NOPARAM:"Param needed",NONETWORK:"Network Error",NOOBJECT:"An object param is needed.",NOARRAY:"An array necessary.",NOFUNCTION:"An function needed.",NODATE:"Invalid Date",NOSTRING:"String is required",NOPACK:"Error packing model",NOCALLBACK:"Callback error on execution time.",NOURL:"URL is required for the request.",NOHTML:"Html string is required",NOOBJECTREPLACEREGEXP:"A object replace param is needed to replace a regexp ex: {match:replace}"}};nativeObject.clone=function(){return _.extend({},this)};nativeFunction.blend=function(child){var name=child.prototype.constructor.name||child.toString().match(regexConstructor)[0].trim();this.prototype[name]=child};nativeFunction.factory=function(name){return new Function("return function "+name+"(){}")};nativeFunction.drop=function(child){var name=child.prototype.constructor.name||child.toString().match(regexConstructor)[0].trim();if(_[name]){_[name]=null;return true}return false};nativeFunction.add=function(name,fn){this.prototype[name.trim()]=fn};function Syrup(){this.recursiveStr=false}function _$_(){this.collection=null;this.exist=null;this.state=null}_$_.add("$",function(dom){var _tmp,_self=new _$_;if(_.isFunction(dom)){_$(document).ready(dom);return}if(_.isHtml(dom)){_tmp=document.createElement("div");_tmp.innerHTML=dom;_self.collection=_tmp.children.length>1?_tmp.children:_tmp.firstChild}else{_self.collection=!_.isObject(dom)&&_.isString(dom)?dom.indexOf("+")>-1?document.querySelectorAll(_.replace(dom,"+",_.emptyStr)):document.querySelector(dom):dom}_self.exist=_.isSet(_self.collection);_self.name=dom;return _self});_$_.add("fn",function(name,fn){return this.__proto__[name]=fn});_$_.add("ready",function(callback){var _self=this;if(_.isGlobal(_self.collection))_self.collection.addEventListener("DOMContentLoaded",callback);return this});_$_.add("load",function(callback){var _self=this;if(_.isGlobal(_self.collection)){_self.collection.onload=callback}});_$_.add("listen",function(event,delegate,callback){if(_.isFunction(delegate)){callback=delegate}var _self=this,_target=null,_event=function(e){e=e||windowGlobal.event;_target=event.srcElement||e.target;if(_.isSet(delegate)&&!_.isFunction(delegate)){_$(_target).filter(delegate,function(){_.callbackAudit(callback,e)})}else{_.callbackAudit(callback,e)}};_self.each(function(elem){if(elem.addEventListener){elem.addEventListener(event,_event,true)}else if(elem.attachEvent){elem.attachEvent("on"+event,_event)}if(!_.isSet(elem["listListener"])){elem["listListener"]={}}elem.listListener[event]=_event});return this});_$_.add("unlisten",function(event){return this.each(function(elem){if(_.isSet(elem.listListener)){if(event in elem.listListener){if(elem.removeEventListener){elem.removeEventListener(event,elem.listListener[event],true)}else if(elem.detachEvent){elem.detachEvent("on"+event,elem.listListener[event])}delete elem.listListener[event]}}})});_$_.add("filter",function(filter,callback,e_handler){return this.each(function(elem){var match=elem.matchesSelector||elem.webkitMatchesSelector||elem.mozMatchesSelector||elem.oMatchesSelector||elem.msMatchesSelector;if(match.call(elem,filter)){_.callbackAudit(callback,_$(elem))}else if(_.isFunction(e_handler)){_.callbackAudit(e_handler,_$(elem))}})});_$_.add("empty",function(){return this.each(function(v){v.innerHTML=_.emptyStr})});_$_.add("clone",function(childs){childs=_.isSet(childs);var _clones=[];this.each(function(v){_clones.push(_$(v.cloneNode(childs)))});return _.specArray(_clones)});_$_.add("data",function(name,value){var _self=this,_data_set,_values=[];_self.each(function(dom,i){_data_set=dom.dataset;if(_.isSet(value)||_.isNumber(value)){_data_set[name]=_.isArray(value)?value[i]:value}else if(_.isSet(_data_set[name])){_values.push(_data_set[name])}});return _.specArray(_values)});_$_.add("prop",function(_prop){var _props=[];this.each(function(v){if(_.isString(_prop)){_props.push(v[_prop])}else{_.each(_prop,function(value,index){v[index]=value})}});return _.isString(_prop)?_.specArray(_props):this});_$_.add("attr",function(attr){var _attr=[];this.each(function(v){if(_.isString(attr)){_attr.push(v.getAttribute(attr))}else{_.each(attr,function(value,index){v.setAttribute(index,value)})}});return _.isString(attr)?_.specArray(_attr):this});_$_.add("removeAttr",function(attr){return this.each(function(v){if(v[attr]){v[attr]=false}else{v.removeAttr(attr)}})});_$_.add("css",function(css){var _css=[],_self=this;_self.each(function(dom){if(_.isString(css)){var _style=windowGlobal.getComputedStyle(dom,null);_css.push(_style.getPropertyValue(css))}else{_.each(css,function(value,index){dom.style[index]=value})}});return _.isString(css)?_.specArray(_css):this});_$_.add("after",function(elem){if(_.isHtml(elem)||!_.is$(elem)){elem=_$(elem)}return this.each(function(obj){elem.each(function(v){obj.parentNode.insertBefore(v,obj.nextSibling)})})});_$_.add("before",function(elem){if(_.isHtml(elem)||!_.is$(elem)){elem=_$(elem)}return this.each(function(obj){elem.each(function(v){obj.parentNode.insertBefore(v,obj)})})});_$_.add("append",function(childs){if(_.isHtml(childs)||!_.is$(childs)){childs=_$(childs)}return this.each(function(p){childs.each(function(elm){p.appendChild(elm)})})});_$_.add("prepend",function(childs){if(_.isHtml(childs)||!_.is$(childs)){childs=_$(childs)}return this.each(function(p){childs.each(function(elm){p.insertBefore(elm,p.firstChild)})})});_$_.add("html",function(html){if(_.isHtml(html)||_.isString(html)){this.prop({innerHTML:html})}else{return this.prop("innerHTML")}return this});_$_.add("text",function(text){if(_.isString(text)){this.prop({textContent:text})}else{return this.prop("textContent")}return this});_$_.add("val",function(text){if(_.isString(text)){this.prop({value:text})}else{return this.prop("value")}return this});_$_.add("hide",function(){return this.each(function(_elem){_elem.style.display="none"})});_$_.add("show",function(){return this.each(function(_elem){_elem.style.display="block"})});_$_.add("parent",function(callback){return this.each(function(_elem){if(_elem.parentNode)_.callbackAudit(callback,_$(_elem.parentNode))})});_$_.add("children",function(callback){return this.each(function(_elem){if(_elem.children.length>0){_.each(_elem.children,function(v,i){if(_.isNumber(i))_.callbackAudit(callback,_$(v))})}})});_$_.add("next",function(callback){return this.each(function(_elem){_.callbackAudit(callback,_$(_elem.nextElementSibling))})});_$_.add("nexts",function(filter,callback){var _sibling=null;callback=_.isFunction(filter)?filter:callback;return this.next(function(elem){_sibling=elem;do{if(_.isSet(filter)&&!_.isFunction(filter)){_sibling.filter(filter,function(elem){_.callbackAudit(callback,elem)})}else{_.callbackAudit(callback,_sibling)}}while((_sibling=_$(_sibling.get(0).nextElementSibling)).exist)})});_$_.add("trigger",function(event,callback){var _event=new CustomEvent(event,{bubbles:true,cancelable:true});if(document.createEvent){_event=document.createEvent("Event");_event.initEvent(event,true,false)}this.each(function(v){v.dispatchEvent(_event)});_.callbackAudit(callback,_event);return this});_$_.add("find",function(filter,callback){return this.children(function(elem){elem.filter(filter,function(e){_.callbackAudit(callback,e,filter)},function(){elem.find(filter,callback)})})});_$_.add("parents",function(parent_class,callback){return this.each(function(_elem){_$(_elem).parent(function(_parent){_parent.filter(parent_class,function(parent){_.callbackAudit(callback,parent)},function(){_parent.parents(parent_class,callback)})})})});_$_.add("hasClass",function(cls){_.assert(cls,WARNING_SYRUP.ERROR.NOPARAM);var elem=this.get(0);if(_.isSet(elem.classList)){if(Array.prototype.indexOf.call(elem.classList,cls)>-1){return true}}return false});_$_.add("addClass",function(cls){return this.each(function(elem){if(!_$(elem).hasClass(cls)){if(elem.classList){elem.classList.add(cls)}else{elem.className+=" "+cls}}})});_$_.add("toggleClass",function(cls){return this.each(function(elem){elem.classList.toggle(cls)})});_$_.add("removeClass",function(cls){return this.each(function(elem){if(_$(elem).hasClass(cls)){if(elem.classList){elem.classList.remove(cls)}else{elem.className=_.replace(elem.className,new RegExp(cls,"g"),_.emptyStr)}}})});_$_.add("fadeOut",function(delay,callback){this.animate([{opacity:"1"},{opacity:"0"}],{delay:0,duration:_.isNumber(delay)?delay:50},_.isFunction(delay)?delay:callback);return this});_$_.add("fadeIn",function(delay,callback){this.animate([{opacity:"0"},{opacity:"1"}],{delay:0,duration:_.isNumber(delay)?delay:50},_.isFunction(delay)?delay:callback);return this});_$_.add("height",function(height){if(_.isSet(height)){return this.css({height:_.isNumber(height)?height+"px":height})}var _height=[];this.each(function(elem){_height.push(_.cartesianPlane(elem).height)});return _.specArray(_height)});_$_.add("width",function(width){if(_.isSet(width)){return this.css({width:_.isNumber(width)?width+"px":width})}var _width=[];this.each(function(elem){_width.push(_.cartesianPlane(elem).width)});return _.specArray(_width)});_$_.add("is",function(context){_.assert(context,WARNING_SYRUP.ERROR.NOPARAM);var v=this.get(0),_return=false;_$(v).filter(context,function(){_return=true},function(){_return=v[context]||v["type"]===context});return _return});_$_.add("get",function(find){if(_.objectAsString(this.collection)=="[object NodeList]"&&_.isNumber(find)){if(_.isSet(this.collection[find]))return this.collection[find]}return this.collection});_$_.add("remove",function(){return this.each(function(v){if(v.remove){v.remove()}else{v.parentNode.removeChild(v)}})});_$_.add("each",function(callback){var _element=this.collection;if(_.isSet(_element.childNodes)||_.isGlobal(_element)){_.callbackAudit(callback,_element,0)}else{_.each(_element,function(v,i,p){if(_.isObject(v)&&_.isSet(v)){_.callbackAudit(callback,v,i,p)}})}return this});_$_.add("offset",function(_object){var _offset=[];this.each(function(elem){var _cartesian=_.cartesianPlane(elem);if(_.isObject(_object)){if(_.isSet(_object.top))elem.style.top=_.isNumber(_object.top)?_object.top+"px":_object.top;if(_.isSet(_object.left))elem.style.left=_.isNumber(_object.left)?_object.left+"px":_object.left;if(_.isSet(_object.bottom))elem.style.bottom=_.isNumber(_object.bottom)?_object.bottom+"px":_object.bottom;if(_.isSet(_object.right))elem.style.right=_.isNumber(_object.right)?_object.right+"px":_object.right}_offset.push({top:_cartesian.top,left:_cartesian.left,bottom:_cartesian.bottom,right:_cartesian.right})});return _.specArray(_offset)});_$_.add("sort",function(_prop,_desc){if(_.isBoolean(_prop)){_desc=arguments[0];_prop=false}_desc=!_desc?1:-1;_prop=_prop?_prop:"innerHTML";return _.toArray(this.collection).sort(function(a,b){var _a=_$(a).attr(_prop)||_$(a).prop(_prop),_b=_$(b).attr(_prop)||_$(b).prop(_prop);if(_.isSet(_a)&&_.isSet(_b)){a=!isNaN(+_a)?+_a:_a.toLowerCase();b=!isNaN(+_b)?+_b:_b.toLowerCase()}return a>b?_desc:_desc*-1})});_$_.add("animate",function(prop,conf,callback){return this.each(function(elem){if(_.isSet(elem.animate)){if(_.isFunction(conf))callback=conf;conf=!_.isObject(conf)&&!_.isNumber(conf)?{}:conf;conf.iterations=_.isSet(conf.iterations)?conf.iterations:1;conf.duration=_.isSet(conf.duration)?conf.duration:1e3;conf.delay=_.isSet(conf.delay)?conf.delay:300;var _animation=elem.animate(prop,conf);_animation.addEventListener("finish",function(){_.callbackAudit(callback,_$(elem))})}})});_$_.add("object",function(){return this.collection});Syrup.add("noConflict",function(){return _$});Syrup.add("assert",function(obj,msg){if(!_.isSet(obj)){_.error(_.isSet(msg)?msg:"Param needed")}return this});Syrup.add("isArray",function(obj){return _.objectAsString(obj)==="[object Array]"});Syrup.add("isObject",function(obj){return _.objectAsString(obj)==="[object Object]"||typeof obj==="object"&&_.objectAsString(obj)!=="[object Null]"});Syrup.add("isGlobal",function(obj){return _.objectAsString(obj)==="[object global]"||_.objectAsString(obj)==="[object Window]"||_.objectAsString(obj)==="[object HTMLDocument]"||_.objectAsString(obj)==="[object Document]"});Syrup.add("is$",function(obj){return obj instanceof _$_});Syrup.add("isFormData",function(obj){return _.objectAsString(obj)==="[object FormData]"});Syrup.add("isString",function(obj){return _.objectAsString(obj)==="[object String]"});Syrup.add("isFunction",function(obj){return _.objectAsString(obj)==="[object Function]"});Syrup.add("isHtml",function(html){return/(<([^>]+)>)/gi.test(html)});Syrup.add("isBoolean",function(bool){return this.objectAsString(bool)==="[object Boolean]"});Syrup.add("isRegexp",function(regex){return this.objectAsString(regex)==="[object RegExp]"});Syrup.add("isSet",function(elm){return typeof elm!=="undefined"&&elm!==null&&!!elm});Syrup.add("isEmpty",function(input){if(_.isArray(input)){return input.length===0}return!input||input===_.emptyStr||/^\s+$/.test(input)});Syrup.add("isUrl",function(url){return regexUrl.test(url)});Syrup.add("isMail",function(mail){return regexMail.test(mail)});Syrup.add("isJson",function(str){try{JSON.parse(str)}catch(e){return false}return true});Syrup.add("isNumber",function(number){return!isNaN(number)});Syrup.add("warning",function(msg){var date=_.getDate(false);console.log(date.hour+":"+date.minutes+":"+date.seconds+" "+date.meridian+" -> "+msg)});Syrup.add("error",function(msg){var date=_.getDate(false);throw date.hour+":"+date.minutes+":"+date.seconds+" "+date.meridian+" -> "+msg});Syrup.add("htmlEntities",function(str){var match={"<":"&lt",">":"&gt;",'"':"&quot;","'":"&#39;","&":"&amp;"};return _.replace(str,/<|>|&|"|'/g,match)});Syrup.add("splitString",function(str,match){if(str.indexOf(match)>-1){return str.split(match)}return str});Syrup.add("truncateString",function(string,limit){return _.toObject(string).slice(0,limit)});Syrup.add("replace",function(_string,_find,_replace){var o=_string.toString(),s=o.toLowerCase(),r=_.emptyStr,b=0,e=1,_tmp;if(!_.isRegexp(_find)){_find=_find.toLowerCase()}else{_find=o.match(_find);this.recursiveStr=s}if(_.isArray(_find)){if(_.isObject(_replace)){if(_find.length>0){_tmp=_find.pop();this.recursiveStr=_.replace(this.recursiveStr,_tmp,_replace[_tmp])}}else{_.error(WARNING_SYRUP.ERROR.NOOBJECTREPLACEREGEXP)}}else{while((e=s.indexOf(_find))>-1){r+=o.substring(b,b+e)+_replace;s=s.substring(e+_find.length,s.length);b+=e+_find.length}if(!_.isEmpty(s)>0){r+=o.substring(o.length-s.length,o.length)}if(!_.isEmpty(r)){this.recursiveStr=r}}return this.recursiveStr});Syrup.add("getDate",function(fecha){var _fecha=new Date,meridiano_,mes_=["January","February","March","April","May","June","July","August","September","October","November","December"],minutos_=_fecha.getMinutes(),hora_=_fecha.getHours(),segundos_=_fecha.getSeconds(),dia_=_fecha.getDate();_fecha=_.isSet(fecha)?new Date(fecha):_fecha;if(_fecha==="Invalid Date"){_.error(_fecha)}dia_=dia_<10?"0"+dia_:dia_;meridiano_=hora_>12?"PM":"AM";hora_=hora_>12?hora_-12===0?12:hora_-12:hora_<10?"0"+hora_:hora_;minutos_=minutos_<10?"0"+minutos_:minutos_;segundos_=segundos_<10?"0"+segundos_:segundos_;return{day:dia_,month:mes_[_fecha.getMonth()],year:_fecha.getFullYear(),hour:hora_,minutes:minutos_,seconds:segundos_,meridian:meridiano_}});Syrup.add("getNav",function(){var _regex=/(?:trident\/(?=\w.+rv:)|(?:chrome\/|firefox\/|opera\/|msie\s|safari\/))[\w.]{1,4}/,_matches=_.nav.local.match(_regex),_split=_.isSet(_matches)?_matches[0].split("/"):false;return _split?{nav:!!_split[0]?_.replace(_split[0],"trident","msie"):false,version:!!_split[1]?_split[1]:false,platform:windowGlobal.navigator.platform.toLocaleLowerCase()}:false});Syrup.add("getEncodedId",function(longitud){var _text=_.emptyStr,_longitud=!!longitud?longitud:5,_possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789=_";for(var i=0;i<_longitud;i++)_text+=_possible.charAt(Math.floor(Math.random()*_possible.length));return _text});Syrup.add("getObjectKeys",function(obj){if(_.isObject(obj)){return Object.keys(obj)}return[]});Syrup.add("getObjectSize",function(obj){if(_.isObject(obj)){return _.getObjectKeys(obj).length}return 0});Syrup.add("getObjectValues",function(obj){if(_.isObject(obj)){return _.getObjectKeys(obj).map(function(k){return obj[k]})}return[]});Syrup.add("objectAsString",function(obj){return nativeObject.toString.call(obj)});Syrup.add("objectImmutable",function(obj){if(_.isObject(obj))return Object.freeze(obj);return obj});Syrup.add("objectWatch",function(obj,callback,conf){if(_.isObject(obj)&&_.isSet(callback))Object.observe(obj,callback,conf?conf:[]);return obj});Syrup.add("interval",function(callback,conf){var _worker=new Workers;_worker.set("/workers/setting/Interval").then(function(_worker){_worker.send(conf);_worker.on("message",function(e){_.callbackAudit(callback,e.data)})});return _worker});Syrup.add("requestAnimationFrame",function(callback){return(windowGlobal.requestAnimationFrame||windowGlobal.webkitRequestAnimationFrame||windowGlobal.mozRequestAnimationFrame||function(call){windowGlobal.setTimeout(call,1e3/60)})(callback)});Syrup.add("getCookie",function(name){var _mcookie=document.cookie,_cookie=null;if(!!_mcookie&&_mcookie!==_.emptyStr){var cookies=_mcookie.split(";");_.each(cookies,function(cookie){cookie=cookie.split("=");var _pre=cookie[0].trim(),_pos=cookie[1].trim();if(_pre===name){_cookie=_pos;return false}})}return _cookie});Syrup.add("simplifyDirectory",function(slashDir){if(_.isString(slashDir)){return slashDir.split("/").join(".")}return slashDir});Syrup.add("dotDirectory",function(dotDir){if(_.isString(dotDir)){return dotDir.split(".").join("/")}return dotDir});Syrup.add("jsonToQueryString",function(_object){var _return=_.emptyStr,_size=_.isObject(_object)?_.getObjectSize(_object):0;_.each(_object,function(value,key){_return+=encodeURI(key+"="+value);if(_size>1){_return+="&"}});return _return.lastIndexOf("&")>-1?_return.slice(0,-1):_return});Syrup.add("jsonToString",function(json){if(_.isObject(json))return JSON.stringify(json);return null});Syrup.add("getScript",function(url,callback){var _script=document.createElement("script"),_body=document.body,_loaded=function(){_$(_script).remove();_.callbackAudit(callback)};if(_.isSet(_script.readyState)){_script.addEventListener("readystatechange",function(){if(_script.readyState=="loaded"||_script.readyState=="complete"){_loaded()}},false)}else{_script.addEventListener("load",_loaded,false)}_script.src=url;_script.async=true;_body.appendChild(_script)});Syrup.add("each",function(_object,callback){var _p={first:false,last:false};if(_.isArray(_object)){var i=0,max=_object.length;for(;i<max;i++){_p.first=i===0;_p.last=i+1===max;_.callbackAudit(callback,_object[i],i,_p)}}else{if(_.isObject(_object)){var _keys=Object.keys(_object),_tmp,_i=_tmp=_keys.length;while(_i--){_p.first=_i+1===_tmp;_p.last=_i===0;_.callbackAudit(callback,_object[_keys[_i]],_keys[_i],_p)}}}return this});Syrup.add("cartesianPlane",function(_dom,all){_dom=_.is$(_dom)?_$(_dom).object():_dom;if(_.isGlobal(_dom)){return{top:_dom.pageYOffset,left:_dom.pageXOffset,width:_dom.outerWidth,height:_dom.outerHeight}}return!!all?_dom.getClientRects():_dom.getBoundingClientRect()});Syrup.add("callbackAudit",function(callback){try{if(!_.isSet(callback)){return false}var _args=_.toArray(arguments);_args=_.filterArray(_args,function(v,i){return!_.isFunction(v)});callback.apply(null,_args.length>0?_args:null)}catch(e){_.error(e)}return true});Syrup.add("compactArray",function(arr){return _.filterArray(arr,function(i){return!!i?i:false})});Syrup.add("specArray",function(arr){if(!_.isArray(arr)){_.error(WARNING_SYRUP.ERROR.NOARRAY)}return arr.length>1?arr:_.isSet(arr[0])?arr[0]:null});Syrup.add("repeatString",function(str,times){return Array(times+1).join(str)});Syrup.add("filterArray",function(array,filter){return array.filter(filter)});Syrup.add("inObject",function(needle,haystack){var _exist=false;_.each(haystack,function(v,i){if(_.isObject(v)){_exist=_.inObject(needle,v);if(_exist){return false}}else{if(v===needle){_exist=i;return false}}});return _exist===0?true:_exist});Syrup.add("matchInArray",function(find,haystack){var needle=new RegExp(haystack.join("|"),"g");return needle.test(find)});Syrup.add("uniqueArray",function(array){var _new=[];return array.filter(function(v){if(_new.indexOf(v)==-1){_new.push(v);return v}})});Syrup.add("toArray",function(element){if(_.isObject(element)){return[].slice.apply(element)}else if(_.isString(element)){return _.toObject(element)}});Syrup.add("toString",function(element){if(_.isObject(element))return JSON.stringify(element)});Syrup.add("toObject",function(element){if(_.isJson(element))return JSON.parse(element);if(_.isString(element))return nativeObject.valueOf.call(element);if(!_.isArray(element))_.error(WARNING_SYRUP.ERROR.NOARRAY);return element.reduce(function(o,v,i){o[i]=v;return o},{})});Syrup.add("objectDistribute",function(obj,index){var _new={};if(!_.isObject(obj[index])){_new[obj[index]]=obj}else{_.each(obj[index],function(v,i){_new[v]={};_.each(obj,function(r,j){if(j!==index){_new[v][j].push(r[i])}})})}return _new});Syrup.add("getElementIndex",function(node){var i=1,prop=document.body.previousElementSibling?"previousElementSibling":"previousSibling";while(node=node[prop]){++i}return i});Syrup.add("extend",function(target,source,overwrite){if(!_.isObject(target)||!source){return target}if(_.isFunction(source)){source=new source;target=target.__proto__}_.each(source,function(v,i){if(!target.hasOwnProperty(i)||_.isSet(overwrite)){target[i]=v}});return target});windowGlobal._=function(){return new Syrup}();_.VERSION="1.1";_.$fn=_$_;_.emptyStr="";_.Syrup=Syrup;_.WARNING_SYRUP=WARNING_SYRUP;_.nav={};_.nav.unsupported=!windowGlobal.localStorage||!windowGlobal.File||!windowGlobal.FileReader||!windowGlobal.FileList||!windowGlobal.Blob||!windowGlobal.Worker||!windowGlobal.WebSocket;_.nav.cookies=windowGlobal.navigator.cookieEnabled;_.nav.javascript=windowGlobal.navigator.javaEnabled();_.nav.online=windowGlobal.navigator.onLine;_.nav.local=windowGlobal.navigator.userAgent.toLowerCase();windowGlobal._$=function(){return(new _$_).$}()})(window);if(!Object.observe){(function(extend,global){"use strict";var isCallable=function(toString){var s=toString.call(toString),u=typeof u;return typeof global.alert==="object"?function isCallable(f){return s===toString.call(f)||!!f&&typeof f.toString==u&&typeof f.valueOf==u&&/^\s*\bfunction\b/.test(""+f)}:function isCallable(f){return s===toString.call(f)}}(extend.prototype.toString);var isNode=function isNode(o){return typeof Node==="object"?o instanceof Node:o&&typeof o==="object"&&typeof o.nodeType==="number"&&typeof o.nodeName==="string"};var isElement=function isElement(o){return typeof HTMLElement==="object"?o instanceof HTMLElement:o&&typeof o==="object"&&o!==null&&o.nodeType===1&&typeof o.nodeName==="string"};var _isImmediateSupported=function(){return!!global.setImmediate}();var _doCheckCallback=function(){if(_isImmediateSupported){return function _doCheckCallback(f){return setImmediate(f)}}else{return function _doCheckCallback(f){return setTimeout(f,10)}}}();var _clearCheckCallback=function(){if(_isImmediateSupported){return function _clearCheckCallback(id){clearImmediate(id)}}else{return function _clearCheckCallback(id){clearTimeout(id)}}}();var isNumeric=function isNumeric(n){return!isNaN(parseFloat(n))&&isFinite(n)};var sameValue=function sameValue(x,y){if(x===y){return x!==0||1/x===1/y}return x!==x&&y!==y};var isAccessorDescriptor=function isAccessorDescriptor(desc){if(typeof desc==="undefined"){return false}return"get"in desc||"set"in desc};var isDataDescriptor=function isDataDescriptor(desc){if(typeof desc==="undefined"){return false}return"value"in desc||"writable"in desc};var validateArguments=function validateArguments(O,callback,accept){if(typeof O!=="object"){throw new TypeError("Object.observeObject called on non-object")}if(isCallable(callback)===false){throw new TypeError("Object.observeObject: Expecting function")}if(Object.isFrozen(callback)===true){throw new TypeError("Object.observeObject: Expecting unfrozen function")}if(accept!==undefined){if(!Array.isArray(accept)){throw new TypeError("Object.observeObject: Expecting acceptList in the form of an array")}}};var Observer=function Observer(){var wraped=[];var Observer=function Observer(O,callback,accept){validateArguments(O,callback,accept);if(!accept){accept=["add","update","delete","reconfigure","setPrototype","preventExtensions"]}Object.getNotifier(O).addListener(callback,accept);if(wraped.indexOf(O)===-1){wraped.push(O)}else{Object.getNotifier(O)._checkPropertyListing()}};Observer.prototype.deliverChangeRecords=function Observer_deliverChangeRecords(O){Object.getNotifier(O).deliverChangeRecords()};wraped.lastScanned=0;var f=function f(wrapped){return function _f(){var i=0,l=wrapped.length,startTime=new Date,takingTooLong=false;for(i=wrapped.lastScanned;i<l&&!takingTooLong;i++){if(_indexes.indexOf(wrapped[i])>-1){Object.getNotifier(wrapped[i])._checkPropertyListing();takingTooLong=new Date-startTime>100}else{wrapped.splice(i,1);i--;l--}}wrapped.lastScanned=i<l?i:0;_doCheckCallback(_f)}}(wraped);_doCheckCallback(f);return Observer}();var Notifier=function Notifier(watching){var _listeners=[],_acceptLists=[],_updates=[],_updater=false,properties=[],values=[];var self=this;Object.defineProperty(self,"_watching",{enumerable:true,get:function(watched){return function(){return watched}}(watching)});var wrapProperty=function wrapProperty(object,prop){var propType=typeof object[prop],descriptor=Object.getOwnPropertyDescriptor(object,prop);if(prop==="getNotifier"||isAccessorDescriptor(descriptor)||!descriptor.enumerable){return false}if(object instanceof Array&&isNumeric(prop)){var idx=properties.length;properties[idx]=prop;values[idx]=object[prop];return true}(function(idx,prop){properties[idx]=prop;values[idx]=object[prop];function getter(){return values[getter.info.idx]}function setter(value){if(!sameValue(values[setter.info.idx],value)){Object.getNotifier(object).queueUpdate(object,prop,"update",values[setter.info.idx]);values[setter.info.idx]=value}}getter.info=setter.info={idx:idx};Object.defineProperty(object,prop,{get:getter,set:setter})})(properties.length,prop);return true};self._checkPropertyListing=function _checkPropertyListing(dontQueueUpdates){var object=self._watching,keys=Object.keys(object),i=0,l=keys.length;var newKeys=[],oldKeys=properties.slice(0),updates=[];var prop,queueUpdates=!dontQueueUpdates,propType,value,idx,aLength;if(object instanceof Array){aLength=self._oldLength}for(i=0;i<l;i++){prop=keys[i];value=object[prop];propType=typeof value;if((idx=properties.indexOf(prop))===-1){if(wrapProperty(object,prop)&&queueUpdates){self.queueUpdate(object,prop,"add",null,object[prop])}}else{if(!(object instanceof Array)||isNumeric(prop)){if(values[idx]!==value){if(queueUpdates){self.queueUpdate(object,prop,"update",values[idx],value)}values[idx]=value}}oldKeys.splice(oldKeys.indexOf(prop),1)}}if(object instanceof Array&&object.length!==aLength){if(queueUpdates){self.queueUpdate(object,"length","update",aLength,object)}self._oldLength=object.length}if(queueUpdates){l=oldKeys.length;for(i=0;i<l;i++){idx=properties.indexOf(oldKeys[i]);self.queueUpdate(object,oldKeys[i],"delete",values[idx]);properties.splice(idx,1);values.splice(idx,1);for(var i=idx;i<properties.length;i++){if(!(properties[i]in object))continue;var getter=Object.getOwnPropertyDescriptor(object,properties[i]).get;if(!getter)continue;var info=getter.info;info.idx=i}}}};self.addListener=function Notifier_addListener(callback,accept){var idx=_listeners.indexOf(callback);if(idx===-1){_listeners.push(callback);_acceptLists.push(accept)}else{_acceptLists[idx]=accept}};self.removeListener=function Notifier_removeListener(callback){var idx=_listeners.indexOf(callback);if(idx>-1){_listeners.splice(idx,1);_acceptLists.splice(idx,1)}};self.listeners=function Notifier_listeners(){return _listeners};self.queueUpdate=function Notifier_queueUpdate(what,prop,type,was){this.queueUpdates([{type:type,object:what,name:prop,oldValue:was}])};self.queueUpdates=function Notifier_queueUpdates(updates){var self=this,i=0,l=updates.length||0,update;for(i=0;i<l;i++){update=updates[i];_updates.push(update)}if(_updater){_clearCheckCallback(_updater)}_updater=_doCheckCallback(function(){_updater=false;self.deliverChangeRecords()})};self.deliverChangeRecords=function Notifier_deliverChangeRecords(){var i=0,l=_listeners.length,retval;for(i=0;i<l;i++){if(_listeners[i]){var currentUpdates;if(_acceptLists[i]){currentUpdates=[];for(var j=0,updatesLength=_updates.length;j<updatesLength;j++){if(_acceptLists[i].indexOf(_updates[j].type)!==-1){currentUpdates.push(_updates[j])}}}else{currentUpdates=_updates}if(currentUpdates.length){if(_listeners[i]===console.log){console.log(currentUpdates)}else{_listeners[i](currentUpdates)}}}}_updates=[]};self.notify=function Notifier_notify(changeRecord){if(typeof changeRecord!=="object"||typeof changeRecord.type!=="string"){throw new TypeError("Invalid changeRecord with non-string 'type' property")}changeRecord.object=watching;self.queueUpdates([changeRecord])};self._checkPropertyListing(true)};var _notifiers=[],_indexes=[];extend.getNotifier=function Object_getNotifier(O){var idx=_indexes.indexOf(O),notifier=idx>-1?_notifiers[idx]:false;if(!notifier){idx=_indexes.length;_indexes[idx]=O;notifier=_notifiers[idx]=new Notifier(O)}return notifier};extend.observe=function Object_observe(O,callback,accept){if(!isElement(O)){return new Observer(O,callback,accept)}};extend.unobserve=function Object_unobserve(O,callback){validateArguments(O,callback);var idx=_indexes.indexOf(O),notifier=idx>-1?_notifiers[idx]:false;if(!notifier){return}notifier.removeListener(callback);if(notifier.listeners().length===0){_indexes.splice(idx,1);_notifiers.splice(idx,1)}}})(Object,this)}function Required(){var requirejs,require,define;(function(global){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.20",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,isBrowser=!!(typeof window!=="undefined"&&typeof navigator!=="undefined"&&window.document),isWebWorker=!isBrowser&&typeof importScripts!=="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!=="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=false;

function isFunction(it){return ostring.call(it)==="[object Function]"}function isArray(it){return ostring.call(it)==="[object Array]"}function each(ary,func){if(ary){var i;for(i=0;i<ary.length;i+=1){if(ary[i]&&func(ary[i],i,ary)){break}}}}function eachReverse(ary,func){if(ary){var i;for(i=ary.length-1;i>-1;i-=1){if(ary[i]&&func(ary[i],i,ary)){break}}}}function hasProp(obj,prop){return hasOwn.call(obj,prop)}function getOwn(obj,prop){return hasProp(obj,prop)&&obj[prop]}function eachProp(obj,func){var prop;for(prop in obj){if(hasProp(obj,prop)){if(func(obj[prop],prop)){break}}}}function mixin(target,source,force,deepStringMixin){if(source){eachProp(source,function(value,prop){if(force||!hasProp(target,prop)){if(deepStringMixin&&typeof value==="object"&&value&&!isArray(value)&&!isFunction(value)&&!(value instanceof RegExp)){if(!target[prop]){target[prop]={}}mixin(target[prop],value,force,deepStringMixin)}else{target[prop]=value}}})}return target}function bind(obj,fn){return function(){return fn.apply(obj,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(err){throw err}function getGlobal(value){if(!value){return value}var g=global;each(value.split("."),function(part){g=g[part]});return g}function makeError(id,msg,err,requireModules){var e=new Error(msg+"\nhttp://requirejs.org/docs/errors.html#"+id);e.requireType=id;e.requireModules=requireModules;if(err){e.originalError=err}return e}if(typeof define!=="undefined"){return}if(typeof requirejs!=="undefined"){if(isFunction(requirejs)){return}cfg=requirejs;requirejs=undefined}if(typeof require!=="undefined"&&!isFunction(require)){cfg=require;require=undefined}function newContext(contextName){var inCheckLoaded,Module,context,handlers,checkLoadedTimeoutId,config={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},registry={},enabledRegistry={},undefEvents={},defQueue=[],defined={},urlFetched={},bundlesMap={},requireCounter=1,unnormalizedCounter=1;function trimDots(ary){var i,part;for(i=0;i<ary.length;i++){part=ary[i];if(part==="."){ary.splice(i,1);i-=1}else if(part===".."){if(i===0||i===1&&ary[2]===".."||ary[i-1]===".."){continue}else if(i>0){ary.splice(i-1,2);i-=2}}}}function normalize(name,baseName,applyMap){var pkgMain,mapValue,nameParts,i,j,nameSegment,lastIndex,foundMap,foundI,foundStarMap,starI,normalizedBaseParts,baseParts=baseName&&baseName.split("/"),map=config.map,starMap=map&&map["*"];if(name){name=name.split("/");lastIndex=name.length-1;if(config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])){name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,"")}if(name[0].charAt(0)==="."&&baseParts){normalizedBaseParts=baseParts.slice(0,baseParts.length-1);name=normalizedBaseParts.concat(name)}trimDots(name);name=name.join("/")}if(applyMap&&map&&(baseParts||starMap)){nameParts=name.split("/");outerLoop:for(i=nameParts.length;i>0;i-=1){nameSegment=nameParts.slice(0,i).join("/");if(baseParts){for(j=baseParts.length;j>0;j-=1){mapValue=getOwn(map,baseParts.slice(0,j).join("/"));if(mapValue){mapValue=getOwn(mapValue,nameSegment);if(mapValue){foundMap=mapValue;foundI=i;break outerLoop}}}}if(!foundStarMap&&starMap&&getOwn(starMap,nameSegment)){foundStarMap=getOwn(starMap,nameSegment);starI=i}}if(!foundMap&&foundStarMap){foundMap=foundStarMap;foundI=starI}if(foundMap){nameParts.splice(0,foundI,foundMap);name=nameParts.join("/")}}pkgMain=getOwn(config.pkgs,name);return pkgMain?pkgMain:name}function removeScript(name){if(isBrowser){each(scripts(),function(scriptNode){if(scriptNode.getAttribute("data-requiremodule")===name&&scriptNode.getAttribute("data-requirecontext")===context.contextName){scriptNode.parentNode.removeChild(scriptNode);return true}})}}function hasPathFallback(id){var pathConfig=getOwn(config.paths,id);if(pathConfig&&isArray(pathConfig)&&pathConfig.length>1){pathConfig.shift();context.require.undef(id);context.makeRequire(null,{skipMap:true})([id]);return true}}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;if(index>-1){prefix=name.substring(0,index);name=name.substring(index+1,name.length)}return[prefix,name]}function makeModuleMap(name,parentModuleMap,isNormalized,applyMap){var url,pluginModule,suffix,nameParts,prefix=null,parentName=parentModuleMap?parentModuleMap.name:null,originalName=name,isDefine=true,normalizedName="";if(!name){isDefine=false;name="_@r"+(requireCounter+=1)}nameParts=splitPrefix(name);prefix=nameParts[0];name=nameParts[1];if(prefix){prefix=normalize(prefix,parentName,applyMap);pluginModule=getOwn(defined,prefix)}if(name){if(prefix){if(pluginModule&&pluginModule.normalize){normalizedName=pluginModule.normalize(name,function(name){return normalize(name,parentName,applyMap)})}else{normalizedName=name.indexOf("!")===-1?normalize(name,parentName,applyMap):name}}else{normalizedName=normalize(name,parentName,applyMap);nameParts=splitPrefix(normalizedName);prefix=nameParts[0];normalizedName=nameParts[1];isNormalized=true;url=context.nameToUrl(normalizedName)}}suffix=prefix&&!pluginModule&&!isNormalized?"_unnormalized"+(unnormalizedCounter+=1):"";return{prefix:prefix,name:normalizedName,parentMap:parentModuleMap,unnormalized:!!suffix,url:url,originalName:originalName,isDefine:isDefine,id:(prefix?prefix+"!"+normalizedName:normalizedName)+suffix}}function getModule(depMap){var id=depMap.id,mod=getOwn(registry,id);if(!mod){mod=registry[id]=new context.Module(depMap)}return mod}function on(depMap,name,fn){var id=depMap.id,mod=getOwn(registry,id);if(hasProp(defined,id)&&(!mod||mod.defineEmitComplete)){if(name==="defined"){fn(defined[id])}}else{mod=getModule(depMap);if(mod.error&&name==="error"){fn(mod.error)}else{mod.on(name,fn)}}}function onError(err,errback){var ids=err.requireModules,notified=false;if(errback){errback(err)}else{each(ids,function(id){var mod=getOwn(registry,id);if(mod){mod.error=err;if(mod.events.error){notified=true;mod.emit("error",err)}}});if(!notified){req.onError(err)}}}function takeGlobalQueue(){if(globalDefQueue.length){each(globalDefQueue,function(queueItem){var id=queueItem[0];if(typeof id==="string"){context.defQueueMap[id]=true}defQueue.push(queueItem)});globalDefQueue=[]}}handlers={require:function(mod){if(mod.require){return mod.require}else{return mod.require=context.makeRequire(mod.map)}},exports:function(mod){mod.usingExports=true;if(mod.map.isDefine){if(mod.exports){return defined[mod.map.id]=mod.exports}else{return mod.exports=defined[mod.map.id]={}}}},module:function(mod){if(mod.module){return mod.module}else{return mod.module={id:mod.map.id,uri:mod.map.url,config:function(){return getOwn(config.config,mod.map.id)||{}},exports:mod.exports||(mod.exports={})}}}};function cleanRegistry(id){delete registry[id];delete enabledRegistry[id]}function breakCycle(mod,traced,processed){var id=mod.map.id;if(mod.error){mod.emit("error",mod.error)}else{traced[id]=true;each(mod.depMaps,function(depMap,i){var depId=depMap.id,dep=getOwn(registry,depId);if(dep&&!mod.depMatched[i]&&!processed[depId]){if(getOwn(traced,depId)){mod.defineDep(i,defined[depId]);mod.check()}else{breakCycle(dep,traced,processed)}}});processed[id]=true}}function checkLoaded(){var err,usingPathFallback,waitInterval=config.waitSeconds*1e3,expired=waitInterval&&context.startTime+waitInterval<(new Date).getTime(),noLoads=[],reqCalls=[],stillLoading=false,needCycleCheck=true;if(inCheckLoaded){return}inCheckLoaded=true;eachProp(enabledRegistry,function(mod){var map=mod.map,modId=map.id;if(!mod.enabled){return}if(!map.isDefine){reqCalls.push(mod)}if(!mod.error){if(!mod.inited&&expired){if(hasPathFallback(modId)){usingPathFallback=true;stillLoading=true}else{noLoads.push(modId);removeScript(modId)}}else if(!mod.inited&&mod.fetched&&map.isDefine){stillLoading=true;if(!map.prefix){return needCycleCheck=false}}}});if(expired&&noLoads.length){err=makeError("timeout","Load timeout for modules: "+noLoads,null,noLoads);err.contextName=context.contextName;return onError(err)}if(needCycleCheck){each(reqCalls,function(mod){breakCycle(mod,{},{})})}if((!expired||usingPathFallback)&&stillLoading){if((isBrowser||isWebWorker)&&!checkLoadedTimeoutId){checkLoadedTimeoutId=setTimeout(function(){checkLoadedTimeoutId=0;checkLoaded()},50)}}inCheckLoaded=false}Module=function(map){this.events=getOwn(undefEvents,map.id)||{};this.map=map;this.shim=getOwn(config.shim,map.id);this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};Module.prototype={init:function(depMaps,factory,errback,options){options=options||{};if(this.inited){return}this.factory=factory;if(errback){this.on("error",errback)}else if(this.events.error){errback=bind(this,function(err){this.emit("error",err)})}this.depMaps=depMaps&&depMaps.slice(0);this.errback=errback;this.inited=true;this.ignore=options.ignore;if(options.enabled||this.enabled){this.enable()}else{this.check()}},defineDep:function(i,depExports){if(!this.depMatched[i]){this.depMatched[i]=true;this.depCount-=1;this.depExports[i]=depExports}},fetch:function(){if(this.fetched){return}this.fetched=true;context.startTime=(new Date).getTime();var map=this.map;if(this.shim){context.makeRequire(this.map,{enableBuildCallback:true})(this.shim.deps||[],bind(this,function(){return map.prefix?this.callPlugin():this.load()}))}else{return map.prefix?this.callPlugin():this.load()}},load:function(){var url=this.map.url;if(!urlFetched[url]){urlFetched[url]=true;context.load(this.map.id,url)}},check:function(){if(!this.enabled||this.enabling){return}var err,cjsModule,id=this.map.id,depExports=this.depExports,exports=this.exports,factory=this.factory;if(!this.inited){if(!hasProp(context.defQueueMap,id)){this.fetch()}}else if(this.error){this.emit("error",this.error)}else if(!this.defining){this.defining=true;if(this.depCount<1&&!this.defined){if(isFunction(factory)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError){try{exports=context.execCb(id,factory,depExports,exports)}catch(e){err=e}}else{exports=context.execCb(id,factory,depExports,exports)}if(this.map.isDefine&&exports===undefined){cjsModule=this.module;if(cjsModule){exports=cjsModule.exports}else if(this.usingExports){exports=this.exports}}if(err){err.requireMap=this.map;err.requireModules=this.map.isDefine?[this.map.id]:null;err.requireType=this.map.isDefine?"define":"require";return onError(this.error=err)}}else{exports=factory}this.exports=exports;if(this.map.isDefine&&!this.ignore){defined[id]=exports;if(req.onResourceLoad){req.onResourceLoad(context,this.map,this.depMaps)}}cleanRegistry(id);this.defined=true}this.defining=false;if(this.defined&&!this.defineEmitted){this.defineEmitted=true;this.emit("defined",this.exports);this.defineEmitComplete=true}}},callPlugin:function(){var map=this.map,id=map.id,pluginMap=makeModuleMap(map.prefix);this.depMaps.push(pluginMap);on(pluginMap,"defined",bind(this,function(plugin){var load,normalizedMap,normalizedMod,bundleId=getOwn(bundlesMap,this.map.id),name=this.map.name,parentName=this.map.parentMap?this.map.parentMap.name:null,localRequire=context.makeRequire(map.parentMap,{enableBuildCallback:true});if(this.map.unnormalized){if(plugin.normalize){name=plugin.normalize(name,function(name){return normalize(name,parentName,true)})||""}normalizedMap=makeModuleMap(map.prefix+"!"+name,this.map.parentMap);on(normalizedMap,"defined",bind(this,function(value){this.init([],function(){return value},null,{enabled:true,ignore:true})}));normalizedMod=getOwn(registry,normalizedMap.id);if(normalizedMod){this.depMaps.push(normalizedMap);if(this.events.error){normalizedMod.on("error",bind(this,function(err){this.emit("error",err)}))}normalizedMod.enable()}return}if(bundleId){this.map.url=context.nameToUrl(bundleId);this.load();return}load=bind(this,function(value){this.init([],function(){return value},null,{enabled:true})});load.error=bind(this,function(err){this.inited=true;this.error=err;err.requireModules=[id];eachProp(registry,function(mod){if(mod.map.id.indexOf(id+"_unnormalized")===0){cleanRegistry(mod.map.id)}});onError(err)});load.fromText=bind(this,function(text,textAlt){var moduleName=map.name,moduleMap=makeModuleMap(moduleName),hasInteractive=useInteractive;if(textAlt){text=textAlt}if(hasInteractive){useInteractive=false}getModule(moduleMap);if(hasProp(config.config,id)){config.config[moduleName]=config.config[id]}try{req.exec(text)}catch(e){return onError(makeError("fromtexteval","fromText eval for "+id+" failed: "+e,e,[id]))}if(hasInteractive){useInteractive=true}this.depMaps.push(moduleMap);context.completeLoad(moduleName);localRequire([moduleName],load)});plugin.load(map.name,localRequire,load,config)}));context.enable(pluginMap,this);this.pluginMaps[pluginMap.id]=pluginMap},enable:function(){enabledRegistry[this.map.id]=this;this.enabled=true;this.enabling=true;each(this.depMaps,bind(this,function(depMap,i){var id,mod,handler;if(typeof depMap==="string"){depMap=makeModuleMap(depMap,this.map.isDefine?this.map:this.map.parentMap,false,!this.skipMap);this.depMaps[i]=depMap;handler=getOwn(handlers,depMap.id);if(handler){this.depExports[i]=handler(this);return}this.depCount+=1;on(depMap,"defined",bind(this,function(depExports){if(this.undefed){return}this.defineDep(i,depExports);this.check()}));if(this.errback){on(depMap,"error",bind(this,this.errback))}else if(this.events.error){on(depMap,"error",bind(this,function(err){this.emit("error",err)}))}}id=depMap.id;mod=registry[id];if(!hasProp(handlers,id)&&mod&&!mod.enabled){context.enable(depMap,this)}}));eachProp(this.pluginMaps,bind(this,function(pluginMap){var mod=getOwn(registry,pluginMap.id);if(mod&&!mod.enabled){context.enable(pluginMap,this)}}));this.enabling=false;this.check()},on:function(name,cb){var cbs=this.events[name];if(!cbs){cbs=this.events[name]=[]}cbs.push(cb)},emit:function(name,evt){each(this.events[name],function(cb){cb(evt)});if(name==="error"){delete this.events[name]}}};function callGetModule(args){if(!hasProp(defined,args[0])){getModule(makeModuleMap(args[0],null,true)).init(args[1],args[2])}}function removeListener(node,func,name,ieName){if(node.detachEvent&&!isOpera){if(ieName){node.detachEvent(ieName,func)}}else{node.removeEventListener(name,func,false)}}function getScriptData(evt){var node=evt.currentTarget||evt.srcElement;removeListener(node,context.onScriptLoad,"load","onreadystatechange");removeListener(node,context.onScriptError,"error");return{node:node,id:node&&node.getAttribute("data-requiremodule")}}function intakeDefines(){var args;takeGlobalQueue();while(defQueue.length){args=defQueue.shift();if(args[0]===null){return onError(makeError("mismatch","Mismatched anonymous define() module: "+args[args.length-1]))}else{callGetModule(args)}}context.defQueueMap={}}context={config:config,contextName:contextName,registry:registry,defined:defined,urlFetched:urlFetched,defQueue:defQueue,defQueueMap:{},Module:Module,makeModuleMap:makeModuleMap,nextTick:req.nextTick,onError:onError,configure:function(cfg){if(cfg.baseUrl){if(cfg.baseUrl.charAt(cfg.baseUrl.length-1)!=="/"){cfg.baseUrl+="/"}}var shim=config.shim,objs={paths:true,bundles:true,config:true,map:true};eachProp(cfg,function(value,prop){if(objs[prop]){if(!config[prop]){config[prop]={}}mixin(config[prop],value,true,true)}else{config[prop]=value}});if(cfg.bundles){eachProp(cfg.bundles,function(value,prop){each(value,function(v){if(v!==prop){bundlesMap[v]=prop}})})}if(cfg.shim){eachProp(cfg.shim,function(value,id){if(isArray(value)){value={deps:value}}if((value.exports||value.init)&&!value.exportsFn){value.exportsFn=context.makeShimExports(value)}shim[id]=value});config.shim=shim}if(cfg.packages){each(cfg.packages,function(pkgObj){var location,name;pkgObj=typeof pkgObj==="string"?{name:pkgObj}:pkgObj;name=pkgObj.name;location=pkgObj.location;if(location){config.paths[name]=pkgObj.location}config.pkgs[name]=pkgObj.name+"/"+(pkgObj.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")})}eachProp(registry,function(mod,id){if(!mod.inited&&!mod.map.unnormalized){mod.map=makeModuleMap(id,null,true)}});if(cfg.deps||cfg.callback){context.require(cfg.deps||[],cfg.callback)}},makeShimExports:function(value){function fn(){var ret;if(value.init){ret=value.init.apply(global,arguments)}return ret||value.exports&&getGlobal(value.exports)}return fn},makeRequire:function(relMap,options){options=options||{};function localRequire(deps,callback,errback){var id,map,requireMod;if(options.enableBuildCallback&&callback&&isFunction(callback)){callback.__requireJsBuild=true}if(typeof deps==="string"){if(isFunction(callback)){return onError(makeError("requireargs","Invalid require call"),errback)}if(relMap&&hasProp(handlers,deps)){return handlers[deps](registry[relMap.id])}if(req.get){return req.get(context,deps,relMap,localRequire)}map=makeModuleMap(deps,relMap,false,true);id=map.id;if(!hasProp(defined,id)){return onError(makeError("notloaded",'Module name "'+id+'" has not been loaded yet for context: '+contextName+(relMap?"":". Use require([])")))}return defined[id]}intakeDefines();context.nextTick(function(){intakeDefines();requireMod=getModule(makeModuleMap(null,relMap));requireMod.skipMap=options.skipMap;requireMod.init(deps,callback,errback,{enabled:true});checkLoaded()});return localRequire}mixin(localRequire,{isBrowser:isBrowser,toUrl:function(moduleNamePlusExt){var ext,index=moduleNamePlusExt.lastIndexOf("."),segment=moduleNamePlusExt.split("/")[0],isRelative=segment==="."||segment==="..";if(index!==-1&&(!isRelative||index>1)){ext=moduleNamePlusExt.substring(index,moduleNamePlusExt.length);moduleNamePlusExt=moduleNamePlusExt.substring(0,index)}return context.nameToUrl(normalize(moduleNamePlusExt,relMap&&relMap.id,true),ext,true)},defined:function(id){return hasProp(defined,makeModuleMap(id,relMap,false,true).id)},specified:function(id){id=makeModuleMap(id,relMap,false,true).id;return hasProp(defined,id)||hasProp(registry,id)}});if(!relMap){localRequire.undef=function(id){takeGlobalQueue();var map=makeModuleMap(id,relMap,true),mod=getOwn(registry,id);mod.undefed=true;removeScript(id);delete defined[id];delete urlFetched[map.url];delete undefEvents[id];eachReverse(defQueue,function(args,i){if(args[0]===id){defQueue.splice(i,1)}});delete context.defQueueMap[id];if(mod){if(mod.events.defined){undefEvents[id]=mod.events}cleanRegistry(id)}}}return localRequire},enable:function(depMap){var mod=getOwn(registry,depMap.id);if(mod){getModule(depMap).enable()}},completeLoad:function(moduleName){var found,args,mod,shim=getOwn(config.shim,moduleName)||{},shExports=shim.exports;takeGlobalQueue();while(defQueue.length){args=defQueue.shift();if(args[0]===null){args[0]=moduleName;if(found){break}found=true}else if(args[0]===moduleName){found=true}callGetModule(args)}context.defQueueMap={};mod=getOwn(registry,moduleName);if(!found&&!hasProp(defined,moduleName)&&mod&&!mod.inited){if(config.enforceDefine&&(!shExports||!getGlobal(shExports))){if(hasPathFallback(moduleName)){return}else{return onError(makeError("nodefine","No define call for "+moduleName,null,[moduleName]))}}else{callGetModule([moduleName,shim.deps||[],shim.exportsFn])}}checkLoaded()},nameToUrl:function(moduleName,ext,skipExt){var paths,syms,i,parentModule,url,parentPath,bundleId,pkgMain=getOwn(config.pkgs,moduleName);if(pkgMain){moduleName=pkgMain}bundleId=getOwn(bundlesMap,moduleName);if(bundleId){return context.nameToUrl(bundleId,ext,skipExt)}if(req.jsExtRegExp.test(moduleName)){url=moduleName+(ext||"")}else{paths=config.paths;syms=moduleName.split("/");for(i=syms.length;i>0;i-=1){parentModule=syms.slice(0,i).join("/");parentPath=getOwn(paths,parentModule);if(parentPath){if(isArray(parentPath)){parentPath=parentPath[0]}syms.splice(0,i,parentPath);break}}url=syms.join("/");url+=ext||(/^data\:|\?/.test(url)||skipExt?"":".js");url=(url.charAt(0)==="/"||url.match(/^[\w\+\.\-]+:/)?"":config.baseUrl)+url}return config.urlArgs?url+((url.indexOf("?")===-1?"?":"&")+config.urlArgs):url},load:function(id,url){req.load(context,id,url)},execCb:function(name,callback,args,exports){return callback.apply(exports,args)},onScriptLoad:function(evt){if(evt.type==="load"||readyRegExp.test((evt.currentTarget||evt.srcElement).readyState)){interactiveScript=null;var data=getScriptData(evt);context.completeLoad(data.id)}},onScriptError:function(evt){var data=getScriptData(evt);if(!hasPathFallback(data.id)){return onError(makeError("scripterror","Script error for: "+data.id,evt,[data.id]))}}};context.require=context.makeRequire();return context}req=requirejs=function(deps,callback,errback,optional){var context,config,contextName=defContextName;if(!isArray(deps)&&typeof deps!=="string"){config=deps;if(isArray(callback)){deps=callback;callback=errback;errback=optional}else{deps=[]}}if(config&&config.context){contextName=config.context}context=getOwn(contexts,contextName);if(!context){context=contexts[contextName]=req.s.newContext(contextName)}if(config){context.configure(config)}return context.require(deps,callback,errback)};req.config=function(config){return req(config)};req.nextTick=typeof setTimeout!=="undefined"?function(fn){setTimeout(fn,4)}:function(fn){fn()};if(!require){require=req}req.version=version;req.jsExtRegExp=/^\/|:|\?|\.js$/;req.isBrowser=isBrowser;s=req.s={contexts:contexts,newContext:newContext};req({});each(["toUrl","undef","defined","specified"],function(prop){req[prop]=function(){var ctx=contexts[defContextName];return ctx.require[prop].apply(ctx,arguments)}});if(isBrowser){head=s.head=document.getElementsByTagName("head")[0];baseElement=document.getElementsByTagName("base")[0];if(baseElement){head=s.head=baseElement.parentNode}}req.onError=defaultOnError;req.createNode=function(config,moduleName,url){var node=config.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");node.type=config.scriptType||"text/javascript";node.charset="utf-8";node.async=true;return node};req.load=function(context,moduleName,url){var config=context&&context.config||{},node;if(isBrowser){node=req.createNode(config,moduleName,url);if(config.onNodeCreated){config.onNodeCreated(node,config,moduleName,url)}node.setAttribute("data-requirecontext",context.contextName);node.setAttribute("data-requiremodule",moduleName);if(node.attachEvent&&!(node.attachEvent.toString&&node.attachEvent.toString().indexOf("[native code")<0)&&!isOpera){useInteractive=true;node.attachEvent("onreadystatechange",context.onScriptLoad)}else{node.addEventListener("load",context.onScriptLoad,false);node.addEventListener("error",context.onScriptError,false)}node.src=url;currentlyAddingScript=node;if(baseElement){head.insertBefore(node,baseElement)}else{head.appendChild(node)}currentlyAddingScript=null;return node}else if(isWebWorker){try{importScripts(url);context.completeLoad(moduleName)}catch(e){context.onError(makeError("importscripts","importScripts failed for "+moduleName+" at "+url,e,[moduleName]))}}};function getInteractiveScript(){if(interactiveScript&&interactiveScript.readyState==="interactive"){return interactiveScript}eachReverse(scripts(),function(script){if(script.readyState==="interactive"){return interactiveScript=script}});return interactiveScript}if(isBrowser&&!cfg.skipDataMain){eachReverse(scripts(),function(script){if(!head){head=script.parentNode}dataMain=script.getAttribute("data-main");if(dataMain){mainScript=dataMain;if(!cfg.baseUrl){src=mainScript.split("/");mainScript=src.pop();subPath=src.length?src.join("/")+"/":"./";cfg.baseUrl=subPath}mainScript=mainScript.replace(jsSuffixRegExp,"");if(req.jsExtRegExp.test(mainScript)){mainScript=dataMain}cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript];return true}})}define=function(name,deps,callback){var node,context;if(typeof name!=="string"){callback=deps;deps=name;name=null}if(!isArray(deps)){callback=deps;deps=null}if(!deps&&isFunction(callback)){deps=[];if(callback.length){callback.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(match,dep){deps.push(dep)});deps=(callback.length===1?["require"]:["require","exports","module"]).concat(deps)}}if(useInteractive){node=currentlyAddingScript||getInteractiveScript();if(node){if(!name){name=node.getAttribute("data-requiremodule")}context=contexts[node.getAttribute("data-requirecontext")]}}if(context){context.defQueue.push([name,deps,callback]);context.defQueueMap[name]=true}else{globalDefQueue.push([name,deps,callback])}};define.amd={jQuery:true};req.exec=function(text){return eval(text)};req(cfg)})(window);this.require=require;this.define=define}Required.add("setConf",function(conf){"use strict";this.require.config(_.extend({baseUrl:setting.app_path,paths:{system:setting.system_path}},conf||{},true))});Required.add("getRequire",function(){"use strict";return this.require});Required.add("getDefine",function(){"use strict";return this.define});Required.add("lookup",function(dependencies){"use strict";var _self=this;return new Promise(function(resolve,reject){_self.require(dependencies,function(){resolve()})})});window.Require=new Required;Require.setConf();"use strict";function Libs(){this.breadcrumb={};this.object={};this.name=null}Libs.add("blend",function(name,dependencies){var _split=_.splitString(name,".");if(_.isArray(_split)){name=_split[0]}var _anonymous=Function.factory(name)();if(!(name in this.breadcrumb)){_.Syrup.blend(_anonymous);this.name=name;this.object=_[name];this.breadcrumb[name]=this.object;this._dependencies(dependencies)}return this});Libs.add("get",function(name){return name in this.breadcrumb&&this.breadcrumb[name]});Libs.add("_dependencies",function(dependencies){var _self=this;if(_.isArray(dependencies)&&_.isSet(_self.object)){_.each(dependencies,function(v){_self.object.__proto__[v]=!(v in _self.object)?_[v]||new window[v]:_self.object[v]})}});Libs.add("make",function(attributes){var _self=this;_.each(attributes,function(v,i){_self.object[i]=v});return this});Libs.add("supply",function(supplier){var _self=this,_k=_.getObjectKeys(supplier),_i=_k.length;while(_i--){if(_.isFunction(supplier[_k[_i]]))_self.cook(_k[_i],supplier[_k[_i]])}return this});Libs.add("cook",function(name,callback){this.object.__proto__[name]=callback;return this});window.Lib=new Libs;"use strict";function Apps(){this.root=null;this.lib=null;this.app=null;this.triggerAfter={};this.triggerBefore={};this.scope={};this.modules={};this.onchange={}}Apps.add("blend",function(name,dependencies){var _self=new Apps;_self.lib=new Libs;_self.root=name;_self.scope={};_self.app=_$('[sp-app="'+name+'"]');_self.lib.blend(name,dependencies);return _self});Apps.add("recipe",function(moduleId,module){if(_.isSet(this.root)){if(_.isSet(module)){this.temp=moduleId;this.modules[moduleId]={creator:module,instance:null};this._taste(moduleId)}}return this});Apps.add("_watch",function(moduleId){var _self=this;Object.observe(_self.scope,function(change){_.each(change,function(v){if(v.name in _self.onchange&&_.getObjectSize(v.object)>0&&moduleId===v.name){_self.onchange[v.name]({name:v.name,old:v.oldValue,type:v.type,object:v.object[v.name]})}})})});Apps.add("_add",function(moduleId){if(!_.isObject(this.scope[moduleId]))this.scope[moduleId]={}});Apps.add("_trigger",function(moduleId){if(moduleId in this.modules)return this.modules[moduleId].creator(_,_$,this.scope);return{}});Apps.add("_triggerOn",function(moduleList,callback,toList){if(_.isArray(moduleList)){_.each(moduleList,function(moduleId){if(!(moduleId in toList))toList[moduleId]=callback})}return this});Apps.add("beforeInit",function(moduleList,callback){return this._triggerOn(moduleList,callback,this.triggerBefore)});Apps.add("afterInit",function(moduleList,callback){return this._triggerOn(moduleList,callback,this.triggerAfter)});Apps.add("service",function(name,callback){this.lib.cook(name,callback);return this});Apps.add("services",function(object){this.lib.supply(object);return this});Apps.add("getRecipe",function(moduleId){if(moduleId in this.modules&&_.isSet(this.root))return this.modules[moduleId].instance;return null});Apps.add("setScope",function(moduleId,object){if(moduleId in this.scope){this.scope[moduleId]=object}return this});Apps.add("getScope",function(moduleId){if(moduleId in this.scope){return this.scope[moduleId]}return{}});Apps.add("when",function(event,name){var self=this;return{change:{then:function(resolve){self.onchange[name]=resolve}}}[event]});Apps.add("_bindListener",function(moduleId){var enabled_events=["[sp-click], ","submit], ","change], ","dblclick], ","mousedown], ","mouseenter], ","mouseleave], ","mousemove], ","mouseover], ","mouseout], ","mouseup], ","keydown], ","keypress], ","keyup], ","blur], ","focus], ","input], ","select], ","reset]"];if(this.app.exist){var _this=this,_self=this.modules[moduleId].instance,_the_filter=enabled_events.join(" [sp-"),_mod=_$('[sp-recipe="'+moduleId+'"]');_mod.find(_the_filter,function(dom_list){dom_list.each(function(i){_.each(i.attributes,function(v){if(/sp-[a-z]+/.test(v.localName)){var _event=_.replace(v.localName,"sp-",_.emptyStr),_attr=i.getAttribute(v.localName);if(_attr in _self){if(_.isFunction(_self[_attr])){_mod.listen(_event,"["+v.localName+'="'+_attr+'"]',function(e){_self[_attr](e,_this.lib.get(_self.parent))})}}}})})})}});Apps.add("_serve",function(moduleId,template){var _view=null,_scope=this.scope[moduleId];if(this.app.exist){var _dom=_$('[sp-recipe="'+moduleId+'"] [sp-view]'),_dom_template=_$('[sp-recipe="'+moduleId+'"] [sp-tpl]');if(_dom.exist){if(_.getObjectSize(_scope)>0){_view=new View;if(_.isSet(template)&&_.isString(template)){var view_name=template.split("/").pop(),view_dir=_.replace(template,"/"+view_name,_.emptyStr);Require.lookup(["view/"+view_dir]).then(function(){if(view_name in _view.__proto__)_view[view_name](_scope,function(my_html){_dom.html(my_html)})})}else if(_dom_template.exist){var _parse=_dom_template.html();if(_.isSet(_parse)){_view.render(_parse,_scope).then(function(result){_dom.html(result)})}}}}}return this});Apps.add("_taste",function(moduleId){var _self=this;if(moduleId in _self.modules&&_.isSet(_self.root)){_self._add(moduleId);_self.modules[moduleId].instance=_self._trigger(moduleId);_self.modules[moduleId].instance.name=moduleId;_self.modules[moduleId].instance.parent=_self.root;_self.modules[moduleId].instance.setScope=function(object){if(_.isObject(object)){_self.setScope(moduleId,object);return this}};_self.modules[moduleId].instance.getScope=function(){return _self.getScope(moduleId)};_self.modules[moduleId].instance.when=function(event){return _self.when(event,moduleId)};_self.modules[moduleId].instance.getRecipe=function(){return _self.getRecipe(moduleId)};_self.modules[moduleId].instance.serve=function(_template){_self._serve(moduleId,_template||null);return this};_self.modules[moduleId].instance.listen=function(event,callback){_$('[sp-recipe="'+moduleId+'"]').listen(event,"[sp-"+event+"]",callback);return this};if("init"in _self.modules[moduleId].instance){if(moduleId in this.triggerBefore)_self.triggerBefore[moduleId](moduleId,this.lib.get(_self.root));_self.modules[moduleId].instance.init(this.lib.get(_self.root));_self._bindListener(moduleId);if(moduleId in _self.triggerAfter)_self.triggerAfter[moduleId](moduleId,this.lib.get(_self.root))}_self._watch(moduleId)}return this});Apps.add("drop",function(moduleId){if(moduleId in this.modules){if(this.modules[moduleId].instance){if("destroy"in this.modules[moduleId].instance)this.modules[moduleId].instance.destroy(this.lib.get(this.root));this.modules[moduleId]=null}}return this});Apps.add("dropAll",function(){var _self=this;_.each(this.modules,function(module,id){_self.drop(id)});return this});window.App=new Apps;"use strict";function Http(){this.xhr=new window.XMLHttpRequest||new window.ActiveXObject("Microsoft.XMLHTTP");this.xhr_list=[];this.upload=null;this.before=null;this.complete=null;this.progress=null;this.state=null;this.abort=null;this.error=null;this.time_out=null}Http.add("on",function(event,callback){var self=this;return[{before:function(){self.before=callback},complete:function(){self.complete=callback;

},abort:function(){self.abort=callback},state:function(){self.state=callback},timeout:function(){self.time_out=callback},progress:function(){self.progress=callback}}[event]()]});Http.add("request",function(config){if(!_.isObject(config)){throw _.WARNING_SYRUP.ERROR.NOOBJECT}var _self=this,_xhr=_self.xhr,_async=config.async||true,_type=(config.method||"GET").toUpperCase(),_timeout=config.timeout||4e3,_cors=config.cors||false,_processor=config.processor||setting.processor,_token=config.token||null,_contentType=config.contentType||"application/x-www-form-urlencoded;charset=utf-8",_data=config.data||null,_contentHeader={header:"Content-Type",value:_contentType};return new Promise(function(resolve,reject){if(!_.isSet(config.url))reject(_.WARNING_SYRUP.ERROR.NOURL);if(!_.isFormData(_data)&&_.isSet(_data)&&_contentType!=="auto"){_data=_.jsonToQueryString(_data)}if(_type==="GET"&&_.isSet(_data)){_processor+="?"+_data}_processor=config.url+(_processor||"");_xhr.open(_type,_processor,_async);_xhr.timeout=_timeout;if(!_.isFormData(_data)&&_contentType!=="auto"){_self.requestHeader(_contentHeader.header,_contentHeader.value)}if(_.isSet(_cors))_xhr.withCredentials=true;if(_.isSet(_token))_self.requestHeader("X-CSRFToken",_token);if(_.isSet(config.upload)&&_.isBoolean(config.upload)){_self.upload=_self.xhr.upload;_xhr=_self.upload}_xhr.addEventListener("load",function(e){if(this.status>=200&&this.status<400){var _response=this.response||this.responseText;if(_.isJson(_response)){_response=JSON.parse(_response)}resolve(_response)}});_xhr.addEventListener("progress",function(e){if(_self.progress){_self.progress(e)}},false);_xhr.addEventListener("readystatechange",function(e){if(this.readyState){if(!!_self.state){_self.state(this.readyState,e)}}});_xhr.addEventListener("abort",function(e){if(!!_self.abort){_self.abort(e)}});_xhr.addEventListener("timeout",function(e){if(!!_self.time_out){_self.time_out(e)}});_xhr.addEventListener("loadend",function(e){if(!!_self.complete){_self.complete(e)}});_xhr.addEventListener("loadstart",function(e){if(!!_self.before){_self.before(e)}});_xhr.addEventListener("error",function(e){reject(e)});_self.xhr_list.push(_self.xhr);_xhr.send(_type!=="GET"?_data:null)})});Http.add("get",function(url,data){var _conf={url:url||location.href,data:data||{}};this.kill();return this.request(_conf)});Http.add("post",function(url,data){var _conf={method:"POST",url:url||location.href,data:data||{}};this.kill();return this.request(_conf)});Http.add("put",function(url,data){var _conf={method:"PUT",url:url||location.href,data:data||{}};this.kill();return this.request(_conf)});Http.add("delete",function(url,data){var _conf={method:"DELETE",url:url||location.href,data:data||{}};this.kill();return this.request(_conf)});Http.add("requestHeader",function(header,type){this.xhr.setRequestHeader(header,type);return this});Http.add("kill",function(){_.each(this.xhr_list,function(xhr){xhr.abort()});this.xhr_list.length=0;return this});"use strict";function Router(){this.routes={}}Router.add("setRoutes",function(routes){var _self=this;return new Promise(function(resolve,reject){_self.routes=_.extend(_self.routes,routes);resolve(_self.routes)})});Router.add("when",function(route_name){_.assert(route_name,_.WARNING_SYRUP.ERROR.NOPARAM);var _self=this;return new Promise(function(resolve,reject){if(!(route_name in _self.routes))reject(route_name);var _the_regexp=_self.routes[route_name],_to_route=window.location.pathname,_result=_to_route.match(new RegExp(_the_regexp,"g"));if(_result)resolve(_result)})});Router.add("parseQueryString",function(){});"use strict";function Storage(){}Storage.add("set",function(key,data){localStorage.setItem(key,JSON.stringify(data))});Storage.add("get",function(key){return _.isJson(localStorage.getItem(key))?JSON.parse(localStorage.getItem(key)):null});Storage.add("append",function(key,element){var _existent=this.get(key),_new=_.extend(_.isSet(_existent)?_existent:{},element);this.set(key,_new,false);return this});Storage.add("destroy",function(){localStorage.clear()});Storage.add("clear",function(key){localStorage.removeItem(key);return this});Storage.add("count",function(){return localStorage.length});"use strict";function Workers(){this.Worker=null;this.onsuccess=null}Workers.add("on",function(event,callback){var self=this;return[{message:function(){self.onsuccess=callback}}[event]()]});Workers.add("set",function(url){var self=this;return new Promise(function(resolve,reject){self.Worker=new Worker(setting.system_path+url+".min.js");self.Worker.addEventListener("message",function(e){_.callbackAudit(self.onsuccess,e)},false);resolve(self)})});Workers.add("get",function(){return this.Worker});Workers.add("send",function(message){this.Worker.postMessage(!!message?message:"");return this});Workers.add("kill",function(){if(_.isSet(this.Worker)){this.Worker.terminate();this.Worker=null}return this});"use strict";function View(){this.Http=new Http;this.Storage=new Storage;this.dir=null;this.tpl=null}View.add("lookup",function(template){var _conf={url:setting.app_path+"/templates/"+template,contentType:"text/plain",processor:".html"};return this.Http.request(_conf)});View.add("seekTpl",function(template){var _self=this,_repo=_self.Storage,_template=null,_save={};if(!_.isSet(_repo.get("templates"))){_repo.set("templates",{})}_template=_repo.get("templates");_self.dir=template;return new Promise(function(resolve,reject){if(template in _template){_self.tpl=_template[template];resolve(_self)}else{_self.lookup(template).then(function(temp){_save[template]=temp;_repo.append("templates",_save);_self.tpl=temp;resolve(_self)}).catch(function(){reject(_.WARNING_SYRUP.ERROR.NONETWORK)})}})});View.add("getTpl",function(){return this.tpl});View.add("clear",function(){this.Storage.clear("templates");return this});View.add("remove",function(){if(this.dir){var old_templates=this.Storage.get("templates");if(old_templates){delete old_templates[this.dir]}this.Storage.set("templates",old_templates);this.dir=null}return this});View.add("render",function(_template,_fields){return new Promise(function(resolve,reject){(new Workers).set("/workers/setting/Parser").then(function(worker){worker.send({template:_template,fields:_fields});worker.on("message",function(e){resolve(e.data)})})})});"use strict";function Model(){this.Http=new Http;this.modelData=null;this.object={};this.type="POST";this.model=null;this.failed=null}Model.add("method",function(method){this.type=method.toUpperCase();return this});Model.add("attach",function(name,attach){var self=this;_.assert(self.modelData,_.WARNING_SYRUP.ERROR.NOPACK);self.modelData.append(name,attach)});Model.add("multiple",function(name){var _return=[],_model_obj=this.model.object();if(name in _model_obj.elements){_.each(_model_obj.elements[name],function(v,i){_return.push(v.value)})}return _return.length>0?_return:false});Model.add("fail",function(field,error){this.failed=true;return{field:field,error:error,coords:_.cartesianPlane(field)}});Model.add("send",function(url,data){var self=this;_.assert(data,_.WARNING_SYRUP.ERROR.NOPACK);var conf={url:url,data:data,method:self.type};return new Promise(function(resolve,reject){if(self.failed)reject(data);self.Http.kill();self.Http.request(conf).then(function(response){resolve(response)}).catch(reject)})});Model.add("getObject",function(){return this.object});Model.add("getData",function(){return this.modelData});Model.add("pack",function(model){var self=this;self.model=_$(model);var _modelData=new FormData,_field_array,_model_obj=self.model.object(),_fields=_model_obj.querySelectorAll("input, textarea, select"),x=_fields.length;self.failed=false;return new Promise(function(resolve,reject){while(x--){if(_fields[x].type==="file"||!_fields[x]){continue}if(_fields[x].type==="checkbox"||_fields[x].type==="radio"){if(!_fields[x].checked){continue}}var field=_fields[x],fieldValue=field.value;if(!_$(field).data("skip")&&_.isEmpty(fieldValue)){reject(self.fail(field,"empty"));break}else if(_$(field).data("mail")&&!_.isMail(fieldValue)){reject(self.fail(field,"invalid_mail"));break}else if(_$(field).data("min")&&+_$(field).data("min")>fieldValue.length){reject(self.fail(field,"minim_chars"));break}else if(_$(field).data("max")&&+_$(field).data("max")<fieldValue.length){reject(self.fail(field,"overflow_chars"));break}else{if(_$(field).data("custom")){var Regex=new RegExp(_$(field).data("custom"),"g");if(!Regex.test(fieldValue)){reject(self.fail(field,"invalid_custom"));break}}if(_.isSet(field.name)){if(!!(_field_array=self.multiple(field.name)))fieldValue=_field_array;_modelData.append(field.name,fieldValue);self.object[field.name]=fieldValue}}}self.modelData=_modelData;resolve(self)})});"use strict";var GoogleMap,WARNING_GOOGLE_MAP={ERROR:{NOLOCATION:"No coordinates seted.",NOMAP:"No map seted.",NOCONTAINER:"No map container seted.",NOCONFIG:"The configuration object is necessary.",NOROUTES:"No mapped routes",NODISTANCE:"You need the source and target to measure the distance."}};GoogleMap=function(){var _proto=this.__proto__||GoogleMap.prototype,_self=this||_proto;_self.markersCollection=[];_self.coordsCollection=[];_self.routesCollection=[];_self.infoLabels=[];_self.distanceCollection={};_self.container=null;_self.mapa=null;_self.position=null;_self.mapType="roadmap";_self.travelType="DRIVING";_self.marker=null;_self.ruta=null;_self.mapObject=google.maps;_self.infoWindow=null;_self.animationType=_self.mapObject.Animation.DROP;_self.geocoder=new _self.mapObject.Geocoder;_self.distance=new _self.mapObject.DistanceMatrixService;_proto.setMapType=function(map){var self=this;self.mapType=[{road:self.mapObject.MapTypeId.ROADMAP,satellite:self.mapObject.MapTypeId.SATELLITE,hybrid:self.mapObject.MapTypeId.HYBRID,terrain:self.mapObject.MapTypeId.TERRAIN}[map]].toString()||self.mapType};_proto.setMapContainer=function(container){if(_.is$(container))container=container.object();this.container=container};_proto.getMapPosition=function(){return this.position};_proto.parseLatLngEvent=function(e){if(e.latLng){return{latitude:e.latLng.lat(),longitude:e.latLng.lng()}}return null};_proto.getMap=function(){return this.mapa};_proto.getCoords=function(){return this.coordsCollection};_proto.cleanCoords=function(){this.coordsCollection=[]};_proto.getCoordsCenterPoint=function(){var coords=this.coordsCollection,x=0,y=0,z=0,lat=0,long=0;_.each(coords,function(v){lat=v.lat()*Math.PI/180;long=v.lng()*Math.PI/180;x+=Math.cos(lat)*Math.cos(long);y+=Math.cos(lat)*Math.sin(long);z+=Math.sin(lat)});x/=coords.length;y/=coords.length;z/=coords.length;long=Math.atan2(y,x);lat=Math.atan2(z,Math.sqrt(x*x+y*y));return{latitude:lat*180/Math.PI,longitude:long*180/Math.PI}};_proto.appendCoord=function(ltnLgn){this.coordsCollection.push(ltnLgn)};_proto.on=function(elem,event,callback){if(_.isString(elem)){callback=event;event=elem;if(_.isSet(this.mapa))elem=this.mapa}if(!_.isFunction(callback))_.error(_.WARNING_SYRUP.ERROR.NOFUNCTION);if(!_.isObject(elem))_.error(WARNING_GOOGLE_MAP.ERROR.NOMAP);_self.mapObject.event.addListener(elem,event,callback)};_proto.makePosition=function(latLong){if(!_.isObject(latLong)){_.error(WARNING_GOOGLE_MAP.ERROR.NOCONFIG)}return new this.mapObject.LatLng(latLong.latitude,latLong.longitude)};_proto.setMapPosition=function(latLong){if(!_.isObject(latLong)){_.error(WARNING_GOOGLE_MAP.ERROR.NOCONFIG)}this.position=this.makePosition(latLong)};_proto.changeMapPosition=function(latLong){var self=this;if(!_.isObject(latLong)){_.error(WARNING_GOOGLE_MAP.ERROR.NOCONFIG)}if(!self.mapa){_.error(WARNING_GOOGLE_MAP.ERROR.NOMAP)}self.setMapPosition(latLong);self.mapa.setCenter(self.position)};_proto.createMap=function(config,callback){var self=this;if(!self.position){_.error(WARNING_GOOGLE_MAP.ERROR.NOLOCATION)}if(!self.container){_.error(WARNING_GOOGLE_MAP.ERROR.NOCONTAINER)}var mapOptionsDefault={zoom:10,center:self.position,mapTypeId:self.mapType},options;if(!_.isFunction(config)){options=_.extend(config,mapOptionsDefault)}else{options=mapOptionsDefault;callback=arguments[0]}self.mapa=new self.mapObject.Map(self.container,options);_.callbackAudit(callback,self.mapa)};_proto.setMarker=function(position,config){if(!this.mapa)_.error(WARNING_GOOGLE_MAP.ERROR.NOMAP);if(!_.isObject(config))config={};if(position&&_.isObject(position)){this.setMapPosition(position)}else{if(!this.position){_.error(WARNING_GOOGLE_MAP.ERROR.NOLOCATION)}}var conf=_.extend({position:this.position,map:this.mapa},config);this.marker=new this.mapObject.Marker(conf);this.marker.setAnimation(this.animationType);this.markersCollection.push(this.marker);this.coordsCollection.push(this.position);return this.marker};_proto.setMarkerAnimationType=function(animation){var self=this;self.animationType=[{fall:self.mapObject.Animation.DROP,infinitejump:self.mapObject.Animation.BOUNCE}[animation]].toString()||self.animationType};_proto.stopMarkerAnimation=function(){this.marker.setAnimation(null)};_proto.showAllMarkers=function(map){_.each(this.markersCollection,function(v){v.setMap(map)})};_proto.clearMarkers=function(){this.showAllMarkers(null)};_proto.deleteMarkers=function(){this.markersCollection=[]};_proto.getMarkers=function(){return this.markersCollection};_proto.setMarkerInfo=function(content,marker,config){var self=this;config=_.extend({content:content},config);var info=this.createInfoLabel(content,config);info.open(self.mapa,marker);return info};_proto.createInfoLabel=function(content,config){var self=this;config=_.extend({content:content},config);self.infoWindow=new self.mapObject.InfoWindow(config);self.infoLabels.push(self.infoWindow);return self.infoWindow};_proto.clearInfoLabels=function(){_.each(this.infoLabels,function(v){v.close()})};_proto.clearInfoLabel=function(){self.infoWindow.close()};_proto.geoCodeRequest=function(object,callback){this.geocoder.geocode(object,callback)};_proto.getLocationInfo=function(position,callback){var self=this;if(_.isSet(position)&&_.isObject(position)){self.setMapPosition(position)}else{if(!_.isSet(self.position)){self.error(WARNING_GOOGLE_MAP.ERROR.NOLOCATION)}if(_.isFunction(position)){callback=arguments[0]}}this.geoCodeRequest({latLng:self.position},function(result,status){if(status===self.mapObject.GeocoderStatus.OK){_.callbackAudit(callback,{street:_.isSet(result[0].address_components[0])?result[0].address_components[0].long_name:null,city:_.isSet(result[0].address_components[1])?result[0].address_components[1].long_name:null,state:_.isSet(result[0].address_components[2])?result[0].address_components[2].long_name:null,country:_.isSet(result[0].address_components[3])?result[0].address_components[3].long_name:null})}})};_proto.getLocationBySearch=function(query,callback){this.geoCodeRequest({address:query},function(results,status){if(status==google.maps.GeocoderStatus.OK){var data=results[0].geometry.location;_.callbackAudit(callback,{latitude:data.lat(),longitude:data.lng(),altitude:0})}})};_proto.drawRoute=function(config,callback){var self=this;if(self.coordsCollection.length==0){self.error(WARNING_GOOGLE_MAP.ERROR.NOROUTES)}if(_.isFunction(config)){callback=arguments[0]}var _Conf=_.extend({path:self.coordsCollection,geodesic:true,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2},config,true);self.ruta=new self.mapObject.Polyline(_Conf);self.ruta.setMap(self.mapa);self.appendRoute(self.ruta);_.callbackAudit(callback,self.ruta)};_proto.appendRoute=function(route){this.routesCollection.push(route)};_proto.getRoutes=function(){return this.routesCollection};_proto.clearRoutes=function(){_.each(this.routesCollection,function(v){v.setMap(null)})};_proto.deleteRoutes=function(){this.routesCollection=[]};_proto.setTravelMode=function(type){var self=this;self.travelType=[{drive:self.mapObject.TravelMode.DRIVING,walk:self.mapObject.TravelMode.WALKING,bike:self.mapObject.TravelMode.BICYCLING,bus:self.mapObject.TravelMode.TRANSIT}[type]]||self.travelType};_proto.packDistances=function(object){var self=this,_destination=object.destinationAddresses,_origin=object.originAddresses,_distance=object.rows;for(var i in _destination){self.distanceCollection[i]={};for(var j in _origin){if(_destination[i]!=_origin[j]){if(_distance[i].elements[j].status=="OK"){self.distanceCollection[i][j]={};self.distanceCollection[i][j]["from"]=_destination[i];self.distanceCollection[i][j]["destiny"]=_origin[j];self.distanceCollection[i][j]["distance"]=_distance[i].elements[j].distance.text;self.distanceCollection[i][j]["time"]=_distance[i].elements[j].duration.text}else{self.distanceCollection[i]=false}}}}return self.distanceCollection};_proto.getDistance=function(routes,config,callback){var self=this;if(!routes||_.isObject(routes)){self.error(WARNING_GOOGLE_MAP.ERROR.NODISTANCE)}if(_.isFunction(config)){callback=arguments[1]}var _Conf=_.extend({origins:routes,destinations:routes,travelMode:self.travelType},config),_Distances=false;self.distance.getDistanceMatrix(_Conf,function(result,status){if(status=="OK"){_Distances=self.packDistances(result)}if(callback){callback(_Distances)}})}};